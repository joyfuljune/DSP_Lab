<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éŸ³é¢‘å˜é€Ÿå®éªŒ - åŸºäºç›¸ä½å£°ç å™¨çš„æ—¶é—´æ‹‰ä¼¸</title>
    
    <!-- MathJax for mathematical formulas -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            tex2jax: {
                inlineMath: [['$','$'], ['\\(','\\)']],
                displayMath: [['$$','$$'], ['\\[','\\]']],
                processEscapes: true
            },
            CommonHTML: { scale: 110 },
            "HTML-CSS": { scale: 110 }
        });
    </script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', 'SimSun', Arial, sans-serif;
            line-height: 1.8;
            color: #2c3e50;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 15px 50px rgba(0,0,0,0.25);
            overflow: hidden;
            position: relative;
        }

        /* ç«–ç›´è¿›åº¦æ¡ */
        .vertical-progress {
            position: fixed;
            right: 40px;
            top: 50%;
            transform: translateY(-50%);
            width: 4px;
            height: 400px;
            background: #e0e0e0;
            border-radius: 2px;
            z-index: 1000;
        }

        .vertical-progress::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: var(--progress, 0%);
            background: linear-gradient(180deg, #667eea, #764ba2);
            border-radius: 2px;
            transition: height 0.3s ease;
        }

        .progress-markers {
            position: absolute;
            left: -30px;
            top: 0;
            width: 80px;
            height: 100%;
        }

        .progress-marker {
            position: absolute;
            left: 0;
            width: 100%;
            display: flex;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .progress-marker::before {
            content: '';
            width: 12px;
            height: 12px;
            background: #e0e0e0;
            border: 2px solid #fff;
            border-radius: 50%;
            position: absolute;
            left: 34px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            transition: all 0.3s;
            z-index: 2;
        }

        .progress-marker.active::before {
            background: #667eea;
            width: 16px;
            height: 16px;
            left: 32px;
        }

        .progress-marker-label {
            position: absolute;
            right: 55px;
            background: white;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.8em;
            white-space: nowrap;
            opacity: 0;
            transform: translateX(10px);
            transition: all 0.3s;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border: 1px solid #e0e0e0;
            pointer-events: none;
        }

        .progress-marker:hover .progress-marker-label,
        .progress-marker.active .progress-marker-label {
            opacity: 1;
            transform: translateX(0);
        }

        .progress-marker.active .progress-marker-label {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 40px;
            text-align: center;
            border-bottom: 5px solid #9f7aea;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            font-weight: bold;
        }

        header .subtitle {
            font-size: 1.1em;
            opacity: 0.95;
            margin-top: 8px;
        }

        header .institution {
            font-size: 0.95em;
            margin-top: 12px;
            opacity: 0.9;
            border-top: 2px solid rgba(255,255,255,0.3);
            padding-top: 12px;
        }

        nav {
            background: #f5f7fa;
            padding: 15px 40px;
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            justify-content: center;
            border-bottom: 3px solid #9f7aea;
        }

        nav a {
            color: #5a67d8;
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 20px;
            transition: all 0.3s;
            font-size: 0.9em;
            font-weight: 500;
            background: white;
            border: 2px solid #9f7aea;
        }

        nav a:hover {
            background: #9f7aea;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(159, 122, 234, 0.4);
        }

        .content {
            padding: 0;
            max-width: 1200px;
            margin: 0 auto;
        }

        /* ä¸åŒæ¨¡å—çš„èƒŒæ™¯è‰² */
        section {
            margin-bottom: 0;
            padding: 40px;
            animation: fadeIn 0.6s ease-in;
        }

        #review {
            background: #f8f9ff;
        }

        #overview {
            background: #fff;
        }

        #stage1 {
            background: #fff5f5;
        }

        #stage2 {
            background: #f0fff4;
        }

        #stage3 {
            background: #fffaf0;
        }

        #workflow {
            background: #f5f7ff;
        }

        #experiments {
            background: #fafafa;
        }

        section:last-of-type {
            background: #f8f9ff;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h2 {
            color: #5a67d8;
            font-size: 1.9em;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 4px solid #9f7aea;
            font-weight: bold;
        }

        h3 {
            color: #667eea;
            font-size: 1.5em;
            margin: 25px 0 15px 0;
            font-weight: bold;
        }

        h4 {
            color: #5a67d8;
            font-size: 1.2em;
            margin: 20px 0 12px 0;
            font-weight: 600;
        }

        p {
            margin-bottom: 12px;
            text-align: justify;
            line-height: 1.8;
        }

        code {
            background-color: #edf2f7;
            color: #5a67d8;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9em;
        }

        .info-box {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-left: 5px solid #667eea;
            padding: 18px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 3px 12px rgba(0,0,0,0.08);
        }

        .info-box strong {
            color: #5a67d8;
            font-size: 1.05em;
        }

        .warning-box {
            background: linear-gradient(135deg, #fff5f5 0%, #fed7d7 100%);
            border-left: 5px solid #f56565;
            padding: 18px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 3px 12px rgba(0,0,0,0.08);
        }

        .warning-box strong {
            color: #c53030;
            font-size: 1.05em;
        }

        .success-box {
            background: linear-gradient(135deg, #f0fff4 0%, #c6f6d5 100%);
            border-left: 5px solid #48bb78;
            padding: 18px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 3px 12px rgba(0,0,0,0.08);
        }

        .success-box strong {
            color: #2f855a;
            font-size: 1.05em;
        }

        .tip-box {
            background: linear-gradient(135deg, #f0fff4 0%, #f7fafc 100%);
            border-left: 5px solid #48bb78;
            padding: 18px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 3px 12px rgba(0,0,0,0.08);
        }

        .analysis-box {
            background: linear-gradient(135deg, #fffaf0 0%, #fefcbf 100%);
            border-left: 5px solid #ed8936;
            padding: 18px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 3px 12px rgba(0,0,0,0.08);
        }

        .analysis-box h4 {
            color: #c05621;
            margin-top: 0;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .formula-box {
            background: linear-gradient(135deg, #f7fafc 0%, #ffffff 100%);
            border-left: 5px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border: 2px solid #9f7aea;
            overflow-x: auto;
            box-shadow: 0 3px 12px rgba(0,0,0,0.08);
        }

        .figure {
            margin: 25px 0;
            text-align: center;
        }

        .figure-caption {
            margin-top: 10px;
            font-style: italic;
            color: #666;
            font-size: 0.95em;
        }

        canvas {
            display: block;
            margin: 0 auto;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: white;
        }

        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .three-column {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .two-column, .three-column {
                grid-template-columns: 1fr;
            }
            section {
                padding: 25px 15px;
            }
            .vertical-progress {
                display: none;
            }
        }

        .step-box {
            background: white;
            padding: 18px;
            border-radius: 8px;
            border: 2px solid #e2e8f0;
            transition: all 0.3s;
        }

        .step-box:hover {
            border-color: #9f7aea;
            box-shadow: 0 4px 16px rgba(159, 122, 234, 0.2);
            transform: translateY(-2px);
        }

        .step-box h4 {
            margin-top: 0;
            margin-bottom: 8px;
        }

        .step-box p {
            margin-bottom: 8px;
        }

        /* æ–‡ä»¶å¡ç‰‡æ ·å¼ */
        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .comparison-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #e2e8f0;
            text-align: center;
            transition: all 0.3s;
        }

        .comparison-card:hover {
            border-color: #9f7aea;
            box-shadow: 0 4px 16px rgba(159, 122, 234, 0.2);
            transform: translateY(-3px);
        }

        .comparison-card h4 {
            margin: 0 0 10px 0;
            color: #5a67d8;
        }

        .comparison-card p {
            margin: 0;
            font-size: 0.95em;
            color: #666;
            text-align: center;
        }

        ul, ol {
            margin: 15px 0 15px 30px;
        }

        li {
            margin: 8px 0;
            line-height: 1.7;
        }

        .highlight {
            background: linear-gradient(120deg, #fef5e7 0%, #ffeaa7 100%);
            padding: 2px 5px;
            border-radius: 3px;
            font-weight: 500;
        }

        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            opacity: 0;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            font-size: 1.5em;
            z-index: 999;
        }

        .back-to-top.visible {
            opacity: 1;
        }

        .back-to-top:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.5);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 18px 0;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 3px 12px rgba(0,0,0,0.08);
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }

        th {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            font-weight: bold;
        }

        tr:hover {
            background: #f7fafc;
        }

        /* åŠ¨æ€æµç¨‹å›¾æ ·å¼ */
        .animated-flowchart {
            background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
            border-radius: 12px;
            padding: 25px;
            margin: 25px 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }

        .flow-container {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .flow-step {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 10px 15px;
            background: white;
            border-radius: 10px;
            transition: all 0.3s;
            position: relative;
        }

        .flow-step:hover {
            transform: translateX(8px);
            box-shadow: 0 3px 12px rgba(102, 126, 234, 0.2);
        }

        .flow-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.85em;
            flex-shrink: 0;
            box-shadow: 0 3px 10px rgba(102, 126, 234, 0.3);
        }

        .flow-content {
            flex: 1;
            padding: 8px 15px;
            background: #f7fafc;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .flow-content h4 {
            margin: 0 0 5px 0;
            color: #5a67d8;
            font-size: 1em;
        }

        .flow-content p {
            margin: 0;
            font-size: 0.9em;
            color: #666;
        }

        .flow-connector {
            position: absolute;
            left: 45px;
            top: 50px;
            bottom: -18px;
            width: 3px;
            background: linear-gradient(180deg, #9f7aea, #667eea);
            z-index: 1;
        }

        .flow-step:last-child .flow-connector {
            display: none;
        }

        /* å›¾ä¾‹æ ·å¼ */
        .legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 10px 0;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.85em;
        }

        .legend-color {
            width: 20px;
            height: 4px;
            border-radius: 2px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸµ éŸ³é¢‘å˜é€Ÿå®éªŒ</h1>
            <p class="subtitle">åŸºäºç›¸ä½å£°ç å™¨çš„æ—¶é—´æ‹‰ä¼¸æŠ€æœ¯</p>
            <p class="institution">Digital Signal Processing Â· Project 2</p>
        </header>

        <nav>
            <a href="#review">çŸ¥è¯†å›é¡¾</a>
            <a href="#overview">å®éªŒæ¦‚è¿°</a>
            <a href="#stage1">ç¬¬ä¸€é˜¶æ®µæ€è€ƒ</a>
            <a href="#stage2">ç¬¬äºŒé˜¶æ®µæ€è€ƒ</a>
            <a href="#stage3">ç¬¬ä¸‰é˜¶æ®µæ€è€ƒ</a>
            <a href="#workflow">éŸ³é¢‘å˜é€Ÿæµç¨‹</a>
            <a href="#experiments">å®éªŒä»»åŠ¡</a>
        </nav>

        <!-- ç«–ç›´è¿›åº¦æ¡ -->
        <div class="vertical-progress">
            <div class="progress-markers">
                <div class="progress-marker active" style="top: 0%;" data-section="overview">
                    <span class="progress-marker-label">æ¦‚è¿°</span>
                </div>
                <div class="progress-marker" style="top: 20%;" data-section="stage1">
                    <span class="progress-marker-label">æ—¶åŸŸæ’å€¼</span>
                </div>
                <div class="progress-marker" style="top: 40%;" data-section="stage2">
                    <span class="progress-marker-label">é¢‘åŸŸæ’å€¼</span>
                </div>
                <div class="progress-marker" style="top: 60%;" data-section="stage3">
                    <span class="progress-marker-label">ç›¸ä½å£°ç å™¨</span>
                </div>
                <div class="progress-marker" style="top: 80%;" data-section="workflow">
                    <span class="progress-marker-label">å®Œæ•´æµç¨‹</span>
                </div>
                <div class="progress-marker" style="top: 100%;" data-section="experiments">
                    <span class="progress-marker-label">å®éªŒä»»åŠ¡</span>
                </div>
            </div>
        </div>

        <div class="content">
            
            <!-- ==================== çŸ¥è¯†å›é¡¾ ==================== -->
            <section id="review">
                <h2>ğŸ“š çŸ¥è¯†å›é¡¾ï¼šå‚…é‡Œå¶å˜æ¢åŸºç¡€</h2>
                
                <p>åœ¨å¼€å§‹éŸ³é¢‘å˜é€Ÿå®éªŒä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆå›é¡¾æ•°å­—ä¿¡å·å¤„ç†ä¸­çš„æ ¸å¿ƒå·¥å…·â€”â€”<strong>å‚…é‡Œå¶å˜æ¢</strong>ã€‚æœ¬å®éªŒå°†å¤§é‡ä½¿ç”¨DFTå’ŒFFTï¼Œç†è§£å®ƒä»¬çš„åŸç†å¯¹æŒæ¡éŸ³é¢‘å˜é€ŸæŠ€æœ¯è‡³å…³é‡è¦ã€‚</p>

                <h3>1. ç¦»æ•£å‚…é‡Œå¶å˜æ¢ (DFT)</h3>
                
                <div class="formula-box">
                    <p><strong>DFT æ­£å˜æ¢ï¼ˆæ—¶åŸŸ â†’ é¢‘åŸŸï¼‰ï¼š</strong></p>
                    <p>$$X[k] = \sum_{n=0}^{N-1} x[n] e^{-j\frac{2\pi}{N}kn}, \quad k=0,1,\ldots,N-1$$</p>
                    
                    <p style="margin-top: 15px;"><strong>DFT åå˜æ¢ï¼ˆé¢‘åŸŸ â†’ æ—¶åŸŸï¼‰ï¼š</strong></p>
                    <p>$$x[n] = \frac{1}{N}\sum_{k=0}^{N-1} X[k] e^{j\frac{2\pi}{N}kn}, \quad n=0,1,\ldots,N-1$$</p>
                </div>

                <div class="info-box">
                    <strong>ğŸ’¡ æ ¸å¿ƒç†è§£ï¼š</strong>
                    <p>DFTå°†<strong>æ—¶åŸŸ</strong>çš„ç¦»æ•£ä¿¡å· $x[n]$ è½¬æ¢ä¸º<strong>é¢‘åŸŸ</strong>çš„é¢‘è°± $X[k]$ã€‚é¢‘è°±åŒ…å«ä¸¤ä¸ªä¿¡æ¯ï¼š</p>
                    <ul style="margin: 8px 0 0 18px;">
                        <li><strong>å¹…åº¦</strong> $|X[k]|$ï¼šè¡¨ç¤ºå„é¢‘ç‡æˆåˆ†çš„å¼ºåº¦</li>
                        <li><strong>ç›¸ä½</strong> $\angle X[k]$ï¼šè¡¨ç¤ºå„é¢‘ç‡æˆåˆ†çš„åˆå§‹ç›¸ä½</li>
                    </ul>
                    <p style="margin-top: 8px;">å¯ä»¥å†™æˆæåæ ‡å½¢å¼ï¼š$X[k] = |X[k]| e^{j\angle X[k]}$</p>
                </div>

                <h3>2. å¿«é€Ÿå‚…é‡Œå¶å˜æ¢ (FFT)</h3>
                
                <p>FFTæ˜¯DFTçš„å¿«é€Ÿç®—æ³•ï¼Œé€šè¿‡åˆ†æ²»ç­–ç•¥å°†è®¡ç®—å¤æ‚åº¦ä» $O(N^2)$ é™ä½åˆ° $O(N\log N)$ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬æ€»æ˜¯ä½¿ç”¨FFTæ¥è®¡ç®—DFTã€‚</p>

                <div class="success-box">
                    <strong>âœ… åœ¨æœ¬å®éªŒä¸­ï¼š</strong>
                    <p>MATLABçš„ <code>fft()</code> å’Œ <code>ifft()</code> å‡½æ•°å°±æ˜¯FFTç®—æ³•çš„å®ç°ï¼Œå®ƒä»¬è®¡ç®—çš„ç»“æœå’ŒDFTå®Œå…¨ç›¸åŒï¼Œåªæ˜¯é€Ÿåº¦æ›´å¿«ã€‚</p>
                </div>

                <h3>3. æ—¶é¢‘å¯¹å¶å…³ç³» âš¡</h3>
                
                <div class="warning-box">
                    <strong>âš ï¸ å…³é”®æ€§è´¨ï¼šæ—¶é—´ä¸é¢‘ç‡æˆåæ¯”</strong>
                    <p>è¿™æ˜¯ç†è§£éŸ³é¢‘å˜é€Ÿçš„<strong>æ ¸å¿ƒ</strong>ï¼</p>
                    <ul style="margin: 8px 0 0 18px;">
                        <li><strong>æ—¶åŸŸæ‹‰ä¼¸</strong>ï¼ˆä¿¡å·å˜é•¿ï¼‰â†’ <strong>é¢‘åŸŸå‹ç¼©</strong>ï¼ˆé¢‘ç‡å˜ä½ï¼‰</li>
                        <li><strong>æ—¶åŸŸå‹ç¼©</strong>ï¼ˆä¿¡å·å˜çŸ­ï¼‰â†’ <strong>é¢‘åŸŸæ‹‰ä¼¸</strong>ï¼ˆé¢‘ç‡å˜é«˜ï¼‰</li>
                    </ul>
                </div>

                <h3>4. çŸ­æ—¶å‚…é‡Œå¶å˜æ¢ (STFT)</h3>
                
                <p>å¯¹äºé•¿éŸ³é¢‘ä¿¡å·ï¼Œæˆ‘ä»¬éœ€è¦åˆ†æå…¶<strong>æ—¶å˜çš„é¢‘è°±</strong>ã€‚STFTçš„æ€æƒ³æ˜¯ï¼š</p>
                
                <div class="two-column">
                    <div class="step-box">
                        <h4>ç¬¬1æ­¥ï¼šåˆ†å¸§</h4>
                        <p>å°†é•¿ä¿¡å·åˆ†æˆè‹¥å¹²çŸ­å¸§ï¼Œæ¯å¸§é•¿åº¦ä¸º $N$ ä¸ªé‡‡æ ·ç‚¹ã€‚</p>
                    </div>
                    <div class="step-box">
                        <h4>ç¬¬2æ­¥ï¼šåŠ çª—</h4>
                        <p>å¯¹æ¯å¸§ä¹˜ä»¥çª—å‡½æ•°ï¼ˆå¦‚æ±‰æ˜çª—ï¼‰ï¼Œå‡å°‘è¾¹ç•Œæ•ˆåº”ã€‚</p>
                    </div>
                    <div class="step-box">
                        <h4>ç¬¬3æ­¥ï¼šFFT</h4>
                        <p>å¯¹æ¯ä¸€å¸§åŠ çª—åçš„ä¿¡å·è¿›è¡ŒFFTï¼Œå¾—åˆ°è¯¥å¸§çš„é¢‘è°±ã€‚</p>
                    </div>
                    <div class="step-box">
                        <h4>ç¬¬4æ­¥ï¼šç»„åˆ</h4>
                        <p>æ‰€æœ‰å¸§çš„é¢‘è°±ç»„æˆ $N \times M$ çš„é¢‘è°±çŸ©é˜µã€‚</p>
                    </div>
                </div>

                <div class="formula-box">
                    <p><strong>STFTçš„æ•°å­¦è¡¨è¾¾ï¼š</strong></p>
                    <p>ç¬¬ $n$ å¸§ï¼Œç¬¬ $k$ ä¸ªé¢‘ç‡åˆ†é‡çš„é¢‘è°±ä¸ºï¼š</p>
                    <p>$$X[n,k] = A[n,k] e^{j\varphi[n,k]}$$</p>
                    <p>å…¶ä¸­ $A[n,k]$ ä¸ºå¹…åº¦ï¼Œ$\varphi[n,k]$ ä¸ºç›¸ä½ï¼Œ$n$ ä¸ºå¸§ç´¢å¼•ï¼Œ$k$ ä¸ºé¢‘ç‡ç´¢å¼•ã€‚</p>
                </div>

                <div class="success-box">
                    <strong>ğŸ¯ ä¸ºä»€ä¹ˆéœ€è¦STFTï¼Ÿ</strong>
                    <p>éŸ³é¢‘ä¿¡å·æ˜¯<strong>éå¹³ç¨³</strong>çš„â€”â€”ä¸åŒæ—¶åˆ»çš„é¢‘ç‡æˆåˆ†ä¸åŒã€‚STFTé€šè¿‡åˆ†å¸§ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿçœ‹åˆ°<strong>æ—¶é—´-é¢‘ç‡</strong>çš„äºŒç»´åˆ†å¸ƒï¼Œè¿™æ˜¯éŸ³é¢‘å˜é€Ÿçš„åŸºç¡€ã€‚</p>
                </div>
            </section>

            <!-- ==================== å®éªŒæ¦‚è¿° ==================== -->
            <section id="overview">
                <h2>ğŸ“‹ å®éªŒæ¦‚è¿°</h2>
                
                <p>éŸ³é¢‘ä¿¡å·çš„<strong>æ—¶é—´å‹ç¼©æˆ–æ‰©å±•</strong>ï¼Œä¹Ÿç§°ä¸º"<span class="highlight">æ—¶é—´æ‹‰ä¼¸ï¼ˆTime Stretchingï¼‰</span>"ï¼Œæ˜¯éŸ³é«˜è½¬æ¢çš„å€’æ•°è¿‡ç¨‹ã€‚å®ƒåœ¨æ”¹å˜é€Ÿåº¦ï¼ˆèŠ‚å¥ï¼‰çš„åŒæ—¶<strong>ä¿æŒä¿¡å·éŸ³é«˜ä¸å˜</strong>ã€‚</p>

                <div class="info-box">
                    <strong>ğŸ’¡ æ ¸å¿ƒæŒ‘æˆ˜ï¼š</strong>
                    <p>å¦‚ä½•æ”¹å˜éŸ³é¢‘çš„æ’­æ”¾é€Ÿåº¦ï¼ŒåŒæ—¶ä¿æŒéŸ³é«˜ä¸å˜ï¼Ÿ</p>
                    <p style="margin-top: 8px;">ä¸¾ä¾‹ï¼šå°†ä¸€æ®µ2åˆ†é’Ÿçš„è¯­éŸ³æ‹‰ä¼¸ä¸º4åˆ†é’Ÿï¼Œè¯´è¯é€Ÿåº¦å˜æ…¢ä¸€åŠï¼Œä½†<strong>éŸ³è°ƒä¸å˜</strong>ï¼ˆä¸èƒ½å˜æˆ"ä½æ²‰çš„å£°éŸ³"ï¼‰ã€‚</p>
                </div>

                <h3>ä¸‰é˜¶æ®µé€’è¿›å­¦ä¹ </h3>
                
                <p>æœ¬å®éªŒé‡‡ç”¨<strong>ä¸‰é˜¶æ®µé€’è¿›å¼å­¦ä¹ </strong>ï¼Œé€æ­¥æ­ç¤ºéŸ³é¢‘å˜é€Ÿçš„æ­£ç¡®æ–¹æ³•ï¼š</p>

                <div class="two-column">
                    <div class="step-box">
                        <h4 style="color: #e74c3c;">ğŸ”´ ç¬¬ä¸€é˜¶æ®µï¼šæ—¶åŸŸæ’å€¼</h4>
                        <p>ç›´è§‚ä½†<strong>é”™è¯¯</strong>çš„æ–¹æ³•â€”â€”æ—¶åŸŸæ‹‰ä¼¸ä¼šå¯¼è‡´é¢‘ç‡æ”¹å˜</p>
                    </div>
                    <div class="step-box">
                        <h4 style="color: #48bb78;">ğŸŸ¢ ç¬¬äºŒé˜¶æ®µï¼šé¢‘åŸŸæ’å€¼</h4>
                        <p><strong>æ­£ç¡®</strong>çš„æ–¹æ³•â€”â€”åœ¨é¢‘åŸŸè¿›è¡Œå˜é€Ÿå¯ä¿æŒéŸ³é«˜</p>
                    </div>
                </div>
                <div class="step-box" style="border-color: #ed8936; margin-top: 15px;">
                    <h4 style="color: #ed8936;">ğŸŸ  ç¬¬ä¸‰é˜¶æ®µï¼šç›¸ä½å£°ç å™¨</h4>
                    <p><strong>è¿›é˜¶</strong>æ–¹æ³•â€”â€”æ¶ˆé™¤å¸§é—´ä¸è¿ç»­æ€§ï¼Œè·å¾—æ›´é«˜éŸ³è´¨</p>
                </div>
            </section>

            <!-- ==================== ç¬¬ä¸€é˜¶æ®µæ€è€ƒ ==================== -->
            <section id="stage1">
                <h2>ğŸ”´ ç¬¬ä¸€é˜¶æ®µæ€è€ƒï¼šæ—¶åŸŸæ’å€¼</h2>

                <p>æœ€ç›´è§‚çš„æƒ³æ³•æ˜¯ï¼š<strong>ç›´æ¥åœ¨æ—¶åŸŸå¯¹ä¿¡å·è¿›è¡Œæ’å€¼</strong>æ¥æ”¹å˜ä¿¡å·é•¿åº¦ã€‚æ¯”å¦‚ï¼Œè¦æŠŠéŸ³é¢‘æ‹‰ä¼¸2å€ï¼Œå°±åœ¨æ¯ä¸¤ä¸ªé‡‡æ ·ç‚¹ä¹‹é—´æ’å…¥ä¸€ä¸ªæ–°çš„ç‚¹ã€‚</p>

                <div class="analysis-box">
                    <h4>ğŸ’­ ç›´è§‰æƒ³æ³•</h4>
                    <p>å°†100ç‚¹çš„ä¿¡å·æ’å€¼æˆ200ç‚¹çš„ä¿¡å·ï¼Œæ’­æ”¾æ—¶é—´å˜ä¸ºåŸæ¥çš„2å€ï¼ŒéŸ³é¢‘å°±"å˜æ…¢"äº†ã€‚</p>
                </div>

                <h3>æ—¶åŸŸæ’å€¼çš„é—®é¢˜</h3>
                
                <p>ä»æ—¶é—´è½´ä¸Šçœ‹ï¼Œä¿¡å·è¢«æ‹‰é•¿äº†2å€ï¼ŒåŸå§‹éŸ³é¢‘çº¦5ç§’ï¼Œæ‹‰ä¼¸åæ¥è¿‘10ç§’ï¼Œä¸”æ³¢å½¢ç›¸ä¼¼ã€‚ä½†æ˜¯è†å¬æ‹‰ä¼¸åçš„éŸ³é¢‘ä¼šå‘ç°åœ¨<strong>éŸ³é«˜ï¼ˆé¢‘ç‡ï¼‰ä¸Šå˜ä½äº†</strong>ï¼Œè€Œè¿™æ˜¯æˆ‘ä»¬ä¸å¸Œæœ›å‘ç”Ÿçš„ã€‚</p>

                <!-- é™æ€å¯¹æ¯”å›¾ -->
                <div class="figure">
                    <canvas id="discontinuityCanvas" width="950" height="420"></canvas>
                    <div class="legend">
                        <div class="legend-item"><div class="legend-color" style="background: #2b5797;"></div>åŸå§‹ä¿¡å·</div>
                        <div class="legend-item"><div class="legend-color" style="background: #27ae60;"></div>æ‹‰ä¼¸åä¿¡å·</div>
                        <div class="legend-item"><div class="legend-color" style="background: #e74c3c;"></div>å…³é”®è§‚å¯Ÿï¼šå‘¨æœŸå˜é•¿ = é¢‘ç‡é™ä½</div>
                    </div>
                    <p class="figure-caption">å›¾1ï¼šæ—¶åŸŸæ’å€¼å¯¹æ¯”â€”â€”æ‹‰ä¼¸å¯¼è‡´å‘¨æœŸåŠ å€ï¼Œé¢‘ç‡å‡åŠ</p>
                </div>

                <p>è®¾æœ‰åŸå§‹æ­£å¼¦ä¿¡å· $\sin(\omega t)$ï¼Œæ—¶é•¿ä¸º $L$ã€‚ç»è¿‡æ’å€¼åï¼Œæ—¶é—´ä¸Šå…·æœ‰ $2L$ ä¸ªç‚¹ï¼Œä½†ä»é¢‘ç‡æ¥çœ‹ä¸ºåŸæ¥çš„ $1/2$ã€‚</p>

                <div class="warning-box">
                    <strong>âš ï¸ æ—¶é¢‘å¯¹å¶æ³•åˆ™</strong>
                    <p>$$\text{æ—¶é—´é•¿åº¦} \times \text{é¢‘ç‡} = \text{å¸¸æ•°}$$</p>
                    <p>æ‹‰ä¼¸2å€ â†’ æ—¶é—´Ã—2 â†’ é¢‘ç‡Ã·2 â†’ <span style="color: #f56565;">éŸ³é«˜é™ä½ï¼âŒ</span></p>
                </div>

                <!-- é¢‘è°±å¯¹æ¯” -->
                <div class="figure">
                    <canvas id="spectrumCanvas" width="950" height="380"></canvas>
                    <div class="legend">
                        <div class="legend-item"><div class="legend-color" style="background: #2b5797;"></div>åŸå§‹é¢‘è°±</div>
                        <div class="legend-item"><div class="legend-color" style="background: #27ae60;"></div>æ‹‰ä¼¸åé¢‘è°±ï¼ˆå³°å€¼å·¦ç§»ï¼‰</div>
                        <div class="legend-item"><div class="legend-color" style="background: #e74c3c;"></div>å‹ç¼©åé¢‘è°±ï¼ˆå³°å€¼å³ç§»ï¼‰</div>
                    </div>
                    <p class="figure-caption">å›¾2ï¼šé¢‘è°±å¯¹æ¯”â€”â€”ç®€å•æ—¶åŸŸæ’å€¼/æŠ½å–æ”¹å˜äº†ä¸»é¢‘ç‡ä½ç½®</p>
                </div>

                <div class="info-box">
                    <strong>ğŸ“Œ ç»“è®º</strong>
                    <p>ç”±äº<strong>æ—¶é—´å’Œé¢‘ç‡æˆåæ¯”</strong>çš„å…³ç³»ï¼Œæˆ‘ä»¬<strong>æ— æ³•é€šè¿‡ç›´æ¥æ”¹å˜éŸ³é¢‘æ—¶é•¿</strong>è€Œå¾—åˆ°ç†æƒ³ç»“æœã€‚å¿…é¡»é‡‡ç”¨æ›´é«˜çº§çš„ä¿¡å·å¤„ç†æŠ€æœ¯ï¼</p>
                </div>
            </section>

            <!-- ==================== ç¬¬äºŒé˜¶æ®µæ€è€ƒ ==================== -->
            <section id="stage2">
                <h2>ğŸŸ¢ ç¬¬äºŒé˜¶æ®µæ€è€ƒï¼šé¢‘åŸŸæ’å€¼</h2>

                <p>æ—¢ç„¶æ—¶åŸŸæ’å€¼ä¼šæ”¹å˜é¢‘ç‡ï¼Œé‚£æˆ‘ä»¬å¯ä»¥æ¢ä¸€ä¸ªæ€è·¯ï¼š<strong>å…ˆå˜æ¢åˆ°é¢‘åŸŸï¼Œåœ¨é¢‘åŸŸä¸Šè¿›è¡Œæ“ä½œï¼Œå†å˜æ¢å›æ—¶åŸŸ</strong>ã€‚</p>

                <h3>é¢‘åŸŸæ’å€¼çš„æ€è·¯</h3>
                
                <div class="success-box">
                    <strong>âœ… æ­£ç¡®æ–¹æ³•ï¼šé¢‘åŸŸæ’å€¼</strong>
                    <ol style="margin: 8px 0 0 18px;">
                        <li>å°†æ—¶åŸŸä¿¡å·<strong>åˆ†å¸§</strong>ï¼Œå¯¹æ¯å¸§è¿›è¡Œ<strong>FFT</strong>å¾—åˆ°é¢‘è°±</li>
                        <li>åœ¨é¢‘åŸŸä¸Šå¯¹é¢‘è°±è¿›è¡Œ<strong>æ’å€¼æˆ–æŠ½å–</strong></li>
                        <li>å¯¹ä¿®æ”¹åçš„é¢‘è°±è¿›è¡Œ<strong>IFFT</strong></li>
                        <li>å¾—åˆ°æ‹‰ä¼¸åçš„æ—¶åŸŸä¿¡å·ï¼Œ<strong>é¢‘ç‡æˆåˆ†ä¿æŒä¸å˜</strong> âœ“</li>
                    </ol>
                </div>

                <!-- é¢‘åŸŸæ’å€¼å¯¹æ¯”å›¾ -->
                <div class="figure">
                    <canvas id="freqInterpolationCanvas" width="950" height="520"></canvas>
                    <p class="figure-caption">å›¾3ï¼šæ—¶åŸŸæ’å€¼ vs é¢‘åŸŸæ’å€¼â€”â€”é¢‘åŸŸæ–¹æ³•ä¿æŒäº†åŸå§‹é¢‘ç‡æˆåˆ†</p>
                </div>

                <div class="analysis-box">
                    <h4>ğŸ’¡ ä¸ºä»€ä¹ˆé¢‘åŸŸæ’å€¼æœ‰æ•ˆï¼Ÿ</h4>
                    <p>åœ¨é¢‘åŸŸè¿›è¡Œ2å€æŠ½å–ï¼ˆæ¯éš”ä¸€ä¸ªç‚¹å–ä¸€ä¸ªï¼‰ï¼Œå¾—åˆ°çš„IFFTç»“æœé•¿åº¦å˜ä¸ºåŸæ¥çš„ä¸€åŠï¼Œä½†é¢‘ç‡æˆåˆ†ä¸å˜ã€‚è¦å¾—åˆ°2å€é•¿çš„ä¿¡å·ï¼Œå¯ä»¥é€šè¿‡é¢‘åŸŸ2å€æ’å€¼ï¼ˆåœ¨é¢‘ç‚¹ä¹‹é—´æ’å…¥é›¶å€¼åè¿›è¡Œé€‚å½“å¤„ç†ï¼‰ã€‚</p>
                </div>

                <h3>é¢‘åŸŸæ’å€¼çš„å±€é™</h3>
                
                <p>è™½ç„¶é¢‘åŸŸæ’å€¼èƒ½å¤Ÿä¿æŒéŸ³é«˜ï¼Œä½†å®ƒä¹Ÿæœ‰ä¸€ä¸ªé—®é¢˜ï¼š<strong>ç›¸é‚»å¸§ä¹‹é—´å¯èƒ½äº§ç”Ÿä¸è¿ç»­</strong>ã€‚</p>
                
                <div class="warning-box">
                    <strong>âš ï¸ å¸§é—´ä¸è¿ç»­é—®é¢˜</strong>
                    <p>ç”±äºæ¯å¸§ç‹¬ç«‹å¤„ç†FFT/IFFTï¼Œç›¸é‚»å¸§åœ¨è¾¹ç•Œå¤„çš„ç›¸ä½å¯èƒ½ä¸åŒ¹é…ï¼Œå¯¼è‡´æ‚éŸ³ã€‚</p>
                </div>
            </section>

            <!-- ==================== ç¬¬ä¸‰é˜¶æ®µæ€è€ƒ ==================== -->
            <section id="stage3">
                <h2>ğŸŸ  ç¬¬ä¸‰é˜¶æ®µæ€è€ƒï¼šç›¸ä½å£°ç å™¨</h2>

                <div class="info-box">
                    <strong>ğŸ“š å†å²èƒŒæ™¯ï¼š</strong>
                    <p>ç›¸ä½å£°ç å™¨ï¼ˆPhase Vocoderï¼Œç®€ç§°PVï¼‰çš„æ¦‚å¿µç”± <strong>Flanagan å’Œ Golden</strong> äº <strong>1966å¹´</strong> æå‡ºï¼Œæ˜¯éŸ³é¢‘ä¿¡å·å¤„ç†é¢†åŸŸçš„é‡è¦é‡Œç¨‹ç¢‘ã€‚</p>
                </div>

                <h3>PVæ ¸å¿ƒæ€æƒ³</h3>
                
                <p>ç›¸ä½å£°ç å™¨çš„è§£å†³æ–¹æ³•å°±æ˜¯é€šè¿‡<strong>è°ƒæ•´ç›¸ä½</strong>ä½¿å¾—å¸§å’Œå¸§ä¹‹é—´çš„é¢‘ç‡å€¼æ— ç¼è¡”æ¥ã€‚è®©æˆ‘ä»¬æ·±å…¥ç†è§£è¿™ä¸ªè¿‡ç¨‹ï¼š</p>

                <!-- ç›¸ä½å£°ç å™¨åŸç†åŠ¨ç”» -->
                <div class="figure">
                    <canvas id="phaseVocoderCanvas" width="950" height="560"></canvas>
                    <div class="legend">
                        <div class="legend-item"><div class="legend-color" style="background: #999;"></div>åŸå§‹ä¿¡å·ï¼ˆé¢‘ç‡Î©ï¼‰</div>
                        <div class="legend-item"><div class="legend-color" style="background: #c0392b;"></div>ç¬¬må¸§ç›¸ä½ Ï†â‚</div>
                        <div class="legend-item"><div class="legend-color" style="background: #27ae60;"></div>ç¬¬m+1å¸§ç›¸ä½ Ï†â‚‚</div>
                        <div class="legend-item"><div class="legend-color" style="background: #3498db;"></div>ç›¸ä½è¯¯å·® Ï†Err</div>
                    </div>
                    <p class="figure-caption">å›¾4ï¼šç›¸ä½å£°ç å™¨çš„ç›¸ä½å…³ç³»åˆ†æâ€”â€”å±•ç¤ºå¦‚ä½•ä»ç›¸é‚»å¸§ç›¸ä½è®¡ç®—å®é™…é¢‘ç‡</p>
                </div>

                <div class="analysis-box">
                    <h4>ğŸ“ ç›¸ä½å…³ç³»è¯¦è§£</h4>
                    <p><strong>ä¸ŠåŠéƒ¨åˆ†ï¼š</strong>ç°è‰²æ­£å¼¦æ›²çº¿è¡¨ç¤ºåŸå§‹éŸ³é¢‘ä¿¡å·çš„ç¬¬ $k$ ä¸ªé¢‘ç‡åˆ†é‡ $\Omega$ã€‚$t_1$ å’Œ $t_2$ æ—¶åˆ»åˆ†åˆ«æ˜¯ä¸¤å¸§ä¿¡å·çš„èµ·å§‹ç‚¹ã€‚</p>
                    <p style="margin-top: 8px;"><strong>æ—¶é—´é—´éš”ï¼š</strong>ä¸¤å¸§ä¹‹é—´çš„æ—¶å·®æ˜¯ $\Delta t = R_a / F_s$ï¼Œå…¶ä¸­ $R_a$ æ˜¯å¸§ç§»ï¼ˆé‡‡æ ·ç‚¹æ•°ï¼‰ï¼Œ$F_s$ æ˜¯é‡‡æ ·é¢‘ç‡ã€‚</p>
                    <p style="margin-top: 8px;"><strong>ä¸‹åŠéƒ¨åˆ†ï¼ˆå•ä½åœ†ï¼‰ï¼š</strong>ç”¨æåæ ‡ç›´è§‚å±•ç¤ºç›¸ä½è§’ã€‚ç†è®ºä¸Š $\varphi_2 = \varphi_1 + \Omega\Delta t$ï¼Œä½†ç”±äºFFTé¢‘ç‡åˆ†è¾¨ç‡æœ‰é™ï¼Œå­˜åœ¨è¯¯å·® $\varphi_{Err}$ã€‚</p>
                </div>

                <h3>æ•°å­¦æ¨å¯¼</h3>
                
                <div class="formula-box">
                    <p><strong>æ­¥éª¤1ï¼šç†è®ºç›¸ä½é€’è¿›å…³ç³»</strong></p>
                    <p>$$\varphi_2 = \varphi_1 + \Omega\Delta t$$</p>
                    <p style="font-size: 0.9em; color: #666;">å¦‚æœä¿¡å·æ˜¯çº¯æ­£å¼¦æ³¢ä¸”é¢‘ç‡æ°å¥½è½åœ¨FFTé¢‘ç‚¹ä¸Šï¼Œè¿™ä¸ªå…³ç³»ç²¾ç¡®æˆç«‹ã€‚</p>
                    
                    <p style="margin-top: 15px;"><strong>æ­¥éª¤2ï¼šå®é™…ç›¸ä½å…³ç³»ï¼ˆè€ƒè™‘FFTè¯¯å·®ï¼‰</strong></p>
                    <p>$$\varphi_2 = \varphi_1 + \Omega\Delta t + \varphi_{\text{Err}}$$</p>
                    <p style="font-size: 0.9em; color: #666;">ç”±äºå®é™…é¢‘ç‡å¯èƒ½åç¦»FFTé¢‘ç‚¹ï¼Œäº§ç”Ÿç›¸ä½è¯¯å·®ã€‚</p>
                    
                    <p style="margin-top: 15px;"><strong>æ­¥éª¤3ï¼šä»ç›¸ä½è¯¯å·®åæ¨é¢‘ç‡åç§»</strong></p>
                    <p>$$\Delta\omega = \frac{\varphi_{\text{Err}}}{R_a}$$</p>
                    <p style="font-size: 0.9em; color: #666;">ç›¸ä½è¯¯å·®é™¤ä»¥å¸§ç§»æ—¶é—´ï¼Œå¾—åˆ°é¢‘ç‡ä¿®æ­£é‡ã€‚</p>
                    
                    <p style="margin-top: 15px;"><strong>æ­¥éª¤4ï¼šè®¡ç®—å®é™…è§’é¢‘ç‡</strong></p>
                    <p>$$\omega = \Omega + \Delta\omega$$</p>
                    <p style="font-size: 0.9em; color: #666;">FFTé¢‘ç‚¹é¢‘ç‡åŠ ä¸Šä¿®æ­£é‡ï¼Œå¾—åˆ°æ›´ç²¾ç¡®çš„ç¬æ—¶é¢‘ç‡ã€‚</p>
                    
                    <p style="margin-top: 15px;"><strong>æ­¥éª¤5ï¼šè¾“å‡ºç›¸ä½æ›´æ–°</strong></p>
                    <p>$$\varphi_{\text{out}} = \varphi_{\text{out}} + \omega \cdot R_s$$</p>
                    <p style="font-size: 0.9em; color: #666;">ç”¨å®é™…é¢‘ç‡å’Œ<strong>æ–°çš„å¸§ç§»</strong> $R_s$ è®¡ç®—è¾“å‡ºç›¸ä½ï¼Œå®ç°å¹³æ»‘è¿‡æ¸¡ã€‚</p>
                </div>

                <div class="tip-box">
                    <strong>ğŸ’¡ æ³¨æ„ï¼š</strong>
                    <p>ç”±äºæˆ‘ä»¬éœ€è¦ç”¨ç¬¬1ã€2å¸§çš„è¯¯å·®æ¥é¢„æµ‹ç¬¬0å¸§ï¼Œä»¥æ­¤ç±»æ¨ï¼Œæ‰€ä»¥åœ¨å®éªŒä¸­ï¼Œæˆ‘ä»¬çš„è®¡ç®—ç»“æœæ¯”åŸå§‹æ•°æ®å°‘ä¸¤åˆ—ã€‚</p>
                </div>

                <h3>é¢‘åŸŸæ’å€¼æ³• vs ç›¸ä½å£°ç å™¨</h3>
                
                <table>
                    <thead>
                        <tr>
                            <th>å¯¹æ¯”é¡¹</th>
                            <th>é¢‘åŸŸæ’å€¼æ³•</th>
                            <th>ç›¸ä½å£°ç å™¨</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>ä¿®æ”¹å¯¹è±¡</strong></td>
                            <td>é¢‘è°±å¹…åº¦å’Œç›¸ä½</td>
                            <td>åªä¿®æ”¹ç›¸ä½ï¼Œä¿ç•™å¹…åº¦</td>
                        </tr>
                        <tr>
                            <td><strong>å®ç°å¤æ‚åº¦</strong></td>
                            <td>ç®€å•ï¼ˆä½¿ç”¨interp1ï¼‰</td>
                            <td>å¤æ‚ï¼ˆéœ€è¦ç›¸ä½å±•å¼€ï¼‰</td>
                        </tr>
                        <tr>
                            <td><strong>éŸ³è´¨</strong></td>
                            <td>è¾ƒå¥½</td>
                            <td>æ›´å¥½ï¼ˆæ— å¸§é—´æ‚éŸ³ï¼‰</td>
                        </tr>
                        <tr>
                            <td><strong>é€‚ç”¨åœºæ™¯</strong></td>
                            <td>åŸºç¡€ä»»åŠ¡</td>
                            <td>è¿›é˜¶ä»»åŠ¡ï¼Œè¿½æ±‚é«˜è´¨é‡</td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <!-- ==================== å®Œæ•´æµç¨‹ ==================== -->
            <section id="workflow">
                <h2>âš™ï¸ éŸ³é¢‘å˜é€Ÿå®Œæ•´æµç¨‹</h2>

                <p>ä¾æ®ä¸Šè¿°éŸ³é¢‘å˜é€ŸåŸç†æ­å»ºçš„éŸ³é¢‘å˜é€Ÿå™¨ç¤ºæ„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š</p>

                <!-- å®Œæ•´æµç¨‹åŠ¨ç”» - é‡æ–°è®¾è®¡ -->
                <div class="figure">
                    <canvas id="workflowCanvas" width="950" height="550"></canvas>
                    <p class="figure-caption">å›¾5ï¼šéŸ³é¢‘å˜é€Ÿå®Œæ•´å¤„ç†æµç¨‹</p>
                </div>

                <!-- åŠ¨æ€æµç¨‹å›¾ -->
                <div class="animated-flowchart">
                    <h4 style="text-align: center; margin-bottom: 20px; color: #5a67d8;">ğŸ”„ å¤„ç†æµç¨‹åŠ¨æ€å±•ç¤º</h4>
                    <div class="flow-container">
                        <div class="flow-step">
                            <div class="flow-icon">ä¿¡å·</div>
                            <div class="flow-content">
                                <h4>åŸå§‹éŸ³é¢‘ä¿¡å·</h4>
                                <p>è¾“å…¥å¾…å¤„ç†çš„éŸ³é¢‘ä¿¡å· x[n]</p>
                            </div>
                            <div class="flow-connector"></div>
                        </div>
                        <div class="flow-step">
                            <div class="flow-icon">åˆ†å¸§</div>
                            <div class="flow-content">
                                <h4>åˆ†å¸§å¤„ç†</h4>
                                <p>å°†ä¿¡å·åˆ†æˆé‡å çš„çŸ­å¸§ï¼Œå®šä¹‰å¸§é•¿å’Œå¸§ç§»</p>
                            </div>
                            <div class="flow-connector"></div>
                        </div>
                        <div class="flow-step">
                            <div class="flow-icon">åŠ çª—</div>
                            <div class="flow-content">
                                <h4>åŠ çª—å¤„ç†</h4>
                                <p>å¯¹æ¯å¸§ä¹˜ä»¥æ±‰æ˜çª—ï¼Œå‡å°‘é¢‘è°±æ³„æ¼</p>
                            </div>
                            <div class="flow-connector"></div>
                        </div>
                        <div class="flow-step">
                            <div class="flow-icon">FFT</div>
                            <div class="flow-content">
                                <h4>é¢‘è°±åˆ†æ</h4>
                                <p>å¯¹æ¯å¸§ä¿¡å·è¿›è¡ŒFFTï¼Œå¾—åˆ°é¢‘è°±çŸ©é˜µ</p>
                            </div>
                            <div class="flow-connector"></div>
                        </div>
                        <div class="flow-step">
                            <div class="flow-icon" style="background: linear-gradient(135deg, #48bb78, #38a169);">ä¿®æ”¹</div>
                            <div class="flow-content" style="border-color: #48bb78;">
                                <h4 style="color: #2f855a;">æ”¹å˜é¢‘è°±</h4>
                                <p>ä½¿ç”¨é¢‘åŸŸæ’å€¼æ³•æˆ–ç›¸ä½å£°ç å™¨ä¿®æ”¹é¢‘è°±</p>
                            </div>
                            <div class="flow-connector"></div>
                        </div>
                        <div class="flow-step">
                            <div class="flow-icon">IFFT</div>
                            <div class="flow-content">
                                <h4>åå˜æ¢</h4>
                                <p>å¯¹ä¿®æ”¹åçš„é¢‘è°±è¿›è¡ŒIFFTï¼Œå¾—åˆ°æ—¶åŸŸå¸§</p>
                            </div>
                            <div class="flow-connector"></div>
                        </div>
                        <div class="flow-step">
                            <div class="flow-icon">é‡å»º</div>
                            <div class="flow-content">
                                <h4>é‡å ç›¸åŠ </h4>
                                <p>å¯¹æ—¶åŸŸå¸§åŠ çª—åæŒ‰æ–°å¸§ç§»å åŠ é‡å»º</p>
                            </div>
                        </div>
                    </div>
                </div>

                <h3>è¯¦ç»†æ­¥éª¤è§£æ</h3>

                <h4>1. åˆ†å¸§ (Frame)</h4>
                
                <p>åˆ†å¸§çš„æ¦‚å¿µå’Œä¸Šä¸€æ¬¡å®éªŒä¸­åˆ†å‰²ä¿¡å·çš„ç›®çš„ç›¸åŒï¼Œéƒ½æ˜¯ä¸ºäº†è·å–æ›´å¥½çš„ç»“æœã€‚ä½†å’Œä¸Šæ¬¡å®éªŒçš„åŒºåˆ«æ˜¯ï¼Œæœ¬æ¬¡åˆ†å¸§æ¶‰åŠåˆ°<strong>é‡å ï¼ˆOverlapï¼‰</strong>ã€‚</p>

                <div class="info-box">
                    <strong>ğŸ“Œ é‡å åˆ†å¸§ç¤ºä¾‹ï¼š</strong>
                    <p>100ç‚¹åºåˆ—ä»¥20ç‚¹å¸§é•¿è¿›è¡Œåˆ†æ®µï¼š</p>
                    <ul style="margin: 6px 0 0 18px;">
                        <li><strong>æ— é‡å ï¼š</strong>ç¬¬1æ®µ: 1-20ï¼Œç¬¬2æ®µ: 21-40ï¼Œç¬¬3æ®µ: 41-60...</li>
                        <li><strong>æœ‰é‡å ï¼š</strong>ç¬¬1æ®µ: 1-20ï¼Œç¬¬2æ®µ: 5-24 æˆ– 10-29...</li>
                    </ul>
                    <p style="margin-top: 6px;"><strong>å¸§ç§»ï¼ˆHop Sizeï¼‰</strong> $R_a$ï¼šä¸¤å¸§ä¿¡å·ä¹‹é—´çš„è·ç¦»ï¼Œé€šå¸¸åœ¨å¸§é•¿çš„ 25%~75%</p>
                </div>

                <!-- åˆ†å¸§ç¤ºæ„åŠ¨ç”» -->
                <div class="figure">
                    <canvas id="framingCanvas" width="950" height="400"></canvas>
                    <div class="legend">
                        <div class="legend-item"><div class="legend-color" style="background: rgba(102, 126, 234, 0.3);"></div>å¸§é‡å åŒºåŸŸ</div>
                        <div class="legend-item"><div class="legend-color" style="background: #27ae60;"></div>æ‹‰ä¼¸ï¼ˆå¸§ç§»å¢å¤§ï¼‰</div>
                        <div class="legend-item"><div class="legend-color" style="background: #e74c3c;"></div>å‹ç¼©ï¼ˆå¸§ç§»å‡å°ï¼‰</div>
                    </div>
                    <p class="figure-caption">å›¾6ï¼šä¸åŒå¸§ç§»å¯¹ä¿¡å·é•¿åº¦çš„å½±å“ï¼ˆå±•ç¤ºé‡å åˆ†å¸§åŸç†ï¼‰</p>
                </div>

                <div class="warning-box">
                    <strong>âš ï¸ æ³¨æ„ï¼š</strong>
                    <p>è¿™ç§ä»…é€šè¿‡æ”¹å˜å¸§ç§»æ¥å®ç°å˜é€Ÿçš„æ–¹æ³•ï¼Œå’Œæˆ‘ä»¬ç¬¬ä¸€é˜¶æ®µçš„æ€è€ƒæ˜¯ç±»ä¼¼çš„ï¼Œéƒ½å¯èƒ½å¯¼è‡´é¢‘ç‡æˆåˆ†çš„é‡å ã€å¤±çœŸæˆ–ä¸è¿ç»­æ€§ã€‚å› æ­¤éœ€è¦é…åˆ<strong>é¢‘åŸŸæ’å€¼æˆ–ç›¸ä½å£°ç å™¨</strong>ä½¿ç”¨ã€‚</p>
                </div>

                <h4>2. åŠ çª— (Windowing)</h4>
                
                <p>åˆ†å¸§ä»¥åï¼Œæˆ‘ä»¬è¿˜éœ€è¦å¯¹æ¯ä¸€å¸§ä¿¡å·ä½œ<strong>åŠ çª—å¤„ç†</strong>ã€‚çª—å‡½æ•°çš„ä½œç”¨æ˜¯å‰Šå¼±å¸§çš„ä¸¤ç«¯ï¼Œä½¿å¾—åœ¨åˆ†æå¤„ç†æ—¶å¾—åˆ°çš„é¢‘è°±å›¾æ›´åŠ å‡†ç¡®ã€‚</p>

                <!-- åŠ çª—ç¤ºæ„ -->
                <div class="figure">
                    <canvas id="windowingCanvas" width="950" height="280"></canvas>
                    <p class="figure-caption">å›¾7ï¼šæ—¶åŸŸä¿¡å· Ã— æ±‰æ˜çª— = åŠ çª—åä¿¡å·ï¼ˆæ±‰æ˜çª—å…¬å¼ï¼š$w[n] = 0.54 - 0.46\cos(2\pi n/N)$ï¼‰</p>
                </div>

                <div class="info-box">
                    <strong>ğŸ’¡ ä¸ºä»€ä¹ˆéœ€è¦åŠ çª—ï¼Ÿ</strong>
                    <p>é€šè¿‡åŠ çª—ï¼Œä¹‹å‰å¸§çš„é¢‘ç‡åˆ†é‡ä¸å½“å‰å¸§çš„èåˆç”±äºå°¾ç«¯å‰Šå¼±è€Œæ›´åŠ å¹³æ»‘ï¼Œå‡å°‘äº†<strong>é¢‘è°±æ³„æ¼</strong>å’Œä¸è¿ç»­æ€§ã€‚</p>
                </div>

                <!-- å¸§èåˆç¤ºæ„ -->
                <div class="figure">
                    <canvas id="fusionCanvas" width="950" height="280"></canvas>
                    <div class="legend">
                        <div class="legend-item"><div class="legend-color" style="background: #c0392b;"></div>å‰ä¸€å¸§ï¼ˆè¡°å‡ï¼‰</div>
                        <div class="legend-item"><div class="legend-color" style="background: #2980b9;"></div>å½“å‰å¸§ï¼ˆæ¸å…¥ï¼‰</div>
                        <div class="legend-item"><div class="legend-color" style="background: #27ae60;"></div>å åŠ ç»“æœ</div>
                    </div>
                    <p class="figure-caption">å›¾8ï¼šé‡å ç›¸åŠ ï¼ˆOLAï¼‰ç¤ºæ„ - åŠ çª—ä½¿ç›¸é‚»å¸§å¹³æ»‘èåˆ</p>
                </div>

                <h4>3. FFT é¢‘è°±åˆ†æ</h4>
                
                <div class="formula-box">
                    <p><strong>çŸ­æ—¶é¢‘è°±è¡¨ç¤ºï¼š</strong></p>
                    <p>$$x[n] = \sum_{k_r=1}^{I[n]} A[n,k_r]e^{j\varphi_a[n,k_r]}, \quad n \geq 0$$</p>
                    <p>å¼ä¸­ $A[n,k]$ ä¸ºç¬¬ $n$ å¸§ç¬¬ $k$ é¢‘ç‡çš„å¹…åº¦ï¼Œ$\varphi_a[n,k]$ ä¸ºç›¸ä½ã€‚</p>
                </div>

                <h4>4. æ”¹å˜é¢‘è°±</h4>
                
                <div class="two-column">
                    <div class="step-box">
                        <h4 style="color: #48bb78;">æ–¹æ³•1: é¢‘åŸŸæ’å€¼æ³•</h4>
                        <p>é€šè¿‡ MATLAB çš„ <code>interp1</code> å‡½æ•°å¯¹é¢‘ç‡è¿›è¡Œæ’å€¼ã€‚</p>
                        <p style="color: #48bb78;"><strong>âœ“ ç®€å•æ˜“å®ç°</strong></p>
                    </div>
                    <div class="step-box">
                        <h4 style="color: #ed8936;">æ–¹æ³•2: ç›¸ä½å£°ç å™¨</h4>
                        <p>ä¿ç•™é¢‘è°±<strong>å¹…åº¦ä¸å˜</strong>ï¼Œåªæ”¹å˜<strong>ç›¸ä½</strong>ã€‚</p>
                        <p style="color: #ed8936;"><strong>âœ“ éŸ³è´¨æ›´å¥½</strong></p>
                    </div>
                </div>

                <h4>5. åå˜æ¢ (IFFT)</h4>
                
                <p>ä¿®æ”¹åçš„é¢‘è°±éœ€è¦ç»è¿‡ <strong>IFFT</strong> é‡æ–°å¾—åˆ°æ—¶é—´ä¿¡å·ã€‚</p>

                <h4>6. é‡å»º (OLA - Overlap-Add)</h4>
                
                <p>é‡å»ºçš„è¿‡ç¨‹æ˜¯ç»è¿‡åå˜æ¢çš„æ—¶é—´ä¿¡å·å†æ¬¡è¿›è¡Œ<strong>åŠ çª—</strong>åä¾åº<strong>å åŠ </strong>ã€‚</p>
                
                <div class="info-box">
                    <strong>ğŸ“Œ å¸§ç§»é€‰æ‹©ï¼š</strong>
                    <ul style="margin: 6px 0 0 18px;">
                        <li>é¢‘åŸŸæ’å€¼æ³•ï¼šä½¿ç”¨<strong>åŸå§‹å¸§ç§»</strong> $R_a$</li>
                        <li>ç›¸ä½å£°ç å™¨ï¼šä½¿ç”¨<strong>å˜é€Ÿåçš„å¸§ç§»</strong> $R_s$</li>
                    </ul>
                </div>
            </section>

            <!-- ==================== å®éªŒä»»åŠ¡ (ç®€åŒ–ç‰ˆ) ==================== -->
            <section id="experiments">
                <h2>ğŸ§ª å®éªŒä»»åŠ¡</h2>

                <p>æœ¬é¡¹ç›®è¦æ±‚å®ŒæˆåŸºäºé¢‘åŸŸæ’å€¼å’Œç›¸ä½å£°ç å™¨çš„éŸ³é¢‘å˜é€Ÿç³»ç»Ÿçš„MATLABå®ç°ã€‚æ ¹æ®ä»£ç ä¸­çš„æç¤ºå¡«å†™æ ‡è®°ä¸º<code>?</code>çš„éƒ¨åˆ†ã€‚</p>

                <h3>ğŸ“ æ ¸å¿ƒæ–‡ä»¶</h3>
                <div class="comparison-grid">
                    <div class="comparison-card">
                        <h4>ğŸ¯ ex0_synthesize_all.m</h4>
                        <p>ä¸»å‡½æ•°ï¼Œè°ƒç”¨å…¶ä»–æ¨¡å—</p>
                    </div>
                    <div class="comparison-card">
                        <h4>ğŸ“ ex1-ex6.m</h4>
                        <p>6ä¸ªå¤„ç†æ¨¡å—</p>
                    </div>
                    <div class="comparison-card">
                        <h4>âœ… test_Project2.p</h4>
                        <p>è‡ªåŠ¨æ‰¹æ”¹ç¨‹åº</p>
                    </div>
                </div>

                <h3>ğŸš€ å®éªŒæ­¥éª¤</h3>
                <ol style="padding-left: 20px; line-height: 2;">
                    <li>ä»”ç»†é˜…è¯»æœ¬æ‰‹å†Œï¼Œç†è§£éŸ³é¢‘å˜é€Ÿçš„æ•´ä½“æµç¨‹</li>
                    <li>å°†æ‰€æœ‰å®éªŒæ–‡ä»¶æ”¾åœ¨åŒä¸€ç›®å½•ï¼Œè®¾ç½®MATLABå½“å‰æ–‡ä»¶å¤¹</li>
                    <li>æŒ‰é¡ºåºå®Œæˆex1åˆ°ex5ï¼ˆåŸºç¡€ï¼‰ï¼Œex6ä¸ºè¿›é˜¶</li>
                    <li>è¿è¡Œtest_Project2.pæ£€æŸ¥å„æ¨¡å—æ­£ç¡®æ€§</li>
                    <li>è¿è¡Œex0_synthesize_all.mè§‚å¯Ÿå®Œæ•´æµç¨‹</li>
                    <li>è·å¾—åŠ å¯†æˆç»©ï¼Œå‹ç¼©ä¸ºã€å­¦å·_å§“å.zipã€‘æäº¤</li>
                </ol>

                <div class="tip-box">
                    <strong>ğŸ“‹ é‡è¦æé†’</strong>
                    <ul>
                        <li>âœ… å¯ä»¥å°ç»„åˆä½œï¼ˆä¸è¶…è¿‡6äººï¼‰ï¼Œä½†æ¯äººéœ€ç‹¬ç«‹æäº¤</li>
                        <li>â° å¿…é¡»åœ¨å®éªŒè¯¾ç»“æŸå‰å®Œæˆå¹¶æäº¤</li>
                        <li>ğŸ’¡ é¼“åŠ±åœ¨ç†è§£åŸç†çš„åŸºç¡€ä¸Šè‡ªå·±ç¼–å†™ä»£ç </li>
                    </ul>
                </div>

                <div class="warning-box">
                    <strong>âš ï¸ å­¦æœ¯è¯šä¿¡æé†’</strong>
                    <p>æœ¬å®éªŒæ—¨åœ¨åŠ æ·±å¯¹éŸ³é¢‘æ—¶é¢‘å¤„ç†å’Œç›¸ä½å£°ç å™¨åŸç†çš„ç†è§£ã€‚è¯·ç¡®ä¿ç†è§£æ¯ä¸€è¡Œä»£ç çš„å«ä¹‰ã€‚</p>
                </div>
            </section>

            <!-- ==================== æ€»ç»“ ==================== -->
            <section>
                <h2>ğŸ“ æ€»ç»“</h2>
                
                <div class="success-box">
                    <strong>ğŸŠ å­¦ä¹ æ”¶è·ï¼š</strong>
                    <p>é€šè¿‡æœ¬å®éªŒï¼Œæˆ‘ä»¬æ·±å…¥ç†è§£äº†éŸ³é¢‘å˜é€Ÿçš„åŸç†å’Œå®ç°æ–¹æ³•ï¼š</p>
                    <ul style="margin: 8px 0 0 18px;">
                        <li><strong>DFT/FFTåŸºç¡€</strong>ï¼šå›é¡¾äº†æ—¶é¢‘åˆ†æçš„æ ¸å¿ƒå·¥å…·</li>
                        <li><strong>æ—¶é¢‘å¯¹å¶å…³ç³»</strong>ï¼šç†è§£äº†ä¸ºä»€ä¹ˆç®€å•æ’å€¼ä¼šå¤±è´¥</li>
                        <li><strong>é¢‘åŸŸæ’å€¼æ³•</strong>ï¼šå­¦ä¼šäº†åœ¨é¢‘åŸŸä¿æŒéŸ³é«˜çš„æ–¹æ³•</li>
                        <li><strong>ç›¸ä½å£°ç å™¨</strong>ï¼šæŒæ¡äº†æ¶ˆé™¤å¸§é—´ä¸è¿ç»­çš„é«˜çº§æŠ€æœ¯</li>
                        <li><strong>STFTå¤„ç†æµç¨‹</strong>ï¼šç†Ÿæ‚‰äº†åˆ†å¸§ã€åŠ çª—ã€FFTã€ä¿®æ”¹ã€IFFTã€OLAçš„å®Œæ•´æµç¨‹</li>
                    </ul>
                </div>

                <div class="info-box">
                    <strong>ğŸš€ æ‰©å±•æ€è€ƒï¼š</strong>
                    <p>éŸ³é¢‘å˜é€ŸæŠ€æœ¯åœ¨ç°å®ä¸­æœ‰å¹¿æ³›åº”ç”¨ï¼šè§†é¢‘æ’­æ”¾å™¨çš„å€é€Ÿæ’­æ”¾ã€éŸ³ä¹åˆ¶ä½œä¸­çš„èŠ‚å¥è°ƒæ•´ã€è¯­éŸ³åˆæˆå’Œå˜å£°æ•ˆæœã€DJè®¾å¤‡ä¸­çš„å®æ—¶éŸ³é¢‘å¤„ç†ç­‰ã€‚</p>
                </div>
            </section>

        </div>

        <!-- Footer -->
        <section style="text-align: center; padding: 30px; background: linear-gradient(135deg, #f7fafc 0%, #ffffff 100%); border-radius: 10px; margin: 0 40px 40px 40px; border: 2px solid #9f7aea;">
            <p style="color: #5a67d8; font-size: 1em; font-weight: 600; margin-bottom: 8px;">
                å—äº¬å·¥ä¸šå¤§å­¦æµ¦æ±Ÿå­¦é™¢ | è®¡ç®—æœºä¸é€šä¿¡å·¥ç¨‹ä¸“ä¸š
            </p>
            <p style="color: #667eea; font-size: 0.95em; margin-bottom: 5px;">
                é€šä¿¡å·¥ç¨‹ | DSPè¯¾ç¨‹å®è·µ
            </p>
            <p style="color: #999; font-size: 0.85em; margin-top: 15px;">
                æ•°å­—ä¿¡å·å¤„ç†è¯¾ç¨‹å®éªŒ - åŸºäºç›¸ä½å£°ç å™¨çš„éŸ³é¢‘å˜é€Ÿ
            </p>
        </section>
    </div>

    <!-- Back to Top -->
    <button class="back-to-top" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">â†‘</button>

    <script>
        // ==================== å…¨å±€åŠ¨ç”»å˜é‡ ====================
        let pvFrame = 0;
        let workflowFrame = 0;
        let framingFrame = 0;

        // ==================== è¿”å›é¡¶éƒ¨æŒ‰é’®å’Œè¿›åº¦æ¡ ====================
        window.addEventListener('scroll', function() {
            const backToTop = document.querySelector('.back-to-top');
            const verticalProgress = document.querySelector('.vertical-progress');
            
            if (window.pageYOffset > 300) {
                backToTop.classList.add('visible');
            } else {
                backToTop.classList.remove('visible');
            }
            
            const docHeight = document.documentElement.scrollHeight - window.innerHeight;
            const scrollPercent = (window.pageYOffset / docHeight) * 100;
            if (verticalProgress) {
                verticalProgress.style.setProperty('--progress', scrollPercent + '%');
            }
            
            // æ›´æ–°è¿›åº¦æ ‡è®°
            const markers = document.querySelectorAll('.progress-marker');
            const sections = ['overview', 'stage1', 'stage2', 'stage3', 'workflow', 'experiments'];
            
            sections.forEach((sectionId, index) => {
                const section = document.getElementById(sectionId);
                if (section) {
                    const rect = section.getBoundingClientRect();
                    if (rect.top <= 200 && rect.bottom >= 200) {
                        markers.forEach(m => m.classList.remove('active'));
                        markers[index].classList.add('active');
                    }
                }
            });
        });

        // ==================== ç‚¹å‡»è¿›åº¦æ ‡è®°è·³è½¬ ====================
        document.querySelectorAll('.progress-marker').forEach(marker => {
            marker.addEventListener('click', function() {
                const sectionId = this.getAttribute('data-section');
                const section = document.getElementById(sectionId);
                if (section) {
                    section.scrollIntoView({ behavior: 'smooth' });
                }
            });
        });

        // ==================== é™æ€æ—¶åŸŸå¯¹æ¯”å›¾ ====================
        function drawDiscontinuityStatic() {
            const canvas = document.getElementById('discontinuityCanvas');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            const width = canvas.width, height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, width, height);
            
            const padding = 50;
            
            // æ ‡é¢˜
            ctx.font = 'bold 16px Microsoft YaHei';
            ctx.fillStyle = '#333';
            ctx.textAlign = 'center';
            ctx.fillText('æ—¶åŸŸæ’å€¼å¯¹æ¯”ï¼šåŸå§‹ä¿¡å· vs æ‹‰ä¼¸åä¿¡å·', width/2, 30);
            
            // ===== å·¦ä¾§ï¼šåŸå§‹ä¿¡å· =====
            const leftX = padding;
            const plotW = (width - 3*padding) / 2;
            const plotH = 140;
            const topY = 70;
            
            // åŸå§‹ä¿¡å·æ ‡é¢˜
            ctx.font = 'bold 14px Microsoft YaHei';
            ctx.fillStyle = '#2b5797';
            ctx.textAlign = 'center';
            ctx.fillText('åŸå§‹ä¿¡å·ï¼ˆé¢‘ç‡ fâ‚€ï¼Œæ—¶é•¿ Lï¼‰', leftX + plotW/2, topY - 10);
            
            // åŸå§‹ä¿¡å·åæ ‡è½´
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1.5;
            ctx.beginPath();
            ctx.moveTo(leftX + 30, topY + plotH/2);
            ctx.lineTo(leftX + plotW - 10, topY + plotH/2);
            ctx.stroke();
            
            // åŸå§‹æ­£å¼¦æ³¢ - 3ä¸ªå‘¨æœŸ
            ctx.strokeStyle = '#2b5797';
            ctx.lineWidth = 2.5;
            ctx.beginPath();
            for (let i = 0; i < plotW - 50; i++) {
                const t = (i / (plotW - 50)) * 3 * 2 * Math.PI;
                const py = topY + plotH/2 - Math.sin(t) * 50;
                if (i === 0) ctx.moveTo(leftX + 35 + i, py);
                else ctx.lineTo(leftX + 35 + i, py);
            }
            ctx.stroke();
            
            // å‘¨æœŸæ ‡æ³¨
            const periodW = (plotW - 50) / 3;
            ctx.strokeStyle = '#2b5797';
            ctx.lineWidth = 1;
            ctx.setLineDash([4, 3]);
            for (let i = 1; i <= 3; i++) {
                ctx.beginPath();
                ctx.moveTo(leftX + 35 + i * periodW, topY + 10);
                ctx.lineTo(leftX + 35 + i * periodW, topY + plotH - 10);
                ctx.stroke();
            }
            ctx.setLineDash([]);
            
            // å‘¨æœŸæ ‡ç­¾
            ctx.font = '12px Arial';
            ctx.fillStyle = '#2b5797';
            ctx.textAlign = 'center';
            ctx.fillText('Tâ‚€', leftX + 35 + periodW/2, topY + plotH + 15);
            ctx.fillText('Tâ‚€', leftX + 35 + periodW * 1.5, topY + plotH + 15);
            ctx.fillText('Tâ‚€', leftX + 35 + periodW * 2.5, topY + plotH + 15);
            
            // æ—¶é•¿æ ‡æ³¨
            ctx.strokeStyle = '#666';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(leftX + 35, topY + plotH + 30);
            ctx.lineTo(leftX + plotW - 15, topY + plotH + 30);
            ctx.stroke();
            ctx.fillStyle = '#666';
            ctx.fillText('L', leftX + plotW/2, topY + plotH + 45);
            
            // ===== å³ä¾§ï¼šæ‹‰ä¼¸åä¿¡å· =====
            const rightX = leftX + plotW + padding;
            
            // æ‹‰ä¼¸ä¿¡å·æ ‡é¢˜
            ctx.font = 'bold 14px Microsoft YaHei';
            ctx.fillStyle = '#27ae60';
            ctx.textAlign = 'center';
            ctx.fillText('æ‹‰ä¼¸2å€åï¼ˆé¢‘ç‡ fâ‚€/2ï¼Œæ—¶é•¿ 2Lï¼‰', rightX + plotW/2, topY - 10);
            
            // æ‹‰ä¼¸ä¿¡å·åæ ‡è½´
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1.5;
            ctx.beginPath();
            ctx.moveTo(rightX + 30, topY + plotH/2);
            ctx.lineTo(rightX + plotW - 10, topY + plotH/2);
            ctx.stroke();
            
            // æ‹‰ä¼¸åæ­£å¼¦æ³¢ - 1.5ä¸ªå‘¨æœŸï¼ˆåŒæ ·çš„æ˜¾ç¤ºå®½åº¦ï¼‰
            ctx.strokeStyle = '#27ae60';
            ctx.lineWidth = 2.5;
            ctx.beginPath();
            for (let i = 0; i < plotW - 50; i++) {
                const t = (i / (plotW - 50)) * 1.5 * 2 * Math.PI;
                const py = topY + plotH/2 - Math.sin(t) * 50;
                if (i === 0) ctx.moveTo(rightX + 35 + i, py);
                else ctx.lineTo(rightX + 35 + i, py);
            }
            ctx.stroke();
            
            // å‘¨æœŸæ ‡æ³¨
            const periodW2 = (plotW - 50) / 1.5;
            ctx.strokeStyle = '#27ae60';
            ctx.lineWidth = 1;
            ctx.setLineDash([4, 3]);
            ctx.beginPath();
            ctx.moveTo(rightX + 35 + periodW2, topY + 10);
            ctx.lineTo(rightX + 35 + periodW2, topY + plotH - 10);
            ctx.stroke();
            ctx.setLineDash([]);
            
            // å‘¨æœŸæ ‡ç­¾
            ctx.font = '12px Arial';
            ctx.fillStyle = '#27ae60';
            ctx.fillText('2Tâ‚€', rightX + 35 + periodW2/2, topY + plotH + 15);
            
            // æ—¶é•¿æ ‡æ³¨
            ctx.strokeStyle = '#666';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(rightX + 35, topY + plotH + 30);
            ctx.lineTo(rightX + plotW - 15, topY + plotH + 30);
            ctx.stroke();
            ctx.fillStyle = '#666';
            ctx.fillText('2L', rightX + plotW/2, topY + plotH + 45);
            
            // ===== åº•éƒ¨ç»“è®ºæ¡† =====
            const boxY = topY + plotH + 70;
            ctx.fillStyle = '#fff5f5';
            ctx.fillRect(padding, boxY, width - 2*padding, 100);
            ctx.strokeStyle = '#e74c3c';
            ctx.lineWidth = 2;
            ctx.strokeRect(padding, boxY, width - 2*padding, 100);
            
            ctx.font = 'bold 16px Microsoft YaHei';
            ctx.fillStyle = '#c0392b';
            ctx.textAlign = 'center';
            ctx.fillText('âŒ æ—¶åŸŸæ‹‰ä¼¸çš„é—®é¢˜', width/2, boxY + 30);
            
            ctx.font = '14px Microsoft YaHei';
            ctx.fillStyle = '#333';
            ctx.fillText('æ—¶é—´æ‹‰ä¼¸ 2 å€ â†’ å‘¨æœŸå˜ä¸º 2Tâ‚€ â†’ é¢‘ç‡å˜ä¸º fâ‚€/2 â†’ éŸ³é«˜é™ä½ä¸€ä¸ªå…«åº¦ï¼', width/2, boxY + 58);
            ctx.fillText('è¿™è¿èƒŒäº†æˆ‘ä»¬"å˜é€Ÿä¸å˜è°ƒ"çš„ç›®æ ‡', width/2, boxY + 82);
            
            // ===== å¯¹æ¯”ç®­å¤´ =====
            ctx.strokeStyle = '#e74c3c';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(width/2 - 30, topY + plotH/2 - 30);
            ctx.lineTo(width/2 + 30, topY + plotH/2 - 30);
            ctx.stroke();
            
            // ç®­å¤´å¤´éƒ¨
            ctx.beginPath();
            ctx.moveTo(width/2 + 30, topY + plotH/2 - 30);
            ctx.lineTo(width/2 + 20, topY + plotH/2 - 37);
            ctx.lineTo(width/2 + 20, topY + plotH/2 - 23);
            ctx.closePath();
            ctx.fillStyle = '#e74c3c';
            ctx.fill();
            
            ctx.font = 'bold 12px Arial';
            ctx.fillStyle = '#e74c3c';
            ctx.textAlign = 'center';
            ctx.fillText('æ’å€¼', width/2, topY + plotH/2 - 45);
        }

        // ==================== é¢‘è°±å¯¹æ¯”å›¾ ====================
        function drawSpectrum() {
            const canvas = document.getElementById('spectrumCanvas');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            const width = canvas.width, height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, width, height);
            
            const subW = (width - 80) / 3;
            const plotH = 180;
            const startY = 60;
            
            const specs = [
                { x: 40, title: 'åŸå§‹é¢‘è°±', peakPos: 0.15, peakLabel: 'fâ‚€', color: '#2b5797' },
                { x: 40 + subW + 20, title: 'æ‹‰ä¼¸åé¢‘è°±ï¼ˆæ—¶åŸŸÃ—2ï¼‰', peakPos: 0.075, peakLabel: 'fâ‚€/2', color: '#27ae60' },
                { x: 40 + (subW + 20) * 2, title: 'å‹ç¼©åé¢‘è°±ï¼ˆæ—¶åŸŸÃ·2ï¼‰', peakPos: 0.30, peakLabel: '2fâ‚€', color: '#e74c3c' }
            ];
            
            // ç»˜åˆ¶è¿æ¥çº¿
            ctx.strokeStyle = '#999';
            ctx.lineWidth = 1.5;
            ctx.setLineDash([6, 4]);
            const baseY = startY + plotH - plotH * 0.85;
            
            ctx.beginPath();
            ctx.moveTo(specs[0].x + 30 + specs[0].peakPos * (subW - 40), baseY);
            ctx.lineTo(specs[1].x + 30 + specs[1].peakPos * (subW - 40), baseY);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(specs[0].x + 30 + specs[0].peakPos * (subW - 40), baseY);
            ctx.lineTo(specs[2].x + 30 + specs[2].peakPos * (subW - 40), baseY);
            ctx.stroke();
            ctx.setLineDash([]);
            
            specs.forEach((spec, idx) => {
                ctx.font = 'bold 14px Microsoft YaHei';
                ctx.fillStyle = spec.color;
                ctx.textAlign = 'center';
                ctx.fillText(spec.title, spec.x + subW/2, startY - 15);
                
                ctx.strokeStyle = '#333';
                ctx.lineWidth = 1.5;
                ctx.beginPath();
                ctx.moveTo(spec.x + 30, startY);
                ctx.lineTo(spec.x + 30, startY + plotH);
                ctx.lineTo(spec.x + subW - 10, startY + plotH);
                ctx.stroke();
                
                ctx.font = '12px Arial';
                ctx.fillStyle = '#666';
                ctx.textAlign = 'center';
                ctx.fillText('é¢‘ç‡ f', spec.x + subW/2, startY + plotH + 20);
                
                ctx.save();
                ctx.translate(spec.x + 15, startY + plotH/2);
                ctx.rotate(-Math.PI/2);
                ctx.fillText('|X(f)|', 0, 0);
                ctx.restore();
                
                const peakX = spec.x + 30 + spec.peakPos * (subW - 40);
                ctx.fillStyle = spec.color;
                for (let i = 0; i < 25; i++) {
                    const h = plotH * 0.85 * Math.exp(-Math.pow((i - 12) / 4, 2));
                    ctx.fillRect(peakX + i - 12, startY + plotH - h, 3, h);
                }
                
                ctx.fillStyle = spec.color;
                ctx.font = 'bold 14px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(spec.peakLabel, peakX, startY - 2);
                
                ctx.strokeStyle = spec.color;
                ctx.lineWidth = 1;
                ctx.setLineDash([3, 3]);
                ctx.beginPath();
                ctx.moveTo(peakX, startY);
                ctx.lineTo(peakX, startY + plotH);
                ctx.stroke();
                ctx.setLineDash([]);
                
                ctx.fillStyle = '#ccc';
                ctx.globalAlpha = 0.3;
                for (let i = 0; i < subW - 40; i += 5) {
                    const h = Math.random() * 15 + 5;
                    ctx.fillRect(spec.x + 30 + i, startY + plotH - h, 3, h);
                }
                ctx.globalAlpha = 1;
            });
            
            ctx.fillStyle = '#fff5f5';
            ctx.fillRect(40, height - 100, width - 80, 85);
            ctx.strokeStyle = '#e74c3c';
            ctx.lineWidth = 2;
            ctx.strokeRect(40, height - 100, width - 80, 85);
            
            ctx.font = 'bold 14px Microsoft YaHei';
            ctx.fillStyle = '#c0392b';
            ctx.textAlign = 'left';
            ctx.fillText('ğŸ“Š ç»“è®ºï¼šç®€å•çš„æ—¶åŸŸæ“ä½œä¼šæ”¹å˜ä¿¡å·çš„é¢‘ç‡æˆåˆ†', 60, height - 75);
            
            ctx.font = '13px Microsoft YaHei';
            ctx.fillStyle = '#333';
            ctx.fillText('â€¢ æ—¶åŸŸæ‹‰ä¼¸2å€ â†’ é¢‘è°±å³°å€¼ä» fâ‚€ ç§»åŠ¨åˆ° fâ‚€/2ï¼ˆå·¦ç§»ï¼‰â†’ éŸ³é«˜é™ä½ä¸€ä¸ªå…«åº¦', 80, height - 50);
            ctx.fillText('â€¢ æ—¶åŸŸå‹ç¼©2å€ â†’ é¢‘è°±å³°å€¼ä» fâ‚€ ç§»åŠ¨åˆ° 2fâ‚€ï¼ˆå³ç§»ï¼‰â†’ éŸ³é«˜å‡é«˜ä¸€ä¸ªå…«åº¦', 80, height - 28);
        }
        
        // ==================== é¢‘åŸŸæ’å€¼å¯¹æ¯”å›¾ ====================
        function drawFreqInterpolation() {
            const canvas = document.getElementById('freqInterpolationCanvas');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            const width = canvas.width, height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, width, height);
            
            ctx.strokeStyle = '#ddd';
            ctx.lineWidth = 2;
            ctx.setLineDash([8, 4]);
            ctx.beginPath();
            ctx.moveTo(width/2, 20);
            ctx.lineTo(width/2, height - 20);
            ctx.stroke();
            ctx.setLineDash([]);
            
            ctx.fillStyle = '#c0392b';
            ctx.font = 'bold 16px Microsoft YaHei';
            ctx.textAlign = 'center';
            ctx.fillText('âŒ é”™è¯¯æ–¹æ³•ï¼šæ—¶åŸŸæ’å€¼', width/4, 30);
            
            ctx.fillStyle = '#27ae60';
            ctx.fillText('âœ“ æ­£ç¡®æ–¹æ³•ï¼šé¢‘åŸŸæ’å€¼', width * 3/4, 30);
            
            const leftX = 60, rightX = width/2 + 60;
            const topY = 50;
            
            // å·¦ä¾§
            drawStepLabel(ctx, leftX - 30, topY + 40, '1', '#c0392b');
            ctx.font = '13px Microsoft YaHei';
            ctx.fillStyle = '#333';
            ctx.textAlign = 'left';
            ctx.fillText('åŸå§‹ä¿¡å· x[n]ï¼ˆé¢‘ç‡ fâ‚€ï¼‰', leftX + 5, topY + 25);
            drawSineWave(ctx, leftX, topY + 40, 160, 30, '#2b5797', 1);
            drawLengthMarker(ctx, leftX, leftX + 160, topY + 85, 'L');
            
            drawArrowDown(ctx, leftX + 80, topY + 105, topY + 145);
            ctx.font = '12px Arial';
            ctx.fillStyle = '#c0392b';
            ctx.textAlign = 'left';
            ctx.fillText('æ—¶åŸŸ2å€æ’å€¼', leftX + 95, topY + 130);
            
            drawStepLabel(ctx, leftX - 30, topY + 175, '2', '#c0392b');
            ctx.fillStyle = '#333';
            ctx.font = '13px Microsoft YaHei';
            ctx.fillText('æ‹‰ä¼¸ä¿¡å·ï¼ˆé¢‘ç‡å˜ä¸º fâ‚€/2 âŒï¼‰', leftX + 5, topY + 160);
            drawSineWave(ctx, leftX, topY + 175, 320, 30, '#c0392b', 0.5);
            drawLengthMarker(ctx, leftX, leftX + 320, topY + 220, '2L');
            
            ctx.fillStyle = '#fff5f5';
            ctx.fillRect(leftX - 30, topY + 250, 380, 50);
            ctx.strokeStyle = '#c0392b';
            ctx.lineWidth = 2;
            ctx.strokeRect(leftX - 30, topY + 250, 380, 50);
            ctx.font = '13px Microsoft YaHei';
            ctx.fillStyle = '#c0392b';
            ctx.textAlign = 'center';
            ctx.fillText('æ—¶é•¿å˜ä¸º2å€ï¼Œä½†é¢‘ç‡ä¹Ÿå˜ä¸ºä¸€åŠ', leftX + 160, topY + 280);
            
            // å³ä¾§
            drawStepLabel(ctx, rightX - 30, topY + 40, '1', '#27ae60');
            ctx.fillStyle = '#333';
            ctx.font = '13px Microsoft YaHei';
            ctx.textAlign = 'left';
            ctx.fillText('åŸå§‹ä¿¡å· x[n]', rightX + 5, topY + 25);
            drawSineWave(ctx, rightX, topY + 40, 140, 25, '#2b5797', 1);
            
            drawArrowDown(ctx, rightX + 70, topY + 75, topY + 105);
            ctx.font = 'bold 12px Arial';
            ctx.fillStyle = '#27ae60';
            ctx.textAlign = 'left';
            ctx.fillText('FFT', rightX + 85, topY + 95);
            
            drawStepLabel(ctx, rightX - 30, topY + 130, '2', '#27ae60');
            ctx.fillStyle = '#333';
            ctx.font = '13px Microsoft YaHei';
            ctx.fillText('é¢‘è°± X[k]', rightX + 5, topY + 118);
            drawSpectrumDots(ctx, rightX + 10, topY + 135, 130, 45, 15);
            
            drawArrowDown(ctx, rightX + 75, topY + 195, topY + 225);
            ctx.font = 'bold 12px Arial';
            ctx.fillStyle = '#27ae60';
            ctx.fillText('é¢‘åŸŸ2å€æ’å€¼', rightX + 90, topY + 215);
            
            drawStepLabel(ctx, rightX - 30, topY + 250, '3', '#27ae60');
            ctx.fillStyle = '#333';
            ctx.font = '13px Microsoft YaHei';
            ctx.fillText('æ’å€¼é¢‘è°± X\'[k]ï¼ˆé¢‘ç‡ä½ç½®ä¸å˜ï¼‰', rightX + 5, topY + 238);
            drawSpectrumDots(ctx, rightX + 10, topY + 255, 260, 45, 30);
            
            drawArrowDown(ctx, rightX + 130, topY + 315, topY + 345);
            ctx.font = 'bold 12px Arial';
            ctx.fillStyle = '#27ae60';
            ctx.fillText('IFFT', rightX + 145, topY + 335);
            
            drawStepLabel(ctx, rightX - 30, topY + 375, '4', '#27ae60');
            ctx.fillStyle = '#333';
            ctx.font = '13px Microsoft YaHei';
            ctx.fillText('è¾“å‡ºä¿¡å·ï¼ˆé¢‘ç‡ fâ‚€ ä¸å˜ âœ“ï¼‰', rightX + 5, topY + 360);
            drawSineWave(ctx, rightX, topY + 375, 280, 25, '#27ae60', 1);
            drawLengthMarker(ctx, rightX, rightX + 280, topY + 415, '2L');
            
            ctx.fillStyle = '#f0fff4';
            ctx.fillRect(rightX - 30, topY + 440, 380, 50);
            ctx.strokeStyle = '#27ae60';
            ctx.lineWidth = 2;
            ctx.strokeRect(rightX - 30, topY + 440, 380, 50);
            ctx.font = '13px Microsoft YaHei';
            ctx.fillStyle = '#27ae60';
            ctx.textAlign = 'center';
            ctx.fillText('æ—¶é•¿å˜ä¸º2å€ï¼Œé¢‘ç‡ä¿æŒä¸å˜ï¼', rightX + 160, topY + 470);
        }
        
        function drawStepLabel(ctx, x, y, num, color) {
            ctx.fillStyle = color;
            ctx.beginPath();
            ctx.arc(x, y, 14, 0, Math.PI * 2);
            ctx.fill();
            ctx.fillStyle = 'white';
            ctx.font = 'bold 14px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(num, x, y);
            ctx.textBaseline = 'alphabetic';
        }
        
        function drawSineWave(ctx, x, y, w, amp, color, freqMult) {
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;
            ctx.beginPath();
            for (let i = 0; i < w; i++) {
                const t = (i / w) * 6 * Math.PI * freqMult;
                const py = y + Math.sin(t) * amp;
                if (i === 0) ctx.moveTo(x + i, py);
                else ctx.lineTo(x + i, py);
            }
            ctx.stroke();
        }
        
        function drawLengthMarker(ctx, x1, x2, y, label) {
            ctx.strokeStyle = '#666';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(x1, y);
            ctx.lineTo(x1, y + 10);
            ctx.moveTo(x2, y);
            ctx.lineTo(x2, y + 10);
            ctx.moveTo(x1, y + 5);
            ctx.lineTo(x2, y + 5);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(x1, y + 5);
            ctx.lineTo(x1 + 6, y + 2);
            ctx.lineTo(x1 + 6, y + 8);
            ctx.fill();
            ctx.beginPath();
            ctx.moveTo(x2, y + 5);
            ctx.lineTo(x2 - 6, y + 2);
            ctx.lineTo(x2 - 6, y + 8);
            ctx.fill();
            
            ctx.font = '12px Arial';
            ctx.fillStyle = '#666';
            ctx.textAlign = 'center';
            ctx.fillText(label, (x1 + x2) / 2, y + 22);
        }
        
        function drawSpectrumDots(ctx, x, y, w, h, count) {
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(x, y);
            ctx.lineTo(x, y + h);
            ctx.lineTo(x + w, y + h);
            ctx.stroke();
            
            ctx.fillStyle = '#2b5797';
            for (let i = 0; i < count; i++) {
                const px = x + 10 + (i / count) * (w - 20);
                const mag = Math.exp(-Math.pow((i - count * 0.2) / 3, 2)) * h * 0.8 + 
                           Math.exp(-Math.pow((i - count * 0.8) / 3, 2)) * h * 0.5;
                ctx.beginPath();
                ctx.arc(px, y + h - mag, 4, 0, Math.PI * 2);
                ctx.fill();
            }
        }
        
        function drawArrowDown(ctx, x, y1, y2) {
            ctx.strokeStyle = '#666';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(x, y1);
            ctx.lineTo(x, y2);
            ctx.stroke();
            
            ctx.fillStyle = '#666';
            ctx.beginPath();
            ctx.moveTo(x, y2 + 8);
            ctx.lineTo(x - 6, y2);
            ctx.lineTo(x + 6, y2);
            ctx.fill();
        }

        // ==================== åŠ çª—ç¤ºæ„ ====================
        function drawWindowing() {
            const canvas = document.getElementById('windowingCanvas');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            const width = canvas.width, height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, width, height);
            
            const plotW = 220, plotH = 150;
            const startX = 60, startY = 55, gap = 80;
            
            // åŸå§‹ä¿¡å·
            drawAxisBox(ctx, startX, startY, plotW, plotH, 'åŸå§‹ä¿¡å·ï¼ˆä¸€å¸§ï¼‰');
            ctx.strokeStyle = '#2b5797';
            ctx.lineWidth = 2;
            ctx.beginPath();
            for (let i = 0; i < plotW - 40; i++) {
                const t = (i / (plotW - 40)) * 6 * Math.PI;
                const py = startY + plotH/2 + Math.sin(t) * 45;
                if (i === 0) ctx.moveTo(startX + 20 + i, py);
                else ctx.lineTo(startX + 20 + i, py);
            }
            ctx.stroke();
            
            ctx.strokeStyle = '#e74c3c';
            ctx.lineWidth = 1;
            ctx.setLineDash([4, 2]);
            ctx.beginPath();
            ctx.moveTo(startX + 20, startY + 15);
            ctx.lineTo(startX + 20, startY + plotH - 15);
            ctx.moveTo(startX + plotW - 20, startY + 15);
            ctx.lineTo(startX + plotW - 20, startY + plotH - 15);
            ctx.stroke();
            ctx.setLineDash([]);
            
            ctx.font = '11px Arial';
            ctx.fillStyle = '#e74c3c';
            ctx.textAlign = 'center';
            ctx.fillText('è¾¹ç•Œçªå˜', startX + 20, startY + plotH + 15);
            ctx.fillText('è¾¹ç•Œçªå˜', startX + plotW - 20, startY + plotH + 15);
            
            ctx.font = 'bold 28px Arial';
            ctx.fillStyle = '#333';
            ctx.textAlign = 'center';
            ctx.fillText('Ã—', startX + plotW + gap/2, startY + plotH/2 + 5);
            
            // æ±‰æ˜çª—
            const winX = startX + plotW + gap;
            drawAxisBox(ctx, winX, startY, plotW, plotH, 'æ±‰æ˜çª—');
            ctx.strokeStyle = '#ed8936';
            ctx.lineWidth = 2.5;
            ctx.beginPath();
            for (let i = 0; i < plotW - 40; i++) {
                const t = i / (plotW - 40);
                const ham = 0.54 - 0.46 * Math.cos(2 * Math.PI * t);
                const py = startY + plotH - 20 - ham * (plotH - 40);
                if (i === 0) ctx.moveTo(winX + 20 + i, py);
                else ctx.lineTo(winX + 20 + i, py);
            }
            ctx.stroke();
            
            ctx.font = '11px Arial';
            ctx.fillStyle = '#ed8936';
            ctx.textAlign = 'right';
            ctx.fillText('1.0', winX + 15, startY + 25);
            ctx.fillText('0', winX + 15, startY + plotH - 15);
            
            ctx.font = 'bold 28px Arial';
            ctx.fillStyle = '#333';
            ctx.textAlign = 'center';
            ctx.fillText('=', winX + plotW + gap/2, startY + plotH/2 + 5);
            
            // åŠ çª—åä¿¡å·
            const outX = winX + plotW + gap;
            drawAxisBox(ctx, outX, startY, plotW, plotH, 'åŠ çª—åä¿¡å·');
            ctx.strokeStyle = '#48bb78';
            ctx.lineWidth = 2;
            ctx.beginPath();
            for (let i = 0; i < plotW - 40; i++) {
                const t = (i / (plotW - 40)) * 6 * Math.PI;
                const ham = 0.54 - 0.46 * Math.cos(2 * Math.PI * i / (plotW - 40));
                const py = startY + plotH/2 + Math.sin(t) * 45 * ham;
                if (i === 0) ctx.moveTo(outX + 20 + i, py);
                else ctx.lineTo(outX + 20 + i, py);
            }
            ctx.stroke();
            
            ctx.font = '11px Arial';
            ctx.fillStyle = '#48bb78';
            ctx.textAlign = 'center';
            ctx.fillText('è¾¹ç•Œå¹³æ»‘', outX + 20, startY + plotH + 15);
            ctx.fillText('è¾¹ç•Œå¹³æ»‘', outX + plotW - 20, startY + plotH + 15);
        }
        
        function drawAxisBox(ctx, x, y, w, h, title) {
            ctx.font = 'bold 13px Microsoft YaHei';
            ctx.fillStyle = '#333';
            ctx.textAlign = 'center';
            ctx.fillText(title, x + w/2, y - 8);
            
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1.5;
            ctx.beginPath();
            ctx.moveTo(x + 20, y + 10);
            ctx.lineTo(x + 20, y + h - 15);
            ctx.lineTo(x + w - 20, y + h - 15);
            ctx.stroke();
        }

        // ==================== å¸§èåˆç¤ºæ„ ====================
        function drawFusion() {
            const canvas = document.getElementById('fusionCanvas');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            const width = canvas.width, height = canvas.height;
            
            ctx.clearRect(0, 0, width, height);
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, width, height);
            
            const plotW = 800, plotH = 180;
            const startX = 75, startY = 50;
            
            ctx.font = 'bold 15px Microsoft YaHei';
            ctx.fillStyle = '#333';
            ctx.textAlign = 'center';
            ctx.fillText('é‡å ç›¸åŠ ï¼ˆOLAï¼‰åŸç†ç¤ºæ„', width/2, 25);
            
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1.5;
            ctx.beginPath();
            ctx.moveTo(startX, startY);
            ctx.lineTo(startX, startY + plotH);
            ctx.lineTo(startX + plotW, startY + plotH);
            ctx.stroke();
            
            const overlapStart = plotW * 0.35;
            const overlapEnd = plotW * 0.65;
            
            ctx.fillStyle = 'rgba(102, 126, 234, 0.15)';
            ctx.fillRect(startX + overlapStart, startY, overlapEnd - overlapStart, plotH);
            
            ctx.strokeStyle = '#c0392b';
            ctx.lineWidth = 2;
            ctx.beginPath();
            for (let i = 0; i < overlapEnd; i++) {
                const t = (i / plotW) * 8 * Math.PI;
                let envelope = 1;
                if (i > overlapStart) {
                    envelope = 1 - (i - overlapStart) / (overlapEnd - overlapStart);
                }
                const py = startY + plotH/2 + Math.sin(t) * 50 * envelope;
                if (i === 0) ctx.moveTo(startX + i, py);
                else ctx.lineTo(startX + i, py);
            }
            ctx.stroke();
            
            ctx.strokeStyle = '#2980b9';
            ctx.lineWidth = 2;
            ctx.beginPath();
            for (let i = overlapStart; i < plotW; i++) {
                const t = (i / plotW) * 8 * Math.PI + 0.5;
                let envelope = 1;
                if (i < overlapEnd) {
                    envelope = (i - overlapStart) / (overlapEnd - overlapStart);
                }
                const py = startY + plotH/2 + Math.sin(t) * 50 * envelope;
                if (i === overlapStart) ctx.moveTo(startX + i, py);
                else ctx.lineTo(startX + i, py);
            }
            ctx.stroke();
            
            ctx.strokeStyle = '#27ae60';
            ctx.lineWidth = 2.5;
            ctx.setLineDash([6, 3]);
            ctx.beginPath();
            for (let i = 0; i < plotW; i++) {
                const t = (i / plotW) * 8 * Math.PI;
                let val = 0;
                
                if (i < overlapStart) {
                    val = Math.sin(t) * 50;
                } else if (i < overlapEnd) {
                    const fadeOut = 1 - (i - overlapStart) / (overlapEnd - overlapStart);
                    const fadeIn = (i - overlapStart) / (overlapEnd - overlapStart);
                    val = Math.sin(t) * 50 * fadeOut + Math.sin(t + 0.5) * 50 * fadeIn;
                } else {
                    val = Math.sin(t + 0.5) * 50;
                }
                
                const py = startY + plotH/2 + val;
                if (i === 0) ctx.moveTo(startX + i, py);
                else ctx.lineTo(startX + i, py);
            }
            ctx.stroke();
            ctx.setLineDash([]);
            
            ctx.font = '12px Arial';
            ctx.fillStyle = '#667eea';
            ctx.textAlign = 'center';
            ctx.fillText('é‡å åŒºåŸŸ', startX + (overlapStart + overlapEnd)/2, startY + plotH + 20);
            
            ctx.font = '12px Microsoft YaHei';
            ctx.fillStyle = '#c0392b';
            ctx.textAlign = 'left';
            ctx.fillText('å‰ä¸€å¸§', startX + 10, startY + 20);
            ctx.fillStyle = '#2980b9';
            ctx.textAlign = 'right';
            ctx.fillText('å½“å‰å¸§', startX + plotW - 10, startY + 20);
        }

        // ==================== ç›¸ä½å£°ç å™¨åŠ¨ç”» ====================
        function animatePhaseVocoder() {
            const canvas = document.getElementById('phaseVocoderCanvas');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            const width = canvas.width, height = canvas.height;
            
            pvFrame++;
            const animT = (pvFrame % 300) / 300;
            
            ctx.clearRect(0, 0, width, height);
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, width, height);
            
            // ä¸ŠåŠéƒ¨åˆ†ï¼šæ—¶åŸŸä¿¡å·
            const topH = 200;
            ctx.font = 'bold 15px Microsoft YaHei';
            ctx.fillStyle = '#333';
            ctx.textAlign = 'left';
            ctx.fillText('æ—¶åŸŸä¿¡å·ï¼ˆç¬¬ k ä¸ªé¢‘ç‡åˆ†é‡ï¼‰', 60, 30);
            
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1.5;
            ctx.beginPath();
            ctx.moveTo(60, topH - 30);
            ctx.lineTo(width - 60, topH - 30);
            ctx.stroke();
            
            ctx.font = '12px Arial';
            ctx.fillStyle = '#666';
            ctx.textAlign = 'center';
            ctx.fillText('æ—¶é—´ t', width - 40, topH - 25);
            
            const waveStart = 80, waveEnd = width - 80;
            ctx.strokeStyle = '#999';
            ctx.lineWidth = 2;
            ctx.beginPath();
            for (let i = 0; i < waveEnd - waveStart; i++) {
                const t = (i / (waveEnd - waveStart)) * 6 * Math.PI + animT * 2 * Math.PI;
                const py = topH/2 + 20 + Math.sin(t) * 50;
                if (i === 0) ctx.moveTo(waveStart + i, py);
                else ctx.lineTo(waveStart + i, py);
            }
            ctx.stroke();
            
            const t1X = waveStart + (waveEnd - waveStart) * 0.25;
            const t2X = waveStart + (waveEnd - waveStart) * 0.55;
            
            ctx.strokeStyle = '#c0392b';
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 3]);
            ctx.beginPath();
            ctx.moveTo(t1X, 50);
            ctx.lineTo(t1X, topH - 35);
            ctx.stroke();
            ctx.setLineDash([]);
            
            ctx.font = 'bold 13px Arial';
            ctx.fillStyle = '#c0392b';
            ctx.textAlign = 'center';
            ctx.fillText('tâ‚', t1X, topH - 15);
            ctx.fillText('ç¬¬ m å¸§', t1X, 45);
            
            ctx.strokeStyle = '#27ae60';
            ctx.setLineDash([5, 3]);
            ctx.beginPath();
            ctx.moveTo(t2X, 50);
            ctx.lineTo(t2X, topH - 35);
            ctx.stroke();
            ctx.setLineDash([]);
            
            ctx.fillStyle = '#27ae60';
            ctx.fillText('tâ‚‚', t2X, topH - 15);
            ctx.fillText('ç¬¬ m+1 å¸§', t2X, 45);
            
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(t1X, topH - 50);
            ctx.lineTo(t2X, topH - 50);
            ctx.stroke();
            ctx.font = '12px Arial';
            ctx.fillStyle = '#333';
            ctx.fillText('Î”t = Râ‚ / Fâ‚›', (t1X + t2X) / 2, topH - 55);
            
            // ä¸‹åŠéƒ¨åˆ†ï¼šå•ä½åœ†
            const circleY = topH + 180;
            const circleR = 100;
            const circle1X = width * 0.28;
            const circle2X = width * 0.72;
            
            ctx.font = 'bold 14px Microsoft YaHei';
            ctx.fillStyle = '#333';
            ctx.textAlign = 'center';
            ctx.fillText('å•ä½åœ†è¡¨ç¤ºï¼ˆç›¸ä½å¯è§†åŒ–ï¼‰', width/2, topH + 30);
            
            // ç¬¬ä¸€ä¸ªå•ä½åœ†
            ctx.font = 'bold 13px Arial';
            ctx.fillStyle = '#c0392b';
            ctx.fillText('ç¬¬ m å¸§ç›¸ä½ Ï†â‚', circle1X, topH + 55);
            
            ctx.strokeStyle = '#ddd';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.arc(circle1X, circleY, circleR, 0, Math.PI * 2);
            ctx.stroke();
            
            ctx.strokeStyle = '#ccc';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(circle1X - circleR - 10, circleY);
            ctx.lineTo(circle1X + circleR + 10, circleY);
            ctx.moveTo(circle1X, circleY - circleR - 10);
            ctx.lineTo(circle1X, circleY + circleR + 10);
            ctx.stroke();
            
            const phi1 = animT * Math.PI * 1.5;
            ctx.strokeStyle = '#c0392b';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(circle1X, circleY);
            ctx.lineTo(circle1X + Math.cos(phi1) * circleR * 0.9, circleY - Math.sin(phi1) * circleR * 0.9);
            ctx.stroke();
            
            const phi1End = { x: circle1X + Math.cos(phi1) * circleR * 0.9, y: circleY - Math.sin(phi1) * circleR * 0.9 };
            ctx.fillStyle = '#c0392b';
            ctx.beginPath();
            ctx.arc(phi1End.x, phi1End.y, 5, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.strokeStyle = '#c0392b';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.arc(circle1X, circleY, 30, 0, -phi1, true);
            ctx.stroke();
            ctx.font = '12px Arial';
            ctx.fillStyle = '#c0392b';
            ctx.fillText('Ï†â‚', circle1X + 40, circleY - 15);
            
            // ç¬¬äºŒä¸ªå•ä½åœ†
            ctx.font = 'bold 13px Arial';
            ctx.fillStyle = '#27ae60';
            ctx.fillText('ç¬¬ m+1 å¸§ç›¸ä½ Ï†â‚‚', circle2X, topH + 55);
            
            ctx.strokeStyle = '#ddd';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.arc(circle2X, circleY, circleR, 0, Math.PI * 2);
            ctx.stroke();
            
            ctx.strokeStyle = '#ccc';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(circle2X - circleR - 10, circleY);
            ctx.lineTo(circle2X + circleR + 10, circleY);
            ctx.moveTo(circle2X, circleY - circleR - 10);
            ctx.lineTo(circle2X, circleY + circleR + 10);
            ctx.stroke();
            
            const phi2Theory = phi1 + 1.2;
            ctx.strokeStyle = '#3498db';
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 3]);
            ctx.beginPath();
            ctx.moveTo(circle2X, circleY);
            ctx.lineTo(circle2X + Math.cos(phi2Theory) * circleR * 0.85, circleY - Math.sin(phi2Theory) * circleR * 0.85);
            ctx.stroke();
            ctx.setLineDash([]);
            
            const phi2Actual = phi2Theory + 0.3;
            ctx.strokeStyle = '#27ae60';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(circle2X, circleY);
            ctx.lineTo(circle2X + Math.cos(phi2Actual) * circleR * 0.9, circleY - Math.sin(phi2Actual) * circleR * 0.9);
            ctx.stroke();
            
            const phi2End = { x: circle2X + Math.cos(phi2Actual) * circleR * 0.9, y: circleY - Math.sin(phi2Actual) * circleR * 0.9 };
            ctx.fillStyle = '#27ae60';
            ctx.beginPath();
            ctx.arc(phi2End.x, phi2End.y, 5, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.strokeStyle = '#e74c3c';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.arc(circle2X, circleY, circleR * 0.5, -phi2Theory, -phi2Actual, true);
            ctx.stroke();
            
            ctx.font = 'bold 12px Arial';
            ctx.fillStyle = '#e74c3c';
            const errLabelAngle = (phi2Theory + phi2Actual) / 2;
            ctx.fillText('Ï†Err', circle2X + Math.cos(errLabelAngle) * circleR * 0.65, circleY - Math.sin(errLabelAngle) * circleR * 0.65);
            
            ctx.font = '11px Arial';
            ctx.fillStyle = '#3498db';
            ctx.textAlign = 'left';
            ctx.fillText('--- ç†è®ºç›¸ä½ Ï†â‚ + Î©Î”t', circle2X - 60, circleY + circleR + 30);
            ctx.fillStyle = '#27ae60';
            ctx.fillText('â€” å®é™…ç›¸ä½ Ï†â‚‚', circle2X - 60, circleY + circleR + 45);
            
            ctx.fillStyle = '#f7fafc';
            ctx.fillRect(width/2 - 140, circleY - 30, 280, 60);
            ctx.strokeStyle = '#667eea';
            ctx.lineWidth = 2;
            ctx.strokeRect(width/2 - 140, circleY - 30, 280, 60);
            
            ctx.font = 'bold 14px Arial';
            ctx.fillStyle = '#5a67d8';
            ctx.textAlign = 'center';
            ctx.fillText('å®é™…é¢‘ç‡è®¡ç®—', width/2, circleY - 10);
            ctx.font = '13px Arial';
            ctx.fillStyle = '#333';
            ctx.fillText('Ï‰ = Î© + Ï†Err / Râ‚', width/2, circleY + 15);
            
            requestAnimationFrame(animatePhaseVocoder);
        }

        // ==================== é‡æ–°è®¾è®¡çš„å·¥ä½œæµç¨‹åŠ¨ç”» ====================
        function animateWorkflow() {
            const canvas = document.getElementById('workflowCanvas');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            const width = canvas.width, height = canvas.height;
            
            workflowFrame++;
            const cycleTime = 420;
            const animT = (workflowFrame % cycleTime) / cycleTime;
            const currentStep = Math.floor(animT * 7);
            
            ctx.clearRect(0, 0, width, height);
            ctx.fillStyle = '#f8f9fa';
            ctx.fillRect(0, 0, width, height);
            
            // æµç¨‹æ¡†é…ç½®
            const boxW = 110, boxH = 70;
            const startX = 60, topY = 60;
            const gapX = 30;
            
            const steps = [
                { label: 'è¾“å…¥ä¿¡å·', icon: 'ğŸµ', desc: 'x[n]' },
                { label: 'åˆ†å¸§', icon: 'ğŸ“Š', desc: 'Nç‚¹/å¸§' },
                { label: 'åŠ çª—', icon: 'ğŸ”²', desc: 'æ±‰æ˜çª—' },
                { label: 'FFT', icon: 'ğŸ“ˆ', desc: 'é¢‘è°±' },
                { label: 'ä¿®æ”¹é¢‘è°±', icon: 'ğŸ”§', desc: 'PV/æ’å€¼', highlight: true },
                { label: 'IFFT', icon: 'ğŸ“‰', desc: 'æ—¶åŸŸå¸§' },
                { label: 'OLAé‡å»º', icon: 'ğŸ”—', desc: 'è¾“å‡º' }
            ];
            
            // ç»˜åˆ¶è¿æ¥çº¿
            for (let i = 0; i < steps.length - 1; i++) {
                const x1 = startX + i * (boxW + gapX) + boxW;
                const x2 = startX + (i + 1) * (boxW + gapX);
                const y = topY + boxH / 2;
                
                const isActive = i < currentStep;
                ctx.strokeStyle = isActive ? '#667eea' : '#ddd';
                ctx.lineWidth = 3;
                ctx.beginPath();
                ctx.moveTo(x1, y);
                ctx.lineTo(x2, y);
                ctx.stroke();
                
                // ç®­å¤´
                ctx.fillStyle = isActive ? '#667eea' : '#ddd';
                ctx.beginPath();
                ctx.moveTo(x2 - 8, y - 6);
                ctx.lineTo(x2, y);
                ctx.lineTo(x2 - 8, y + 6);
                ctx.closePath();
                ctx.fill();
            }
            
            // ç»˜åˆ¶æ­¥éª¤æ¡†
            steps.forEach((step, idx) => {
                const x = startX + idx * (boxW + gapX);
                const y = topY;
                const isCurrent = idx === currentStep;
                const isPast = idx < currentStep;
                
                // èƒŒæ™¯
                if (step.highlight) {
                    ctx.fillStyle = isCurrent ? '#48bb78' : (isPast ? '#c6f6d5' : '#f0fff4');
                } else {
                    ctx.fillStyle = isCurrent ? '#667eea' : (isPast ? '#e8ecf4' : 'white');
                }
                
                // é˜´å½±
                if (isCurrent) {
                    ctx.shadowColor = step.highlight ? 'rgba(72, 187, 120, 0.4)' : 'rgba(102, 126, 234, 0.4)';
                    ctx.shadowBlur = 15;
                    ctx.shadowOffsetY = 5;
                }
                
                // åœ†è§’çŸ©å½¢
                ctx.beginPath();
                ctx.roundRect(x, y, boxW, boxH, 10);
                ctx.fill();
                
                ctx.shadowColor = 'transparent';
                ctx.shadowBlur = 0;
                ctx.shadowOffsetY = 0;
                
                // è¾¹æ¡†
                ctx.strokeStyle = step.highlight ? '#48bb78' : (isCurrent ? '#5a67d8' : (isPast ? '#667eea' : '#ddd'));
                ctx.lineWidth = isCurrent ? 3 : 2;
                ctx.stroke();
                
                // å›¾æ ‡
                ctx.font = '22px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(step.icon, x + boxW/2, y + 28);
                
                // æ ‡ç­¾
                ctx.font = isCurrent ? 'bold 12px Microsoft YaHei' : '11px Microsoft YaHei';
                ctx.fillStyle = isCurrent ? 'white' : '#333';
                ctx.fillText(step.label, x + boxW/2, y + 50);
                
                // æè¿°
                ctx.font = '10px Arial';
                ctx.fillStyle = isCurrent ? 'rgba(255,255,255,0.8)' : '#999';
                ctx.fillText(step.desc, x + boxW/2, y + 65);
            });
            
            // æ­¥éª¤ç¼–å·
            steps.forEach((step, idx) => {
                const x = startX + idx * (boxW + gapX) + boxW/2;
                const y = topY - 15;
                const isCurrent = idx === currentStep;
                const isPast = idx < currentStep;
                
                ctx.beginPath();
                ctx.arc(x, y, 12, 0, Math.PI * 2);
                ctx.fillStyle = isCurrent ? '#667eea' : (isPast ? '#a3bffa' : '#e2e8f0');
                ctx.fill();
                
                ctx.font = 'bold 11px Arial';
                ctx.fillStyle = isCurrent || isPast ? 'white' : '#666';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(idx + 1, x, y);
                ctx.textBaseline = 'alphabetic';
            });
            
            // åº•éƒ¨ä¿¡æ¯æ¡†
            const infoY = topY + boxH + 60;
            ctx.fillStyle = '#f0f4ff';
            ctx.beginPath();
            ctx.roundRect(60, infoY, width - 120, 180, 12);
            ctx.fill();
            ctx.strokeStyle = '#667eea';
            ctx.lineWidth = 2;
            ctx.stroke();
            
            // å½“å‰æ­¥éª¤è¯¦æƒ…
            const stepInfo = [
                { title: 'ä¿¡å·è¾“å…¥', desc: 'è¯»å–éŸ³é¢‘æ–‡ä»¶ï¼Œè·å–é‡‡æ ·ç‡Fså’Œä¿¡å·æ•°æ®x[n]', formula: '' },
                { title: 'åˆ†å¸§å¤„ç†', desc: 'å°†ä¿¡å·åˆ†æˆé‡å çš„çŸ­å¸§', formula: 'å¸§é•¿Nï¼Œå¸§ç§»Raï¼Œé‡å ç‡ = (N-Ra)/N' },
                { title: 'åŠ çª—å¤„ç†', desc: 'å¯¹æ¯å¸§ä¹˜ä»¥æ±‰æ˜çª—ï¼Œå‡å°‘é¢‘è°±æ³„æ¼', formula: 'w[n] = 0.54 - 0.46cos(2Ï€n/N)' },
                { title: 'FFTåˆ†æ', desc: 'å¯¹æ¯å¸§è¿›è¡ŒFFTï¼Œå¾—åˆ°é¢‘è°±çŸ©é˜µ', formula: 'X[k] = |X[k]|e^(jÏ†[k])' },
                { title: 'ä¿®æ”¹é¢‘è°±', desc: 'ä½¿ç”¨é¢‘åŸŸæ’å€¼æˆ–ç›¸ä½å£°ç å™¨ä¿®æ”¹', formula: 'Ï†out = Ï†out + Ï‰Â·Rs ï¼ˆç›¸ä½å£°ç å™¨ï¼‰' },
                { title: 'IFFTåå˜æ¢', desc: 'å¯¹ä¿®æ”¹åçš„é¢‘è°±è¿›è¡ŒIFFT', formula: 'x[n] = IFFT(X\'[k])' },
                { title: 'OLAé‡å»º', desc: 'åŠ çª—åæŒ‰å¸§ç§»å åŠ é‡å»º', formula: 'y[n] = Î£ w[n]Â·x_frame[n]' }
            ];
            
            const info = stepInfo[currentStep];
            
            ctx.font = 'bold 18px Microsoft YaHei';
            ctx.fillStyle = '#5a67d8';
            ctx.textAlign = 'left';
            ctx.fillText(`æ­¥éª¤ ${currentStep + 1}: ${info.title}`, 90, infoY + 35);
            
            ctx.font = '14px Microsoft YaHei';
            ctx.fillStyle = '#333';
            ctx.fillText(info.desc, 90, infoY + 65);
            
            if (info.formula) {
                ctx.fillStyle = '#f7fafc';
                ctx.beginPath();
                ctx.roundRect(90, infoY + 85, width - 200, 40, 8);
                ctx.fill();
                ctx.strokeStyle = '#9f7aea';
                ctx.lineWidth = 1;
                ctx.stroke();
                
                ctx.font = '14px Consolas, Monaco, monospace';
                ctx.fillStyle = '#5a67d8';
                ctx.fillText(info.formula, 110, infoY + 112);
            }
            
            // è¿›åº¦æ¡
            ctx.fillStyle = '#e2e8f0';
            ctx.beginPath();
            ctx.roundRect(90, infoY + 145, width - 200, 8, 4);
            ctx.fill();
            
            ctx.fillStyle = '#667eea';
            ctx.beginPath();
            ctx.roundRect(90, infoY + 145, (width - 200) * ((currentStep + 1) / 7), 8, 4);
            ctx.fill();
            
            ctx.font = '12px Arial';
            ctx.fillStyle = '#666';
            ctx.textAlign = 'right';
            ctx.fillText(`${currentStep + 1} / 7`, width - 110, infoY + 155);
            
            requestAnimationFrame(animateWorkflow);
        }

        // ==================== åˆ†å¸§åŠ¨ç”» ====================
        function animateFraming() {
            const canvas = document.getElementById('framingCanvas');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            const width = canvas.width, height = canvas.height;
            
            framingFrame++;
            const animT = (framingFrame % 180) / 180;
            
            ctx.clearRect(0, 0, width, height);
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, width, height);
            
            const leftX = 50;
            
            // åŸå§‹ä¿¡å·åˆ†å¸§
            ctx.font = 'bold 14px Microsoft YaHei';
            ctx.fillStyle = '#333';
            ctx.textAlign = 'left';
            ctx.fillText('åŸå§‹ä¿¡å·åˆ†å¸§ï¼ˆå¸§é•¿Nï¼Œå¸§ç§»Ra = 25%Nï¼Œ75%é‡å ï¼‰', leftX, 25);
            
            ctx.strokeStyle = '#ccc';
            ctx.lineWidth = 1.5;
            ctx.beginPath();
            for (let i = 0; i < 700; i++) {
                const t = (i / 700) * 15 * Math.PI;
                const py = 85 + Math.sin(t + animT * 2) * 30;
                if (i === 0) ctx.moveTo(leftX + i, py);
                else ctx.lineTo(leftX + i, py);
            }
            ctx.stroke();
            
            const frameN = 140, hopSize = 35;
            for (let f = 0; f < 5; f++) {
                const frameX = leftX + f * hopSize;
                
                if (f > 0) {
                    ctx.fillStyle = 'rgba(102, 126, 234, 0.2)';
                    ctx.fillRect(frameX, 45, frameN - hopSize, 80);
                }
                
                ctx.strokeStyle = '#667eea';
                ctx.lineWidth = 2;
                ctx.strokeRect(frameX, 45, frameN, 80);
                
                ctx.fillStyle = '#667eea';
                ctx.font = '11px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(`å¸§${f+1}`, frameX + frameN/2, 135);
            }
            
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(leftX, 145);
            ctx.lineTo(leftX + hopSize, 145);
            ctx.stroke();
            ctx.font = '11px Arial';
            ctx.fillStyle = '#333';
            ctx.textAlign = 'center';
            ctx.fillText('Ra', leftX + hopSize/2, 157);
            
            ctx.beginPath();
            ctx.moveTo(leftX, 165);
            ctx.lineTo(leftX + frameN, 165);
            ctx.stroke();
            ctx.fillText('N', leftX + frameN/2, 177);
            
            // æ‹‰ä¼¸
            ctx.font = 'bold 13px Microsoft YaHei';
            ctx.fillStyle = '#27ae60';
            ctx.textAlign = 'left';
            ctx.fillText('æ‹‰ä¼¸ï¼šè¾“å‡ºå¸§ç§» Rs > Ra', leftX, 205);
            
            const stretchHop = 55;
            for (let f = 0; f < 4; f++) {
                const frameX = leftX + f * stretchHop;
                
                if (f > 0) {
                    ctx.fillStyle = 'rgba(39, 174, 96, 0.15)';
                    ctx.fillRect(frameX, 220, frameN - stretchHop, 60);
                }
                
                ctx.strokeStyle = '#27ae60';
                ctx.lineWidth = 2;
                ctx.strokeRect(frameX, 220, frameN, 60);
            }
            
            ctx.strokeStyle = '#27ae60';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(leftX, 290);
            ctx.lineTo(leftX + stretchHop, 290);
            ctx.stroke();
            ctx.fillStyle = '#27ae60';
            ctx.font = '11px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Rs > Ra', leftX + stretchHop/2, 302);
            
            ctx.font = '12px Arial';
            ctx.textAlign = 'left';
            ctx.fillText('â†’ ä¿¡å·å˜é•¿ï¼Œæ’­æ”¾å˜æ…¢', leftX + 280, 255);
            
            // å‹ç¼©
            const rightSection = leftX + 450;
            ctx.font = 'bold 13px Microsoft YaHei';
            ctx.fillStyle = '#e74c3c';
            ctx.fillText('å‹ç¼©ï¼šè¾“å‡ºå¸§ç§» Rs < Ra', rightSection, 205);
            
            const compressHop = 20;
            for (let f = 0; f < 6; f++) {
                const frameX = rightSection + f * compressHop;
                
                if (f > 0) {
                    ctx.fillStyle = 'rgba(231, 76, 60, 0.15)';
                    ctx.fillRect(frameX, 220, frameN - compressHop, 60);
                }
                
                ctx.strokeStyle = '#e74c3c';
                ctx.lineWidth = 2;
                ctx.strokeRect(frameX, 220, frameN, 60);
            }
            
            ctx.strokeStyle = '#e74c3c';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(rightSection, 290);
            ctx.lineTo(rightSection + compressHop, 290);
            ctx.stroke();
            ctx.fillStyle = '#e74c3c';
            ctx.font = '11px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Rs < Ra', rightSection + compressHop/2, 302);
            
            ctx.font = '12px Arial';
            ctx.textAlign = 'left';
            ctx.fillText('â†’ ä¿¡å·å˜çŸ­ï¼Œæ’­æ”¾å˜å¿«', rightSection + 180, 255);
            
            // åº•éƒ¨è¯´æ˜
            ctx.fillStyle = '#f7fafc';
            ctx.fillRect(leftX, height - 70, width - leftX * 2, 55);
            ctx.strokeStyle = '#667eea';
            ctx.lineWidth = 2;
            ctx.strokeRect(leftX, height - 70, width - leftX * 2, 55);
            
            ctx.font = '13px Microsoft YaHei';
            ctx.fillStyle = '#333';
            ctx.textAlign = 'center';
            ctx.fillText('ğŸ’¡ å˜é€Ÿå› å­ Î± = Rs / Ra    (Î± > 1 æ‹‰ä¼¸å‡é€Ÿï¼ŒÎ± < 1 å‹ç¼©åŠ é€Ÿ)', width/2, height - 40);
            
            requestAnimationFrame(animateFraming);
        }

        // ==================== é¡µé¢åŠ è½½åˆå§‹åŒ– ====================
        window.addEventListener('load', function() {
            drawDiscontinuityStatic();
            drawSpectrum();
            drawFreqInterpolation();
            drawWindowing();
            drawFusion();
            animatePhaseVocoder();
            animateWorkflow();
            animateFraming();
        });
    </script>
</body>
</html>