<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>DSP é¡¹ç›®2 - éŸ³é¢‘å˜é€Ÿå®éªŒä»£ç æ¨¡æ¿</title>
    <style>
        body { font-family: 'Segoe UI', Consolas, 'Microsoft YaHei', sans-serif; background: #f4f7f6; padding: 20px; color: #333; }
        .container { max-width: 1200px; margin: 0 auto; }
        
        .control-panel {
            position: sticky; top: 0; z-index: 100;
            background: white; padding: 15px; margin-bottom: 20px;
            border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            display: flex; justify-content: space-between; align-items: center;
        }
        .control-btn {
            background: #667eea; color: white; border: none; padding: 8px 16px;
            border-radius: 4px; cursor: pointer; font-weight: bold; margin-left: 10px;
        }
        .control-btn:hover { background: #5a67d8; }
        .control-btn.secondary { background: #6c757d; }

        .file-block { background: white; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); margin-bottom: 20px; overflow: hidden; }
        
        .file-header { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
            color: white; padding: 15px 20px; 
            display: flex; justify-content: space-between; align-items: center; 
            cursor: pointer; user-select: none;
        }
        .file-header:hover { opacity: 0.9; }
        
        .file-title { font-weight: bold; display: flex; align-items: center; }
        .arrow-icon { display: inline-block; margin-right: 10px; transition: transform 0.3s; }
        .file-block.collapsed .arrow-icon { transform: rotate(-90deg); }
        
        .file-content { display: block; }
        .file-block.collapsed .file-content { display: none; }

        .copy-btn { background: #48bb78; border: none; color: white; padding: 4px 12px; border-radius: 4px; cursor: pointer; font-size: 0.9em; }
        .copy-btn:hover { background: #38a169; }

        pre { margin: 0; padding: 20px; overflow-x: auto; line-height: 1.8; font-size: 13px; background: #f8f9fa; border-top: 1px solid #e9ecef; }
        
        /* ä»£ç é«˜äº®æ ·å¼ */
        .keyword { color: #0000ff; font-weight: bold; }
        .comment { color: #228b22; font-style: italic; }
        .string { color: #a020f0; }
        .number { color: #ff0000; }
        .todo { background: #fff3cd; color: #856404; padding: 2px 6px; border-radius: 3px; border: 1px solid #ffeeba; font-weight: bold; }
        
        /* Banneræ ·å¼ */
        .info-banner { background: linear-gradient(135deg, #e7f3ff 0%, #f0f7ff 100%); border-left: 4px solid #667eea; padding: 15px; margin-bottom: 20px; border-radius: 4px; }
        .warning-banner { background: linear-gradient(135deg, #fff3cd 0%, #fffdf7 100%); border-left: 4px solid #ed8936; padding: 15px; margin-bottom: 20px; border-radius: 4px; }
        .success-banner { background: linear-gradient(135deg, #f0fff4 0%, #f7fafc 100%); border-left: 4px solid #48bb78; padding: 15px; margin-bottom: 20px; border-radius: 4px; }

        code { background: #edf2f7; padding: 2px 6px; border-radius: 3px; color: #667eea; font-size: 0.95em; }
    </style>
</head>
<body>
    <div class="container">
        <div class="control-panel">
            <h2 style="margin:0; color:#667eea;">ğŸµ DSP é¡¹ç›®2 - éŸ³é¢‘å˜é€Ÿå®éªŒä»£ç æ¨¡æ¿</h2>
            <div>
                <button class="control-btn" onclick="expandAll()">å…¨éƒ¨å±•å¼€</button>
                <button class="control-btn secondary" onclick="collapseAll()">å…¨éƒ¨æŠ˜å </button>
            </div>
        </div>

        <div class="info-banner">
            <strong>ğŸ“Œ é¡¹ç›®è¯´æ˜ï¼š</strong>
            <ul style="margin:5px 0 0 20px; padding:0; line-height:1.8;">
                <li>æœ¬é¡¹ç›®å®ç°åŸºäº<strong>ç›¸ä½å£°ç å™¨ï¼ˆPhase Vocoderï¼‰</strong>çš„éŸ³é¢‘æ—¶é—´æ‹‰ä¼¸æŠ€æœ¯</li>
                <li>ä»£ç ä¸­ <code>?</code> æ ‡è®°å¤„éœ€è¦å¡«å†™åˆé€‚çš„ä»£ç </li>
                <li>å®Œæˆex1-ex6åï¼Œä½¿ç”¨ <code>test_project2.p</code> è¿›è¡Œè‡ªåŠ¨æ£€æŸ¥</li>
                <li>å…¨éƒ¨å®Œæˆåè¿è¡Œ <code>ex0_synthesize_all.m</code> æŸ¥çœ‹å®Œæ•´æ•ˆæœï¼Œæ”¶å¬å˜é€Ÿåçš„éŸ³é¢‘</li>
            </ul>
        </div>

        <div class="warning-banner">
            <strong>âš ï¸ æäº¤æ¸…å•ï¼š</strong>
            <ul style="margin:5px 0 0 20px; padding:0;">
                <li>ex1_frame_signal.mï¼ˆä¿¡å·åˆ†å¸§ï¼‰</li>
                <li>ex2_window_signal.mï¼ˆåŠ çª—å¤„ç†ï¼‰</li>
                <li>ex3_compute_spectrum.mï¼ˆé¢‘è°±è®¡ç®—ï¼‰</li>
                <li>ex4_modify_STFT.mï¼ˆé¢‘åŸŸæ’å€¼æ³•ï¼‰</li>
                <li>ex5_reconstruct_signal.mï¼ˆä¿¡å·é‡å»ºï¼‰</li>
                <li>ex6_Phase_Vocoder.mï¼ˆç›¸ä½å£°ç å™¨ - è¿›é˜¶ï¼‰</li>
            </ul>
        </div>

        <div class="success-banner">
            <strong>âœ… å®éªŒæµç¨‹ï¼š</strong>
            <ol style="margin:5px 0 0 20px; padding:0; line-height:1.8;">
                <li>é˜…è¯»å®éªŒæ‰‹å†Œã€ŠéŸ³é¢‘å˜é€Ÿå®éªŒã€‹ï¼ˆDSP-Proj2_handoutï¼‰</li>
                <li>æŒ‰é¡ºåºå®Œæˆex1-ex6ï¼Œå¡«å†™æ ‡è®°ä¸º <code>?</code> çš„ä»£ç </li>
                <li>è¿è¡Œ <code>test_project2.p</code> æ£€æŸ¥ä»£ç ï¼ˆè¾“å…¥1-6æ£€æŸ¥å¯¹åº”æ¨¡å—ï¼‰</li>
                <li>å®Œæˆåè¾“å…¥0ï¼Œæäº¤å­¦å·å§“åï¼Œç”ŸæˆåŠ å¯†æˆç»©</li>
                <li>å°†æ‰€æœ‰å®Œæˆåçš„Mæ–‡ä»¶å‹ç¼©åˆ°ã€å­¦å·_å§“å.zipã€‘æäº¤åˆ°å­¦ä¹ é€š</li>
            </ol>
        </div>

        <!-- ex0 ä¸»å‡½æ•° -->
        <div class="file-block">
            <div class="file-header" onclick="toggleBlock(this)">
                <span class="file-title">
                    <span class="arrow-icon">â–¼</span>
                    ğŸ“„ ex0_synthesize_all.mï¼ˆä¸»å‡½æ•°ï¼Œæ— éœ€ä¿®æ”¹ï¼‰
                </span>
                <button class="copy-btn" onclick="copyCode(event, 'code0')">å¤åˆ¶ä»£ç </button>
            </div>
            <div class="file-content">
                <pre id="code0">%% ========================================================================
%  ex0_synthesize_all.m - éŸ³é¢‘å˜é€Ÿå®éªŒä¸»æ§ç¨‹åº
%  ========================================================================
%  åŠŸèƒ½ï¼šè°ƒç”¨ ex1-ex6 å‡½æ•°å®ç°åŸºäºç›¸ä½å£°ç å™¨/é¢‘åŸŸæ’å€¼çš„éŸ³é¢‘æ—¶é—´æ‹‰ä¼¸
%  å…¼å®¹ç‰ˆæœ¬ï¼šMATLAB 2014b åŠä»¥ä¸Š
%  ========================================================================

clc;            % æ¸…é™¤å‘½ä»¤çª—å£
clear;          % æ¸…é™¤å·¥ä½œåŒºå˜é‡
close all;      % å…³é—­æ‰€æœ‰æ‰“å¼€çš„å›¾å½¢çª—å£

%% ========================== ç¨‹åºå¼€å§‹æç¤º ================================
fprintf('\n');
fprintf('================================================================\n');
fprintf('      éŸ³é¢‘å˜é€Ÿå®éªŒ - åŸºäºç›¸ä½å£°ç å™¨çš„æ—¶é—´æ‹‰ä¼¸\n');
fprintf('             Digital Signal Processing\n');
fprintf('================================================================\n');
fprintf('\n');

%% ========================== æ­¥éª¤1ï¼šè¯»å–éŸ³é¢‘æ–‡ä»¶ ==========================
fprintf('----------------------------------------------------------------\n');
fprintf('[æ­¥éª¤ 1/8] è¯»å–éŸ³é¢‘æ–‡ä»¶...\n');
fprintf('----------------------------------------------------------------\n');

try
    audioFile = './audio/orig.wav';  % ä½¿ç”¨å•å¼•å·ï¼ˆå…¼å®¹2014bï¼‰
    [x, fs] = audioread(audioFile);
    fprintf('  [OK] éŸ³é¢‘æ–‡ä»¶è¯»å–æˆåŠŸ!\n');
    fprintf('    - æ–‡ä»¶è·¯å¾„: %s\n', audioFile);
    fprintf('    - é‡‡æ ·ç‡: %d Hz\n', fs);
    fprintf('    - ä¿¡å·é•¿åº¦: %d æ ·æœ¬ç‚¹\n', length(x));
    fprintf('    - éŸ³é¢‘æ—¶é•¿: %.2f ç§’\n', length(x)/fs);
    if size(x, 2) > 1
        x = x(:, 1);  % å¦‚æœæ˜¯ç«‹ä½“å£°ï¼Œå–å·¦å£°é“
        fprintf('    - æ³¨æ„: æ£€æµ‹åˆ°ç«‹ä½“å£°ï¼Œå·²è½¬æ¢ä¸ºå•å£°é“\n');
    end
catch ME
    fprintf('  [ERROR] æ— æ³•è¯»å–éŸ³é¢‘æ–‡ä»¶!\n');
    fprintf('    - é”™è¯¯ä¿¡æ¯: %s\n', ME.message);
    fprintf('    - è¯·æ£€æŸ¥æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®\n');
    return;
end
fprintf('\n');

%% ========================== æ­¥éª¤2ï¼šå‚æ•°è®¾ç½® ==============================
fprintf('----------------------------------------------------------------\n');
fprintf('[æ­¥éª¤ 2/8] å‚æ•°è®¾ç½®...\n');
fprintf('----------------------------------------------------------------\n');

Lwin = 1024;           % æ¯å¸§çš„é•¿åº¦ï¼ˆé€šå¸¸ä¸º 2 çš„å¹‚æ¬¡ï¼‰
Ra = Lwin / 4;         % å¸§ç§» (Hop size)ï¼Œé€šå¸¸ä¸ºå¸§é•¿çš„ 1/4 æˆ– 1/2
stretchFactor = 2;     % æ—¶é—´æ‹‰ä¼¸å› å­

fprintf('  [OK] å‚æ•°è®¾ç½®å®Œæˆ!\n');
fprintf('    - å¸§é•¿ (Lwin): %d æ ·æœ¬ç‚¹\n', Lwin);
fprintf('    - å¸§ç§» (Ra): %d æ ·æœ¬ç‚¹ (%.1f%% é‡å )\n', Ra, (1-Ra/Lwin)*100);
fprintf('    - æ‹‰ä¼¸å› å­: %.2f\n', stretchFactor);
if stretchFactor > 1
    fprintf('    - æ•ˆæœ: éŸ³é¢‘å°†è¢«æ‹‰ä¼¸ä¸ºåŸæ¥çš„ %.1f å€ï¼ˆå‡é€Ÿæ’­æ”¾ï¼‰\n', stretchFactor);
elseif stretchFactor < 1
    fprintf('    - æ•ˆæœ: éŸ³é¢‘å°†è¢«å‹ç¼©ä¸ºåŸæ¥çš„ %.1f å€ï¼ˆåŠ é€Ÿæ’­æ”¾ï¼‰\n', stretchFactor);
else
    fprintf('    - æ•ˆæœ: éŸ³é¢‘é•¿åº¦ä¿æŒä¸å˜\n');
end
fprintf('\n');

%% ========================== æ­¥éª¤3ï¼šä¿¡å·åˆ†å¸§ ==============================
fprintf('----------------------------------------------------------------\n');
fprintf('[æ­¥éª¤ 3/8] è°ƒç”¨ ex1_frame_signal è¿›è¡Œä¿¡å·åˆ†å¸§...\n');
fprintf('----------------------------------------------------------------\n');

try
    tic;
    [x_mat] = ex1_frame_signal(x, Lwin, Ra);
    time_ex1 = toc;
    
    % ç»Ÿä¸€å‘½åå›¾å½¢çª—å£
    set(gcf, 'Name', 'åˆ†å¸§ç»“æœ - ex1_frame_signal', 'NumberTitle', 'off');
    
    fprintf('  [OK] ex1_frame_signal æ‰§è¡ŒæˆåŠŸ! (è€—æ—¶ %.3f ç§’)\n', time_ex1);
    fprintf('    - è¾“å…¥: é•¿åº¦ä¸º %d çš„ä¸€ç»´ä¿¡å·\n', length(x));
    fprintf('    - è¾“å‡º: %d x %d çš„åˆ†å¸§çŸ©é˜µ\n', size(x_mat, 1), size(x_mat, 2));
    fprintf('    - æ€»å¸§æ•°: %d å¸§\n', size(x_mat, 2));
    fprintf('\n');
    fprintf('  [å›¾å½¢è¾“å‡º - æ¥è‡ª ex1_frame_signal]\n');
    fprintf('    - å›¾å½¢å†…å®¹: åŸå§‹ä¿¡å·ä¸å„å¸§ä¿¡å·çš„å åŠ æ˜¾ç¤º\n');
    fprintf('    - è¯´æ˜: ä¸åŒé¢œè‰²ä»£è¡¨ä¸åŒçš„å¸§ï¼Œå¯è§‚å¯Ÿå¸§é—´é‡å æƒ…å†µ\n');
catch ME
    fprintf('  [ERROR] ex1_frame_signal æ‰§è¡Œå¤±è´¥!\n');
    fprintf('    - é”™è¯¯ä¿¡æ¯: %s\n', ME.message);
    return;
end
fprintf('\n');

%% ========================== æ­¥éª¤4ï¼šåŠ çª—å¤„ç† ==============================
fprintf('----------------------------------------------------------------\n');
fprintf('[æ­¥éª¤ 4/8] è°ƒç”¨ ex2_window_signal è¿›è¡ŒåŠ çª—å¤„ç†...\n');
fprintf('----------------------------------------------------------------\n');

try
    tic;
    [W_x_mat] = ex2_window_signal(x_mat, Lwin);
    time_ex2 = toc;
    
    % ç»Ÿä¸€å‘½åå›¾å½¢çª—å£
    set(gcf, 'Name', 'åŠ çª—å¤„ç† - ex2_window_signal', 'NumberTitle', 'off');
    
    fprintf('  [OK] ex2_window_signal æ‰§è¡ŒæˆåŠŸ! (è€—æ—¶ %.3f ç§’)\n', time_ex2);
    fprintf('    - çª—å‡½æ•°ç±»å‹: Hann çª—\n');
    fprintf('    - çª—å£é•¿åº¦: %d æ ·æœ¬ç‚¹\n', Lwin);
    fprintf('    - è¾“å‡ºçŸ©é˜µå¤§å°: %d x %d\n', size(W_x_mat, 1), size(W_x_mat, 2));
    fprintf('\n');
    fprintf('  [å›¾å½¢è¾“å‡º - æ¥è‡ª ex2_window_signal]\n');
    fprintf('    - å­å›¾1: åŸå§‹ä¿¡å·çš„ç¬¬ä¸€å¸§ï¼ˆæœªåŠ çª—ï¼‰\n');
    fprintf('    - å­å›¾2: Hann çª—å‡½æ•°å½¢çŠ¶\n');
    fprintf('    - å­å›¾3: åŠ çª—åçš„ç¬¬ä¸€å¸§ä¿¡å·ï¼ˆä¸¤ç«¯å¹…åº¦å‡å°ï¼‰\n');
catch ME
    fprintf('  [ERROR] ex2_window_signal æ‰§è¡Œå¤±è´¥!\n');
    fprintf('    - é”™è¯¯ä¿¡æ¯: %s\n', ME.message);
    return;
end
fprintf('\n');

%% ========================== æ­¥éª¤5ï¼šè®¡ç®—é¢‘è°± ==============================
fprintf('----------------------------------------------------------------\n');
fprintf('[æ­¥éª¤ 5/8] è°ƒç”¨ ex3_compute_spectrum è®¡ç®—é¢‘è°±...\n');
fprintf('----------------------------------------------------------------\n');

try
    tic;
    [W_X_MAT] = ex3_compute_spectrum(W_x_mat);
    time_ex3 = toc;
    
    % ç»Ÿä¸€å‘½åå›¾å½¢çª—å£
    set(gcf, 'Name', 'é¢‘è°±åˆ†æ - ex3_compute_spectrum', 'NumberTitle', 'off');
    
    fprintf('  [OK] ex3_compute_spectrum æ‰§è¡ŒæˆåŠŸ! (è€—æ—¶ %.3f ç§’)\n', time_ex3);
    fprintf('    - å˜æ¢ç±»å‹: FFT (å¿«é€Ÿå‚…é‡Œå¶å˜æ¢)\n');
    fprintf('    - é¢‘è°±çŸ©é˜µå¤§å°: %d x %d (å¤æ•°çŸ©é˜µ)\n', size(W_X_MAT, 1), size(W_X_MAT, 2));
    fprintf('    - é¢‘ç‡åˆ†è¾¨ç‡: %.2f Hz\n', fs/Lwin);
    fprintf('\n');
    fprintf('  [å›¾å½¢è¾“å‡º - æ¥è‡ª ex3_compute_spectrum]\n');
    fprintf('    - å­å›¾1: åŠ çª—åç¬¬ä¸€å¸§çš„æ—¶åŸŸæ³¢å½¢\n');
    fprintf('    - å­å›¾2: ç¬¬ä¸€å¸§çš„å¹…åº¦è°±ï¼ˆæ˜¾ç¤ºå„é¢‘ç‡æˆåˆ†å¼ºåº¦ï¼‰\n');
    fprintf('    - å­å›¾3: ç¬¬ä¸€å¸§çš„ç›¸ä½è°±ï¼ˆæ˜¾ç¤ºå„é¢‘ç‡æˆåˆ†ç›¸ä½ï¼‰\n');
catch ME
    fprintf('  [ERROR] ex3_compute_spectrum æ‰§è¡Œå¤±è´¥!\n');
    fprintf('    - é”™è¯¯ä¿¡æ¯: %s\n', ME.message);
    return;
end
fprintf('\n');

%% ========================== æ­¥éª¤6ï¼šä¿®æ”¹é¢‘è°± ==============================
fprintf('----------------------------------------------------------------\n');
fprintf('[æ­¥éª¤ 6/8] ä¿®æ”¹é¢‘è°±ï¼ˆæ—¶é—´æ‹‰ä¼¸æ ¸å¿ƒæ­¥éª¤ï¼‰...\n');
fprintf('----------------------------------------------------------------\n');

usePhaseVocoder = true;  % true: ç›¸ä½å£°ç å™¨æ³•; false: é¢‘åŸŸæ’å€¼æ³•

if ~usePhaseVocoder
    % -------------------- æ–¹æ³•1ï¼šé¢‘åŸŸæ’å€¼æ³• --------------------
    fprintf('  -> ä½¿ç”¨æ–¹æ³•: é¢‘åŸŸæ’å€¼æ³• (ex4_modify_STFT)\n');
    fprintf('    - åŸç†: é€šè¿‡çº¿æ€§æ’å€¼è°ƒæ•´é¢‘è°±çŸ©é˜µçš„å¸§æ•°\n');
    fprintf('\n');
    
    try
        tic;
        [freq_mat_modified] = ex4_modify_STFT(W_X_MAT, stretchFactor);
        time_ex4 = toc;
        
        % ç»Ÿä¸€å‘½åå›¾å½¢çª—å£
        set(gcf, 'Name', 'é¢‘åŸŸæ’å€¼ - ex4_modify_STFT', 'NumberTitle', 'off');
        
        fprintf('  [OK] ex4_modify_STFT æ‰§è¡ŒæˆåŠŸ! (è€—æ—¶ %.3f ç§’)\n', time_ex4);
        fprintf('    - åŸå§‹å¸§æ•°: %d\n', size(W_X_MAT, 2));
        fprintf('    - æ‹‰ä¼¸åå¸§æ•°: %d\n', size(freq_mat_modified, 2));
        fprintf('    - é‡å»ºå¸§ç§»: %d (ä½¿ç”¨åŸå§‹å¸§ç§» Ra)\n', Ra);
        fprintf('\n');
        fprintf('  [å›¾å½¢è¾“å‡º - æ¥è‡ª ex4_modify_STFT]\n');
        fprintf('    - å­å›¾1: åŸå§‹æœ€ä½é¢‘ç‡åˆ†é‡éšæ—¶é—´å˜åŒ–\n');
        fprintf('    - å­å›¾2: æ’å€¼åæœ€ä½é¢‘ç‡åˆ†é‡éšæ—¶é—´å˜åŒ–\n');
        fprintf('    - è¯´æ˜: å¯è§‚å¯Ÿåˆ°å¸§æ•°å˜åŒ–ï¼Œä½†é¢‘ç‡æˆåˆ†å½¢çŠ¶ä¿æŒ\n');
        
        % è®¾ç½®é‡å»ºç”¨çš„å¸§ç§»
        Rs_reconstruct = Ra;
    catch ME
        fprintf('  [ERROR] ex4_modify_STFT æ‰§è¡Œå¤±è´¥!\n');
        fprintf('    - é”™è¯¯ä¿¡æ¯: %s\n', ME.message);
        return;
    end
    
else
    % -------------------- æ–¹æ³•2ï¼šç›¸ä½å£°ç å™¨æ³• --------------------
    fprintf('  -> ä½¿ç”¨æ–¹æ³•: ç›¸ä½å£°ç å™¨æ³• (ex6_Phase_Vocoder)\n');
    fprintf('    - åŸç†: ä¿æŒå¹…åº¦ä¸å˜ï¼Œé€šè¿‡ç›¸ä½è°ƒæ•´å®ç°æ—¶é—´æ‹‰ä¼¸\n');
    fprintf('    - ä¼˜åŠ¿: é¿å…å¸§é—´ç›¸ä½ä¸è¿ç»­ï¼ŒéŸ³è´¨æ›´å¥½\n');
    fprintf('\n');
    
    Rs = round(Ra * stretchFactor);
    fprintf('    - åŸå§‹å¸§ç§» Ra: %d\n', Ra);
    fprintf('    - æ‹‰ä¼¸åå¸§ç§» Rs: %d\n', Rs);
    fprintf('\n');
    
    try
        tic;
        [freq_mat_modified] = ex6_Phase_Vocoder(W_X_MAT, Lwin, Ra, Rs);
        time_ex6 = toc;
        
        % ç»Ÿä¸€å‘½åå›¾å½¢çª—å£
        set(gcf, 'Name', 'ç›¸ä½å£°ç å™¨ - ex6_Phase_Vocoder', 'NumberTitle', 'off');
        
        fprintf('  [OK] ex6_Phase_Vocoder æ‰§è¡ŒæˆåŠŸ! (è€—æ—¶ %.3f ç§’)\n', time_ex6);
        fprintf('    - è¾“å…¥å¸§æ•°: %d\n', size(W_X_MAT, 2));
        fprintf('    - è¾“å‡ºå¸§æ•°: %d (å°‘1å¸§ç”¨äºç›¸ä½å·®è®¡ç®—)\n', size(freq_mat_modified, 2));
        fprintf('    - é‡å»ºå¸§ç§»: %d (ä½¿ç”¨æ‹‰ä¼¸åå¸§ç§» Rs)\n', Rs);
        fprintf('\n');
        fprintf('  [å›¾å½¢è¾“å‡º - æ¥è‡ª ex6_Phase_Vocoder]\n');
        fprintf('    - å­å›¾1-2: åŸå§‹ä¸å¤„ç†åçš„å¹…åº¦è°±å¯¹æ¯”\n');
        fprintf('    - å­å›¾3-4: åŸå§‹ä¸å¤„ç†åçš„ç›¸ä½è°±å¯¹æ¯”\n');
        fprintf('    - è¯´æ˜: å¹…åº¦åº”åŸºæœ¬ä¿æŒï¼Œç›¸ä½ç»è¿‡é‡æ–°ç´¯ç§¯\n');
        
        % è®¾ç½®é‡å»ºç”¨çš„å¸§ç§»
        Rs_reconstruct = Rs;
    catch ME
        fprintf('  [ERROR] ex6_Phase_Vocoder æ‰§è¡Œå¤±è´¥!\n');
        fprintf('    - é”™è¯¯ä¿¡æ¯: %s\n', ME.message);
        return;
    end
end
fprintf('\n');

%% ========================== æ­¥éª¤7ï¼šä¿¡å·é‡å»º ==============================
fprintf('----------------------------------------------------------------\n');
fprintf('[æ­¥éª¤ 7/8] è°ƒç”¨ ex5_reconstruct_signal é‡å»ºä¿¡å·...\n');
fprintf('----------------------------------------------------------------\n');

try
    tic;
    [outputSignal] = ex5_reconstruct_signal(freq_mat_modified, Lwin, Rs_reconstruct);
    time_ex5 = toc;
    
    fprintf('  [OK] ex5_reconstruct_signal æ‰§è¡ŒæˆåŠŸ! (è€—æ—¶ %.3f ç§’)\n', time_ex5);
    fprintf('    - é‡å»ºæ–¹æ³•: IFFT + Hammingçª— + é‡å ç›¸åŠ (OLA)\n');
    fprintf('    - ä½¿ç”¨å¸§ç§»: %d\n', Rs_reconstruct);
    fprintf('    - è¾“å‡ºä¿¡å·é•¿åº¦: %d æ ·æœ¬ç‚¹\n', length(outputSignal));
    fprintf('    - è¾“å‡ºéŸ³é¢‘æ—¶é•¿: %.2f ç§’\n', length(outputSignal)/fs);
    fprintf('    - å®é™…æ‹‰ä¼¸æ¯”ä¾‹: %.2f å€\n', length(outputSignal)/length(x));
catch ME
    fprintf('  [ERROR] ex5_reconstruct_signal æ‰§è¡Œå¤±è´¥!\n');
    fprintf('    - é”™è¯¯ä¿¡æ¯: %s\n', ME.message);
    return;
end
fprintf('\n');

%% ========================== æ­¥éª¤8ï¼šæ’­æ”¾å’Œç»˜å›¾ ============================
fprintf('----------------------------------------------------------------\n');
fprintf('[æ­¥éª¤ 8/8] æ’­æ”¾é‡æ„éŸ³é¢‘å¹¶ç»˜åˆ¶å¯¹æ¯”å›¾...\n');
fprintf('----------------------------------------------------------------\n');

% æ’­æ”¾é‡æ„åçš„éŸ³é¢‘
fprintf('  >> æ­£åœ¨æ’­æ”¾é‡æ„åçš„éŸ³é¢‘...\n');
fprintf('    - é¢„è®¡æ’­æ”¾æ—¶é•¿: %.2f ç§’\n', length(outputSignal)/fs);
sound(outputSignal, fs);

% åˆ›å»ºæ—¶é—´è½´
t_orig = (0:length(x)-1) / fs;
t_recon = (0:length(outputSignal)-1) / fs;

% åˆ›å»ºå›¾å½¢çª—å£è¿›è¡Œå¯¹æ¯”ç»˜å›¾ï¼ˆç»Ÿä¸€å‘½åé£æ ¼ï¼‰
figure;
set(gcf, 'Name', 'éŸ³é¢‘å˜é€Ÿç»“æœå¯¹æ¯” - ex0_synthesize_all', 'NumberTitle', 'off');

% ç»˜åˆ¶åŸå§‹éŸ³é¢‘ä¿¡å·
subplot(2, 1, 1);
plot(t_orig, x, 'b', 'LineWidth', 0.5);
title('åŸå§‹éŸ³é¢‘ä¿¡å·');
xlabel('æ—¶é—´ (ç§’)');
ylabel('å¹…åº¦');
xlim([0, max(t_orig)]);
grid on;

% ç»˜åˆ¶é‡æ„åçš„éŸ³é¢‘ä¿¡å·
subplot(2, 1, 2);
plot(t_recon, outputSignal, 'r', 'LineWidth', 0.5);
title('é‡æ„åçš„éŸ³é¢‘ä¿¡å·');
xlabel('æ—¶é—´ (ç§’)');
ylabel('å¹…åº¦');
xlim([0, max(t_recon)]);
grid on;

fprintf('\n');
fprintf('  [å›¾å½¢è¾“å‡º - æ¥è‡ª ex0_synthesize_all]\n');
fprintf('    - å­å›¾1: åŸå§‹éŸ³é¢‘æ³¢å½¢ (è“è‰²ï¼Œæ—¶é•¿ %.2f ç§’)\n', length(x)/fs);
fprintf('    - å­å›¾2: é‡æ„éŸ³é¢‘æ³¢å½¢ (çº¢è‰²ï¼Œæ—¶é•¿ %.2f ç§’)\n', length(outputSignal)/fs);
fprintf('    - è¯´æ˜: é‡æ„ä¿¡å·åº”æ¯”åŸå§‹ä¿¡å·é•¿ %.1f å€\n', stretchFactor);
fprintf('\n');

%% ========================== è¿è¡Œæ€»ç»“ =====================================
fprintf('================================================================\n');
fprintf('                       è¿ è¡Œ æ€» ç»“\n');
fprintf('================================================================\n');
fprintf('\n');
fprintf('  [å¤„ç†å‚æ•°]\n');
fprintf('    - å¸§é•¿: %d | å¸§ç§»: %d | æ‹‰ä¼¸å› å­: %.2f\n', Lwin, Ra, stretchFactor);
if usePhaseVocoder
    fprintf('    - å¤„ç†æ–¹æ³•: ç›¸ä½å£°ç å™¨æ³• (Phase Vocoder)\n');
else
    fprintf('    - å¤„ç†æ–¹æ³•: é¢‘åŸŸæ’å€¼æ³•\n');
end
fprintf('\n');
fprintf('  [å¤„ç†ç»“æœ]\n');
fprintf('    - åŸå§‹æ—¶é•¿: %.2f ç§’ -> è¾“å‡ºæ—¶é•¿: %.2f ç§’\n', length(x)/fs, length(outputSignal)/fs);
fprintf('    - å®é™…æ‹‰ä¼¸æ¯”: %.2f (ç›®æ ‡: %.2f)\n', length(outputSignal)/length(x), stretchFactor);
fprintf('\n');
fprintf('  [ç”Ÿæˆå›¾å½¢æ±‡æ€»]\n');
fprintf('    - Figure 1: åˆ†å¸§ç»“æœ - ex1_frame_signal\n');
fprintf('    - Figure 2: åŠ çª—å¤„ç† - ex2_window_signal\n');
fprintf('    - Figure 3: é¢‘è°±åˆ†æ - ex3_compute_spectrum\n');
if usePhaseVocoder
    fprintf('    - Figure 4: ç›¸ä½å£°ç å™¨ - ex6_Phase_Vocoder\n');
else
    fprintf('    - Figure 4: é¢‘åŸŸæ’å€¼ - ex4_modify_STFT\n');
end
fprintf('    - Figure 5: éŸ³é¢‘å˜é€Ÿç»“æœå¯¹æ¯” - ex0_synthesize_all\n');
fprintf('\n');
fprintf('  [æ‰§è¡ŒçŠ¶æ€] æ‰€æœ‰æ­¥éª¤æ‰§è¡ŒæˆåŠŸ! éŸ³é¢‘æ­£åœ¨æ’­æ”¾ä¸­...\n');
fprintf('\n');
fprintf('================================================================\n');
fprintf('                     ç¨‹åºè¿è¡Œå®Œæˆ\n');
fprintf('================================================================\n');
fprintf('\n');</pre>
            </div>
        </div>

        <!-- ex1 ä¿¡å·åˆ†å¸§ -->
        <div class="file-block">
            <div class="file-header" onclick="toggleBlock(this)">
                <span class="file-title">
                    <span class="arrow-icon">â–¼</span>
                    ğŸ“„ ex1_frame_signal.mï¼ˆä¿¡å·åˆ†å¸§ï¼‰
                </span>
                <button class="copy-btn" onclick="copyCode(event, 'code1')">å¤åˆ¶ä»£ç </button>
            </div>
            <div class="file-content">
                <pre id="code1">function [x_mat] = ex1_frame_signal(x, Lwin, Ra)
% EX1_FRAME_SIGNAL - å°†è¾“å…¥æ—¶åŸŸä¿¡å·åˆ†å¸§å¤„ç†
%
% æ­¤å‡½æ•°å°†è¾“å…¥ä¿¡å· x æŒ‰ç…§æŒ‡å®šçš„å¸§é•¿åº¦ Lwin å’Œå¸§ç§» Ra è¿›è¡Œåˆ†æ®µå¤„ç†ã€‚
% æ¯å¸§é•¿åº¦ä¸º Lwinï¼Œç›¸é‚»å¸§ä¹‹é—´çš„é‡‡æ ·ç‚¹é—´éš”ä¸º Raï¼Œç»“æœè¾“å‡ºä¸€ä¸ªä¿¡å·çŸ©é˜µã€‚
%
% è¾“å…¥å‚æ•°ï¼š
%   x    - è¾“å…¥çš„æ—¶åŸŸä¿¡å·ï¼Œ1ç»´æ•°ç»„ï¼ˆåˆ—å‘é‡ï¼‰
%   Lwin - æ¯å¸§çš„é•¿åº¦ï¼ˆæ ·æœ¬æ•°ï¼‰ï¼Œé€šå¸¸ä¸º2çš„å¹‚æ¬¡å¦‚1024
%   Ra   - å¸§ç§»ï¼ˆæ­¥é•¿ï¼‰ï¼Œå³ç›¸é‚»å¸§èµ·å§‹ä½ç½®ä¹‹é—´çš„é‡‡æ ·ç‚¹é—´éš”
%
% è¾“å‡ºå‚æ•°ï¼š
%   x_mat - åˆ†å¸§åçš„ä¿¡å·çŸ©é˜µï¼Œå¤§å°ä¸º [Lwin, Lframe]
%           æ¯åˆ—ä»£è¡¨ä¸€ä¸ªæ—¶é—´å¸§

%% 1. è·å–è¾“å…¥ä¿¡å·çš„é•¿åº¦
% ä¿¡å· x çš„æ€»é‡‡æ ·ç‚¹æ•°
Lx = <span class="todo">?</span>;

%% 2. è®¡ç®—æ¯å¸§çš„èµ·å§‹ä½ç½®ç´¢å¼•
% èµ·å§‹ä½ç½®ä»1å¼€å§‹ï¼Œæ¯éš”Raä¸ªé‡‡æ ·ç‚¹å–ä¸€å¸§
% æœ€åä¸€å¸§çš„èµ·å§‹ä½ç½®ä¸èƒ½è¶…è¿‡ (Lx - Lwin)ï¼Œå¦åˆ™ä¼šè¶Šç•Œ
% ç”Ÿæˆç´¢å¼•åºåˆ—: [1, 1+Ra, 1+2*Ra, ..., ç›´åˆ°ä¸è¶…è¿‡Lx-Lwin]
Idx = <span class="todo">?</span>;

%% 3. è®¡ç®—æ€»å¸§æ•°
% å¸§æ•° = èµ·å§‹ä½ç½®ç´¢å¼•åºåˆ—çš„å…ƒç´ ä¸ªæ•°
Lframe = <span class="todo">?</span>;

%% 4. åˆå§‹åŒ–ä¿¡å·çŸ©é˜µ
% åˆ›å»ºå…¨é›¶çŸ©é˜µï¼Œå¤§å°ä¸º [Lwin, Lframe]
% æ¯åˆ—å­˜æ”¾ä¸€å¸§æ•°æ®
x_mat = <span class="todo">?</span>;

%% 5. éå†æ¯ä¸€å¸§å¹¶å­˜å…¥çŸ©é˜µ
for idx = 1:Lframe
    % å½“å‰å¸§èµ·å§‹ä½ç½®ï¼šIdx(idx)
    % å½“å‰å¸§ç»“æŸä½ç½®ï¼šIdx(idx) + Lwin - 1
    % æå–ä¿¡å·ç‰‡æ®µ x(èµ·å§‹:ç»“æŸ) å¹¶å­˜å…¥çŸ©é˜µç¬¬ idx åˆ—
    x_mat(:, idx) = <span class="todo">?</span>;
end

%% 6. ç»˜å›¾éƒ¨åˆ†ï¼ˆå¯é€‰ï¼Œç”¨äºå¯è§†åŒ–åˆ†å¸§æ•ˆæœï¼‰
figure;
hold on;
% ç»˜åˆ¶åŸå§‹ä¿¡å·ï¼ˆç°è‰²èƒŒæ™¯ï¼‰
plot(x, 'Color', [0.7 0.7 0.7], 'LineWidth', 1);

% ç”¨ä¸åŒé¢œè‰²ç»˜åˆ¶å‰å‡ å¸§ï¼Œå±•ç¤ºé‡å æ•ˆæœ
colors = lines(min(5, Lframe));
for idx = 1:min(5, Lframe)
    frame_start = Idx(idx);
    frame_end = frame_start + Lwin - 1;
    plot(frame_start:frame_end, x_mat(:, idx), 'Color', colors(idx,:), 'LineWidth', 1.5);
end

title('ä¿¡å·åˆ†å¸§ç¤ºæ„å›¾');
xlabel('é‡‡æ ·ç‚¹');
ylabel('å¹…åº¦');
legend('åŸå§‹ä¿¡å·', 'ç¬¬1å¸§', 'ç¬¬2å¸§', 'ç¬¬3å¸§', 'ç¬¬4å¸§', 'ç¬¬5å¸§');
grid on;
hold off;

end</pre>
            </div>
        </div>

        <!-- ex2 åŠ çª—å¤„ç† -->
        <div class="file-block">
            <div class="file-header" onclick="toggleBlock(this)">
                <span class="file-title">
                    <span class="arrow-icon">â–¼</span>
                    ğŸ“„ ex2_window_signal.mï¼ˆåŠ çª—å¤„ç†ï¼‰
                </span>
                <button class="copy-btn" onclick="copyCode(event, 'code2')">å¤åˆ¶ä»£ç </button>
            </div>
            <div class="file-content">
                <pre id="code2">function [W_x_mat] = ex2_window_signal(x_mat, Lwin)
% EX2_WINDOW_SIGNAL - å¯¹åˆ†å¸§ä¿¡å·çŸ©é˜µåº”ç”¨ Hann çª—è¿›è¡ŒåŠ çª—å¤„ç†
%
% åŠ çª—çš„ç›®çš„æ˜¯å‡å°‘é¢‘è°±æ³„éœ²ï¼Œä½¿ä¿¡å·åœ¨å¸§è¾¹ç•Œå¤„å¹³æ»‘è¿‡æ¸¡åˆ°é›¶ã€‚
% Hannçª—æ˜¯ä¸€ç§å¸¸ç”¨çš„çª—å‡½æ•°ï¼Œå…¶å½¢çŠ¶ç±»ä¼¼äºä½™å¼¦å‡½æ•°çš„ä¸€éƒ¨åˆ†ã€‚
% Hannçª—å…¬å¼ï¼šw(n) = 0.5 Ã— (1 - cos(2Ï€n/(N-1)))
%
% è¾“å…¥å‚æ•°ï¼š
%   x_mat - åˆ†å¸§åçš„æ—¶åŸŸä¿¡å·çŸ©é˜µï¼Œå¤§å°ä¸º [Lwin, numFrames]
%           æ¯åˆ—è¡¨ç¤ºä¸€ä¸ªæ—¶é—´å¸§
%   Lwin  - çª—å£çš„é•¿åº¦ï¼Œä¸æ¯å¸§çš„é•¿åº¦ç›¸åŒ
%
% è¾“å‡ºå‚æ•°ï¼š
%   W_x_mat - åŠ çª—åçš„ä¿¡å·çŸ©é˜µï¼Œå¤§å°ä¸ x_mat ç›¸åŒ

%% 1. ç”Ÿæˆ Hann çª—å‡½æ•°
% ç”Ÿæˆé•¿åº¦ä¸º Lwin çš„ Hann çª—å‘é‡
Whann = <span class="todo">?</span>;

%% 2. åˆå§‹åŒ–åŠ çª—åçš„ä¿¡å·çŸ©é˜µ
% åˆ›å»ºä¸ x_mat å¤§å°ç›¸åŒçš„å…¨é›¶çŸ©é˜µ
W_x_mat = <span class="todo">?</span>;

%% 3. è·å–å¸§æ•°ï¼ˆçŸ©é˜µçš„åˆ—æ•°ï¼‰
numFrames = size(x_mat, 2);

%% 4. éå†æ¯ä¸€åˆ—ï¼Œé€åˆ—è¿›è¡ŒåŠ çª—
for i = 1:numFrames
    % 4.1 æå–å½“å‰å¸§çš„ä¿¡å·
    currentFrame = x_mat(:, i);
    
    % 4.2 å¯¹å½“å‰å¸§è¿›è¡ŒåŠ çª—
    % çª—å‡½æ•°ä¸ä¿¡å·é€ç‚¹ç›¸ä¹˜ï¼ˆé€å…ƒç´ ä¹˜æ³•ï¼‰
    windowedFrame = <span class="todo">?</span>;

    % 4.3 å°†åŠ çª—åçš„å¸§å­˜å…¥çŸ©é˜µ
    W_x_mat(:, i) = <span class="todo">?</span>;
end

%% 5. ç»˜å›¾éƒ¨åˆ†ï¼ˆå±•ç¤ºåŠ çª—æ•ˆæœï¼‰
figure;

% å­å›¾1ï¼šåŸå§‹ç¬¬ä¸€å¸§ä¿¡å·
subplot(3, 1, 1);
plot(x_mat(:, 1), 'b', 'LineWidth', 1);
title('åŸå§‹ä¿¡å·ï¼ˆç¬¬ä¸€å¸§ï¼‰');
xlabel('é‡‡æ ·ç‚¹');
ylabel('å¹…åº¦');
grid on;

% å­å›¾2ï¼šHannçª—å‡½æ•°å½¢çŠ¶
subplot(3, 1, 2);
plot(Whann, 'r', 'LineWidth', 1.5);
title('Hann çª—å‡½æ•°');
xlabel('é‡‡æ ·ç‚¹');
ylabel('çª—å‡½æ•°å€¼');
ylim([0, 1.1]);
grid on;

% å­å›¾3ï¼šåŠ çª—åçš„ç¬¬ä¸€å¸§ä¿¡å·
subplot(3, 1, 3);
plot(W_x_mat(:, 1), 'g', 'LineWidth', 1);
title('åŠ çª—åä¿¡å·ï¼ˆç¬¬ä¸€å¸§ï¼‰');
xlabel('é‡‡æ ·ç‚¹');
ylabel('å¹…åº¦');
grid on;

end</pre>
            </div>
        </div>

        <!-- ex3 é¢‘è°±è®¡ç®— -->
        <div class="file-block">
            <div class="file-header" onclick="toggleBlock(this)">
                <span class="file-title">
                    <span class="arrow-icon">â–¼</span>
                    ğŸ“„ ex3_compute_spectrum.mï¼ˆé¢‘è°±è®¡ç®—ï¼‰
                </span>
                <button class="copy-btn" onclick="copyCode(event, 'code3')">å¤åˆ¶ä»£ç </button>
            </div>
            <div class="file-content">
                <pre id="code3">function [W_X_MAT] = ex3_compute_spectrum(W_x_mat)
% EX3_COMPUTE_SPECTRUM - å¯¹åŠ çª—åçš„ä¿¡å·çŸ©é˜µè®¡ç®—é¢‘è°±
%
% æ­¤å‡½æ•°å¯¹è¾“å…¥çš„æ¯ä¸€å¸§åŠ çª—ä¿¡å·è¿›è¡Œå¿«é€Ÿå‚…é‡Œå¶å˜æ¢ (FFT)ï¼Œ
% å°†æ—¶åŸŸä¿¡å·è½¬æ¢ä¸ºé¢‘åŸŸè¡¨ç¤ºã€‚FFTç»“æœä¸ºå¤æ•°ï¼ŒåŒ…å«å¹…åº¦å’Œç›¸ä½ä¿¡æ¯ã€‚
%
% è¾“å…¥å‚æ•°ï¼š
%   W_x_mat - åŠ çª—åçš„æ—¶åŸŸä¿¡å·çŸ©é˜µï¼Œå¤§å°ä¸º [Lwin, Lframe]
%             æ¯åˆ—æ˜¯ä¸€å¸§åŠ çª—åçš„æ—¶åŸŸä¿¡å·
%
% è¾“å‡ºå‚æ•°ï¼š
%   W_X_MAT - é¢‘è°±çŸ©é˜µï¼ˆå¤æ•°ï¼‰ï¼Œå¤§å°ä¸ W_x_mat ç›¸åŒ
%             æ¯åˆ—å¯¹åº”ä¸€å¸§ä¿¡å·çš„é¢‘è°±

%% 1. è·å–è¾“å…¥çŸ©é˜µçš„å°ºå¯¸
% Lwin æ˜¯æ¯å¸§çš„é•¿åº¦ï¼ŒLframe æ˜¯æ€»å¸§æ•°
[Lwin, Lframe] = <span class="todo">?</span>;

%% 2. åˆå§‹åŒ–é¢‘è°±çŸ©é˜µ
% åˆ›å»ºä¸ W_x_mat ç›¸åŒå¤§å°çš„é›¶çŸ©é˜µ
% FFTç»“æœä¸ºå¤æ•°ï¼Œå­˜å‚¨æ—¶ä¼šè‡ªåŠ¨è½¬ä¸ºå¤æ•°ç±»å‹
W_X_MAT = <span class="todo">?</span>;

%% 3. éå†æ¯ä¸€å¸§å¹¶è®¡ç®—é¢‘è°±
for idx = 1:Lframe
    % 3.1 æå–å½“å‰å¸§çš„æ—¶åŸŸä¿¡å·
    currentFrame = W_x_mat(:, idx);

    % 3.2 è®¡ç®—å½“å‰å¸§çš„é¢‘è°±
    % å¯¹æ—¶åŸŸä¿¡å·è¿›è¡Œå¿«é€Ÿå‚…é‡Œå¶å˜æ¢ï¼Œå¾—åˆ°å¤æ•°é¢‘è°±
    spectrum = <span class="todo">?</span>;

    % 3.3 å°†é¢‘è°±å­˜å…¥é¢‘è°±çŸ©é˜µ
    W_X_MAT(:, idx) = <span class="todo">?</span>;
end

%% 4. ç»˜å›¾éƒ¨åˆ†ï¼ˆå±•ç¤ºé¢‘è°±åˆ†æç»“æœï¼‰
figure;

% å­å›¾1ï¼šåŠ çª—åç¬¬ä¸€å¸§çš„æ—¶åŸŸæ³¢å½¢
subplot(3, 1, 1);
plot(real(W_x_mat(:, 1)), 'b', 'LineWidth', 1);
title('åŠ çª—åç¬¬ä¸€å¸§ï¼ˆæ—¶åŸŸï¼‰');
xlabel('é‡‡æ ·ç‚¹');
ylabel('å¹…åº¦');
grid on;

% å­å›¾2ï¼šç¬¬ä¸€å¸§çš„å¹…åº¦è°±
subplot(3, 1, 2);
plot(abs(W_X_MAT(:, 1)), 'r', 'LineWidth', 1);
title('ç¬¬ä¸€å¸§çš„å¹…åº¦è°± |X(k)|');
xlabel('é¢‘ç‡ç´¢å¼• k');
ylabel('å¹…åº¦');
grid on;

% å­å›¾3ï¼šç¬¬ä¸€å¸§çš„ç›¸ä½è°±
subplot(3, 1, 3);
plot(angle(W_X_MAT(:, 1)), 'g', 'LineWidth', 1);
title('ç¬¬ä¸€å¸§çš„ç›¸ä½è°± âˆ X(k)');
xlabel('é¢‘ç‡ç´¢å¼• k');
ylabel('ç›¸ä½ (rad)');
grid on;

end</pre>
            </div>
        </div>

        <!-- ex4 é¢‘åŸŸæ’å€¼ -->
        <div class="file-block">
            <div class="file-header" onclick="toggleBlock(this)">
                <span class="file-title">
                    <span class="arrow-icon">â–¼</span>
                    ğŸ“„ ex4_modify_STFT.mï¼ˆé¢‘åŸŸæ’å€¼æ³•ï¼‰
                </span>
                <button class="copy-btn" onclick="copyCode(event, 'code4')">å¤åˆ¶ä»£ç </button>
            </div>
            <div class="file-content">
                <pre id="code4">function [freq_mat_modified] = ex4_modify_STFT(freq_mat, stretchFactor)
% EX4_MODIFY_STFT - å¯¹ STFT é¢‘è°±çŸ©é˜µè¿›è¡Œæ—¶é—´æ‹‰ä¼¸æˆ–ç¼©æ”¾
%
% è¯¥å‡½æ•°é€šè¿‡çº¿æ€§æ’å€¼è°ƒæ•´é¢‘è°±çŸ©é˜µçš„å¸§æ•°ï¼Œå®ç°éŸ³é¢‘ä¿¡å·çš„æ—¶é—´å°ºåº¦å˜æ¢ã€‚
% è¿™æ˜¯ä¸€ç§ç®€å•çš„é¢‘åŸŸæ’å€¼æ–¹æ³•ï¼Œä½†å¯èƒ½å¯¼è‡´ç›¸ä½ä¸è¿ç»­ã€‚
%
% åŸç†ï¼šå°†åŸå§‹å¸§åºåˆ—è§†ä¸ºåœ¨ [0,1] åŒºé—´ä¸Šå‡åŒ€é‡‡æ ·çš„ç‚¹ï¼Œ
%       ç„¶ååœ¨æ–°çš„å¸§æ•°ä¸Šé‡æ–°é‡‡æ ·ï¼ˆçº¿æ€§æ’å€¼ï¼‰
%
% è¾“å…¥å‚æ•°ï¼š
%   freq_mat      - åŸå§‹ STFT é¢‘è°±çŸ©é˜µï¼Œå¤§å°ä¸º [Lwin, numFrames]
%   stretchFactor - æ—¶é—´æ‹‰ä¼¸å› å­
%                   > 1 è¡¨ç¤ºå»¶é•¿ï¼ˆå‡é€Ÿï¼‰ï¼Œ< 1 è¡¨ç¤ºç¼©çŸ­ï¼ˆåŠ é€Ÿï¼‰
%
% è¾“å‡ºå‚æ•°ï¼š
%   freq_mat_modified - è°ƒæ•´åçš„é¢‘è°±çŸ©é˜µï¼Œå¤§å°ä¸º [Lwin, newNumFrames]

%% 1. è·å–åŸå§‹é¢‘è°±çŸ©é˜µçš„å°ºå¯¸ä¿¡æ¯
% Lwin æ˜¯æ¯å¸§çš„FFTé•¿åº¦ï¼ŒnumFrames æ˜¯åŸå§‹å¸§æ•°
[Lwin, numFrames] = <span class="todo">?</span>;

%% 2. è®¡ç®—æ‹‰ä¼¸åçš„æ–°å¸§æ•°
% æ–°å¸§æ•° = åŸå¸§æ•° Ã— æ‹‰ä¼¸å› å­ï¼ˆå‘ä¸‹å–æ•´ï¼‰
newNumFrames = <span class="todo">?</span>;

%% 3. åˆå§‹åŒ–æ–°çš„é¢‘è°±çŸ©é˜µ
% å¤§å°ä¸º [Lwin, newNumFrames]
freq_mat_modified = <span class="todo">?</span>;

%% 4. ç”ŸæˆåŸå§‹å’Œæ–°çš„æ—¶é—´ç‚¹åºåˆ—
% å°†æ—¶é—´å½’ä¸€åŒ–åˆ° [0, 1] åŒºé—´
% åŸå§‹æ—¶é—´ç‚¹ï¼šnumFrames ä¸ªå‡åŒ€åˆ†å¸ƒçš„ç‚¹
% æ–°æ—¶é—´ç‚¹ï¼šnewNumFrames ä¸ªå‡åŒ€åˆ†å¸ƒçš„ç‚¹
originalTimePoints = <span class="todo">?</span>;
newTimePoints = <span class="todo">?</span>;

%% 5. éå†æ¯ä¸€è¡Œï¼ˆæ¯ä¸ªé¢‘ç‡åˆ†é‡ï¼‰è¿›è¡Œçº¿æ€§æ’å€¼
for k = 1:Lwin
    % 5.1 æå–å½“å‰è¡Œçš„é¢‘åŸŸæ•°æ®ï¼ˆç¬¬kä¸ªé¢‘ç‡åˆ†é‡åœ¨æ‰€æœ‰å¸§çš„å€¼ï¼‰
    currentRow = freq_mat(k, :);

    % 5.2 å¯¹å½“å‰è¡Œè¿›è¡Œçº¿æ€§æ’å€¼
    % æ ¹æ®åŸå§‹æ—¶é—´ç‚¹å’Œæ•°æ®ï¼Œåœ¨æ–°æ—¶é—´ç‚¹ä¸Šè¿›è¡Œæ’å€¼
    % æ’å€¼æ–¹æ³•ï¼šçº¿æ€§æ’å€¼ï¼Œå…è®¸å¤–æ¨
    interpolatedValues = <span class="todo">?</span>;

    % 5.3 å°†æ’å€¼ç»“æœå­˜å…¥æ–°çš„é¢‘è°±çŸ©é˜µ
    freq_mat_modified(k, :) = <span class="todo">?</span>;
end

%% 6. ç»˜å›¾éƒ¨åˆ†ï¼ˆå±•ç¤ºæ’å€¼æ•ˆæœï¼‰
figure;

% å­å›¾1ï¼šåŸå§‹ç¬¬ä¸€è¡Œé¢‘ç‡åˆ†é‡éšæ—¶é—´å˜åŒ–
subplot(2, 1, 1);
plot(1:numFrames, abs(freq_mat(1, :)), 'b-o', 'LineWidth', 1, 'MarkerSize', 3);
title('åŸå§‹é¢‘è°±ï¼ˆæœ€ä½é¢‘ç‡åˆ†é‡ï¼‰');
xlabel('å¸§ç´¢å¼•');
ylabel('å¹…åº¦');
grid on;

% å­å›¾2ï¼šæ’å€¼åç¬¬ä¸€è¡Œé¢‘ç‡åˆ†é‡éšæ—¶é—´å˜åŒ–
subplot(2, 1, 2);
plot(1:newNumFrames, abs(freq_mat_modified(1, :)), 'r-o', 'LineWidth', 1, 'MarkerSize', 3);
title(sprintf('æ’å€¼åé¢‘è°±ï¼ˆæ‹‰ä¼¸å› å­=%.2fï¼‰', stretchFactor));
xlabel('å¸§ç´¢å¼•');
ylabel('å¹…åº¦');
grid on;

end</pre>
            </div>
        </div>

        <!-- ex5 ä¿¡å·é‡å»º -->
        <div class="file-block">
            <div class="file-header" onclick="toggleBlock(this)">
                <span class="file-title">
                    <span class="arrow-icon">â–¼</span>
                    ğŸ“„ ex5_reconstruct_signal.mï¼ˆä¿¡å·é‡å»ºï¼‰
                </span>
                <button class="copy-btn" onclick="copyCode(event, 'code5')">å¤åˆ¶ä»£ç </button>
            </div>
            <div class="file-content">
                <pre id="code5">function [outputSignal] = ex5_reconstruct_signal(freq_mat_modified, Lwin, Ra)
% EX5_RECONSTRUCT_SIGNAL - é‡æ„æ—¶é—´æ‹‰ä¼¸åçš„éŸ³é¢‘ä¿¡å·
%
% è¯¥å‡½æ•°é€šè¿‡å¯¹ STFT çŸ©é˜µé€å¸§è¿›è¡Œ IFFT å’ŒåŠ çª—é‡å ç›¸åŠ ï¼ˆOLAï¼‰ï¼Œ
% å°†é¢‘åŸŸè¡¨ç¤ºè½¬æ¢å›æ—¶åŸŸä¿¡å·ã€‚
%
% é‡å ç›¸åŠ åŸç†ï¼š
% 1. å¯¹æ¯å¸§é¢‘è°±è¿›è¡Œé€†FFTå¾—åˆ°æ—¶åŸŸå¸§
% 2. å¯¹æ—¶åŸŸå¸§ä¹˜ä»¥åˆæˆçª—å‡½æ•°ï¼ˆHammingçª—ï¼‰
% 3. æŒ‰å¸§ç§»é—´éš”å°†å„å¸§å åŠ åˆ°è¾“å‡ºä¿¡å·ä¸­
%
% è¾“å…¥å‚æ•°ï¼š
%   freq_mat_modified - ä¿®æ”¹åçš„ STFT çŸ©é˜µï¼Œå¤§å°ä¸º [Lwin, newNumFrames]
%   Lwin              - çª—å£å¤§å°ï¼ˆFFTé•¿åº¦ï¼‰
%   Ra                - å¸§ç§» (hop size)ï¼Œå†³å®šç›¸é‚»å¸§çš„é—´éš”
%
% è¾“å‡ºå‚æ•°ï¼š
%   outputSignal - é‡æ„åçš„æ—¶åŸŸéŸ³é¢‘ä¿¡å·ï¼ˆåˆ—å‘é‡ï¼‰

%% 1. è·å– STFT çŸ©é˜µçš„å¸§æ•°
% çŸ©é˜µçš„åˆ—æ•°å³ä¸ºå¸§æ•°
[~, newNumFrames] = <span class="todo">?</span>;

%% 2. ç”Ÿæˆ Hamming çª—å‡½æ•°ç”¨äºåˆæˆåŠ çª—
% Hammingçª—åœ¨é‡å ç›¸åŠ æ—¶å…·æœ‰è‰¯å¥½çš„é‡å»ºç‰¹æ€§
% ç”Ÿæˆé•¿åº¦ä¸º Lwin çš„ Hamming çª—
window = <span class="todo">?</span>;

%% 3. è®¡ç®—è¾“å‡ºä¿¡å·çš„æ€»é•¿åº¦
% è¾“å‡ºé•¿åº¦ = (å¸§æ•°-1) Ã— å¸§ç§» + å¸§é•¿
% ç¬¬1å¸§ä»ä½ç½®1å¼€å§‹ï¼Œç¬¬nå¸§ä»ä½ç½®(n-1)*Ra+1å¼€å§‹
outputLength = <span class="todo">?</span>;

%% 4. åˆå§‹åŒ–è¾“å‡ºä¿¡å·ä¸ºå…¨é›¶å‘é‡
% åˆ›å»º outputLength Ã— 1 çš„é›¶å‘é‡
outputSignal = <span class="todo">?</span>;

%% 5. éå†æ¯ä¸€å¸§ï¼Œè¿›è¡ŒIFFTå’Œé‡å åŠ å’Œ
for i = 1:newNumFrames
    % 5.1 æå–ç¬¬ i å¸§çš„é¢‘åŸŸæ•°æ®
    freqData = freq_mat_modified(:, i);

    % 5.2 å¯¹ç¬¬ i å¸§è¿›è¡Œé€† FFTï¼Œå¾—åˆ°æ—¶åŸŸä¿¡å·
    % é€†FFTå°†é¢‘åŸŸå¤æ•°åºåˆ—è½¬æ¢å›æ—¶åŸŸå®æ•°ä¿¡å·
    % æ³¨æ„ï¼šéœ€è¦ç¡®ä¿è¾“å‡ºä¸ºå®æ•°ï¼ˆå¯¹ç§°FFTå‡è®¾ï¼‰
    frame = <span class="todo">?</span>;

    % 5.3 è®¡ç®—è¯¥å¸§åœ¨è¾“å‡ºä¿¡å·ä¸­çš„èµ·å§‹ä½ç½®
    % ç¬¬ i å¸§çš„èµ·å§‹åç§» = (i-1) Ã— å¸§ç§»
    startIdx = <span class="todo">?</span>;

    % 5.4 ç¡®å®šè¯¥å¸§å¯¹åº”çš„è¾“å‡ºä¿¡å·ç´¢å¼•èŒƒå›´
    % ç´¢å¼•èŒƒå›´ï¼šä» startIdx+1 åˆ° startIdx+Lwin
    indices = <span class="todo">?</span>;

    % 5.5 å¯¹å½“å‰å¸§è¿›è¡ŒåŠ çª—å¤„ç†
    % æ—¶åŸŸå¸§ä¸çª—å‡½æ•°é€ç‚¹ç›¸ä¹˜
    windowedFrame = <span class="todo">?</span>;

    % 5.6 é‡å ç›¸åŠ ï¼šå°†åŠ çª—å¸§ç´¯åŠ åˆ°è¾“å‡ºä¿¡å·å¯¹åº”ä½ç½®
    % outputSignal(indices) = outputSignal(indices) + windowedFrame
    outputSignal(indices) = <span class="todo">?</span>;
end

end</pre>
            </div>
        </div>

        <!-- ex6 ç›¸ä½å£°ç å™¨ -->
        <div class="file-block">
            <div class="file-header" onclick="toggleBlock(this)">
                <span class="file-title">
                    <span class="arrow-icon">â–¼</span>
                    ğŸ“„ ex6_Phase_Vocoder.mï¼ˆç›¸ä½å£°ç å™¨ - è¿›é˜¶ï¼‰
                </span>
                <button class="copy-btn" onclick="copyCode(event, 'code6')">å¤åˆ¶ä»£ç </button>
            </div>
            <div class="file-content">
                <pre id="code6">function [freq_mat_modified] = ex6_Phase_Vocoder(freq_mat, Lwin, Ra, Rs)
% EX6_PHASE_VOCODER - åŸºäºç›¸ä½å£°ç å™¨æ³•çš„æ—¶é—´å°ºåº¦ä¿®æ”¹å¤„ç†
%
% ç›¸ä½å£°ç å™¨æ˜¯ä¸€ç§æ›´é«˜çº§çš„æ—¶é—´æ‹‰ä¼¸æ–¹æ³•ã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š
% 1. ä¿æŒæ¯å¸§çš„å¹…åº¦è°±ä¸å˜
% 2. æ ¹æ®å¸§ç§»æ¯”ä¾‹é‡æ–°è®¡ç®—ç´¯ç§¯ç›¸ä½
% 3. é¿å…ç®€å•æ’å€¼å¯¼è‡´çš„ç›¸ä½ä¸è¿ç»­é—®é¢˜
%
% å…³é”®æ¦‚å¿µï¼š
% - ç¬æ—¶é¢‘ç‡ï¼šæ¯ä¸ªé¢‘ç‡åˆ†é‡çš„å®é™…é¢‘ç‡ï¼ˆå¯èƒ½ä¸ç†è®ºbiné¢‘ç‡æœ‰åå·®ï¼‰
% - ç›¸ä½å±•å¼€ï¼šå¤„ç†ç›¸ä½çš„2Ï€å‘¨æœŸæ€§ï¼Œå°†ç›¸ä½å·®é™åˆ¶åœ¨[-Ï€, Ï€]èŒƒå›´
% - ç›¸ä½ç´¯ç§¯ï¼šæ ¹æ®æ–°å¸§ç§»Rsç´¯ç§¯è¾“å‡ºç›¸ä½
%
% æ ¸å¿ƒå…¬å¼ï¼š
% - ç†è®ºè§’é¢‘ç‡ï¼šÎ©(k) = 2Ï€k/Lwin
% - ç›¸ä½å·®ï¼šÎ”Ï† = Ï†_current - Ï†_prev - Î©Ã—Ra
% - ç›¸ä½å½’ä¸€åŒ–ï¼šÎ”Ï†_wrapped = mod(Î”Ï†+Ï€, 2Ï€) - Ï€
% - é¢‘ç‡åç§»ï¼šÎ”Ï‰ = Î”Ï†_wrapped / Ra
% - çœŸå®é¢‘ç‡ï¼šÏ‰_true = Î© + Î”Ï‰
% - è¾“å‡ºç›¸ä½ç´¯ç§¯ï¼šÏ†_out = Ï†_out + Ï‰_true Ã— Rs
%
% è¾“å…¥å‚æ•°ï¼š
%   freq_mat - STFT é¢‘è°±çŸ©é˜µï¼Œå¤§å°ä¸º [Lwin, numFrames]
%   Lwin     - æ¯å¸§çš„çª—å£é•¿åº¦ï¼ˆFFTç‚¹æ•°ï¼‰
%   Ra       - åŸå§‹ä¿¡å·çš„å¸§ç§»
%   Rs       - æ‹‰ä¼¸åçš„å¸§ç§»ï¼ˆRs = Ra Ã— stretchFactorï¼‰
%
% è¾“å‡ºå‚æ•°ï¼š
%   freq_mat_modified - ç›¸ä½è°ƒæ•´åçš„é¢‘è°±çŸ©é˜µï¼Œå¤§å°ä¸º [Lwin, numFrames-1]
%                       æ³¨æ„ï¼šè¾“å‡ºæ¯”è¾“å…¥å°‘1å¸§ï¼ˆç¬¬ä¸€å¸§ç”¨äºåˆå§‹åŒ–ï¼‰

%% 1. è·å–è¾“å…¥çŸ©é˜µå°ºå¯¸
[Lwin, numFrames] = <span class="todo">?</span>;

%% 2. åˆå§‹åŒ–é¢‘ç‡ç›¸å…³å˜é‡
% 2.1 ç”Ÿæˆé¢‘ç‡ç´¢å¼•å‘é‡ k = [0, 1, 2, ..., Lwin-1]'ï¼ˆåˆ—å‘é‡ï¼‰
k = <span class="todo">?</span>;

% 2.2 è®¡ç®—æ¯ä¸ªé¢‘ç‡binçš„ç†è®ºè§’é¢‘ç‡
% å…¬å¼ï¼šÎ©(k) = 2Ï€ Ã— k / Lwin ï¼ˆå¼§åº¦/æ ·æœ¬ï¼‰
Omega = <span class="todo">?</span>;

%% 3. åˆå§‹åŒ–ç›¸ä½å˜é‡
% 3.1 prev_phase: å­˜å‚¨ä¸Šä¸€å¸§çš„ç›¸ä½
%     åˆå§‹åŒ–ä¸ºç¬¬ä¸€å¸§é¢‘è°±çš„ç›¸ä½ï¼ˆæå–å¤æ•°çš„è¾è§’ï¼‰
prev_phase = <span class="todo">?</span>;

% 3.2 phase_out: ç´¯ç§¯è¾“å‡ºç›¸ä½
%     åˆå§‹åŒ–ä¸ºç¬¬ä¸€å¸§çš„ç›¸ä½ï¼Œåç»­ä¼šä¸æ–­ç´¯åŠ 
phase_out = <span class="todo">?</span>;

%% 4. åˆå§‹åŒ–è¾“å‡ºé¢‘è°±çŸ©é˜µ
% è¾“å‡ºå¸§æ•° = è¾“å…¥å¸§æ•° - 1ï¼ˆç¬¬1å¸§ç”¨äºåˆå§‹åŒ–ï¼‰
numOutputFrames = <span class="todo">?</span>;
freq_mat_modified = <span class="todo">?</span>;

%% 5. éå†æ¯ä¸€å¸§ï¼Œè®¡ç®—æ–°çš„é¢‘è°±ç›¸ä½
for idx = 2:numFrames
    %% 5.1 æå–å½“å‰å¸§çš„å¹…åº¦å’Œç›¸ä½
    % å¹…åº¦ï¼šå¤æ•°çš„æ¨¡
    % ç›¸ä½ï¼šå¤æ•°çš„è¾è§’
    Amp = <span class="todo">?</span>;
    Pha = <span class="todo">?</span>;

    %% 5.2 è®¡ç®—ç›¸ä½å·®ï¼ˆå»é™¤ç†è®ºçº¿æ€§ç›¸ä½é€’è¿›ï¼‰
    % Î”Ï† = å½“å‰ç›¸ä½ - ä¸Šä¸€å¸§ç›¸ä½ - ç†è®ºé€’è¿›é‡(Î©Ã—Ra)
    delta_phase = <span class="todo">?</span>;

    %% 5.3 å°†ç›¸ä½å·®é™åˆ¶åœ¨ [-Ï€, Ï€] èŒƒå›´ï¼ˆç›¸ä½å±•å¼€ï¼‰
    % å…¬å¼ï¼šwrapped = mod(Î”Ï† + Ï€, 2Ï€) - Ï€
    % è¿™æ˜¯å¤„ç†2Ï€å‘¨æœŸæ€§çš„å…³é”®æ­¥éª¤
    delta_phase_wrapped = <span class="todo">?</span>;

    %% 5.4 è®¡ç®—ç¬æ—¶é¢‘ç‡åç§»é‡
    % Î”Ï‰ = å½’ä¸€åŒ–ç›¸ä½å·® / åŸå¸§ç§»Ra
    delta_omega = <span class="todo">?</span>;

    %% 5.5 è®¡ç®—çœŸå®çš„ç¬æ—¶è§’é¢‘ç‡
    % Ï‰_true = ç†è®ºé¢‘ç‡Î© + é¢‘ç‡åç§»Î”Ï‰
    omega_true = <span class="todo">?</span>;

    %% 5.6 ç´¯ç§¯è¾“å‡ºç›¸ä½
    % å…³é”®ï¼šä½¿ç”¨æ–°å¸§ç§» Rsï¼ˆè€ŒéRaï¼‰æ¥ç´¯ç§¯ç›¸ä½
    % Ï†_out = Ï†_out + Ï‰_true Ã— Rs
    phase_out = <span class="todo">?</span>;

    %% 5.7 ç”Ÿæˆæ–°çš„å¤æ•°é¢‘è°±
    % ä½¿ç”¨åŸå§‹å¹…åº¦ + æ–°ç´¯ç§¯ç›¸ä½
    % å¤æ•°è¡¨ç¤ºï¼šA Ã— e^(jÃ—Ï†) = A Ã— (cos(Ï†) + jÃ—sin(Ï†))
    freq_mat_modified(:, idx - 1) = <span class="todo">?</span>;

    %% 5.8 æ›´æ–°ä¸Šä¸€å¸§ç›¸ä½
    prev_phase = <span class="todo">?</span>;
end

%% 6. ç»˜å›¾éƒ¨åˆ†ï¼ˆå¯¹æ¯”åŸå§‹å’Œå¤„ç†åçš„é¢‘è°±ï¼‰
figure;

% é€‰å–ä¸­é—´å¸§è¿›è¡Œå¯¹æ¯”
midFrame_in = round(numFrames/2);
midFrame_out = round(numOutputFrames/2);

% å­å›¾1ï¼šåŸå§‹é¢‘è°±å¹…åº¦
subplot(2, 2, 1);
plot(abs(freq_mat(:, midFrame_in)));
title('åŸå§‹é¢‘è°±å¹…åº¦ï¼ˆä¸­é—´å¸§ï¼‰');
xlabel('é¢‘ç‡ç´¢å¼•');
ylabel('å¹…åº¦');
grid on;

% å­å›¾2ï¼šå¤„ç†åé¢‘è°±å¹…åº¦
subplot(2, 2, 2);
plot(abs(freq_mat_modified(:, midFrame_out)));
title('å¤„ç†åé¢‘è°±å¹…åº¦ï¼ˆä¸­é—´å¸§ï¼‰');
xlabel('é¢‘ç‡ç´¢å¼•');
ylabel('å¹…åº¦');
grid on;

% å­å›¾3ï¼šåŸå§‹é¢‘è°±ç›¸ä½
subplot(2, 2, 3);
plot(angle(freq_mat(:, midFrame_in)));
title('åŸå§‹é¢‘è°±ç›¸ä½ï¼ˆä¸­é—´å¸§ï¼‰');
xlabel('é¢‘ç‡ç´¢å¼•');
ylabel('ç›¸ä½ (rad)');
grid on;

% å­å›¾4ï¼šå¤„ç†åé¢‘è°±ç›¸ä½
subplot(2, 2, 4);
plot(angle(freq_mat_modified(:, midFrame_out)));
title('å¤„ç†åé¢‘è°±ç›¸ä½ï¼ˆä¸­é—´å¸§ï¼‰');
xlabel('é¢‘ç‡ç´¢å¼•');
ylabel('ç›¸ä½ (rad)');
grid on;

end</pre>
            </div>
        </div>

    </div>

    <script>
        function toggleBlock(header) {
            const block = header.parentElement;
            block.classList.toggle('collapsed');
        }

        function expandAll() {
            document.querySelectorAll('.file-block').forEach(block => {
                block.classList.remove('collapsed');
            });
        }

        function collapseAll() {
            document.querySelectorAll('.file-block').forEach(block => {
                block.classList.add('collapsed');
            });
        }

        function copyCode(event, codeId) {
            event.stopPropagation();
            const code = document.getElementById(codeId).innerText;
            navigator.clipboard.writeText(code).then(() => {
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = 'âœ“ å·²å¤åˆ¶';
                btn.style.background = '#38a169';
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.style.background = '#48bb78';
                }, 2000);
            });
        }
    </script>
</body>
</html>