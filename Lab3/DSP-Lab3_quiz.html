<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DSP-Lab3 FIRæ»¤æ³¢å™¨è®¾è®¡ æ™ºèƒ½ç»ƒä¹ ç³»ç»Ÿ</title>
    
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            tex2jax: {
                inlineMath: [['$','$'], ['\\(','\\)']],
                displayMath: [['$$','$$'], ['\\[','\\]']],
                processEscapes: true
            },
            CommonHTML: { scale: 110 },
            "HTML-CSS": { scale: 110 }
        });
    </script>
    
    <style>
        .mathjax-status {
            position: fixed; top: 10px; right: 15px; padding: 8px 15px; border-radius: 5px;
            background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb;
            font-size: 14px; z-index: 10000; font-family: 'Microsoft YaHei', sans-serif;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }
        .mathjax-status.loading { background-color: #fff3cd; color: #856404; border-color: #ffeeba; }
        .mathjax-status.success {
            background-color: #d4edda; color: #155724; border-color: #c3e6cb;
            transition: opacity 0.5s ease-out 1.5s; opacity: 0;
        }
    </style>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Microsoft YaHei', 'SimSun', Arial, sans-serif;
            background: linear-gradient(135deg, #2d57a4 0%, #608de0 50%, #5ca353 100%);
            min-height: 100vh; padding: 20px;
        }
        .container {
            max-width: 900px; margin: 0 auto; background: white; border-radius: 20px;
            box-shadow: 0 15px 50px rgba(0,0,0,0.25); padding: 40px;
        }
        h1 { color: #2d57a4; text-align: center; margin-bottom: 30px; font-size: 2em; }
        h2 { color: #608de0; margin: 25px 0 15px 0; }
        
        .login-section, .quiz-section, .result-section { display: none; }
        .login-section.active, .quiz-section.active, .result-section.active { display: block; }
        
        .form-group { margin-bottom: 20px; }
        label { display: block; color: #2d57a4; font-weight: bold; margin-bottom: 8px; }
        input[type="text"] { 
            width: 100%; padding: 12px; border: 2px solid #7dadff; border-radius: 8px; 
            font-size: 16px; transition: border-color 0.3s;
        }
        input[type="text"]:focus { border-color: #2d57a4; outline: none; }
        
        button {
            background: linear-gradient(135deg, #2d57a4 0%, #608de0 100%); color: white; border: none;
            padding: 12px 30px; border-radius: 25px; cursor: pointer; font-size: 16px;
            font-weight: bold; transition: all 0.3s; box-shadow: 0 3px 10px rgba(45, 87, 164, 0.3);
        }
        button:hover {
            background: linear-gradient(135deg, #1e3d7a 0%, #2d57a4 100%);
            transform: translateY(-2px); box-shadow: 0 5px 15px rgba(45, 87, 164, 0.5);
        }
        button:disabled { background: #ccc; cursor: not-allowed; transform: none; }
        
        .question-box { 
            background: #f8f9fa; border-left: 5px solid #2d57a4; padding: 25px; 
            margin: 20px 0; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        .question-title { color: #2d57a4; font-weight: bold; font-size: 1.2em; margin-bottom: 15px; }
        .question-number { 
            display: inline-block; background: #2d57a4; color: white; padding: 4px 12px; 
            border-radius: 15px; font-size: 0.9em; margin-right: 10px;
        }
        
        .options { margin: 15px 0; }
        .option {
            display: block; background: white; padding: 12px; margin: 8px 0; 
            border: 2px solid #e0e0e0; border-radius: 8px; cursor: pointer; 
            transition: all 0.3s; position: relative;
        }
        .option:hover { background: #e8f5ff; border-color: #608de0; }
        .option.selected { background: #608de0; color: white; border-color: #2d57a4; }
        .option.correct { 
            background: #5ca353; color: white; border-color: #4a8842; 
            animation: correctPulse 0.5s ease-in-out;
        }
        .option.incorrect { 
            background: #D46A6A; color: white; border-color: #912d32;
            animation: shake 0.5s ease-in-out;
        }
        
        @keyframes correctPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        
        .feedback { margin: 15px 0; padding: 15px; border-radius: 8px; font-weight: bold; }
        .feedback.correct { background: #e8f5e9; color: #5ca353; border-left: 5px solid #5ca353; }
        .feedback.incorrect { background: #ffebee; color: #912d32; border-left: 5px solid #912d32; }
        
        .progress-bar { 
            width: 100%; height: 30px; background: #e0e0e0; border-radius: 15px; 
            overflow: hidden; margin: 20px 0; position: relative;
        }
        .progress-fill {
            height: 100%; background: linear-gradient(90deg, #2d57a4 0%, #5ca353 100%);
            transition: width 0.5s; display: flex; align-items: center; justify-content: center;
            color: white; font-weight: bold;
        }
        
        .topic-indicator {
            background: linear-gradient(135deg, #e3f2fd 0%, #f0f9ff 100%);
            border-left: 5px solid #2d57a4; padding: 15px; margin: 20px 0; 
            border-radius: 8px; text-align: center;
        }
        .topic-name { color: #2d57a4; font-size: 1.3em; font-weight: bold; }
        .topic-progress { color: #666; font-size: 0.9em; margin-top: 8px; }
        
        .stats-table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        .stats-table th, .stats-table td { padding: 12px; text-align: left; border: 1px solid #e0e0e0; }
        .stats-table th { background: linear-gradient(135deg, #2d57a4 0%, #608de0 100%); color: white; }
        .stats-table tr:nth-child(even) { background: #f8f9fa; }
        
        .mastery-excellent { color: #5ca353; font-weight: bold; }
        .mastery-good { color: #608de0; font-weight: bold; }
        .mastery-fair { color: #D46A6A; font-weight: bold; }
        .mastery-poor { color: #912d32; font-weight: bold; }
        
        .info-box { 
            background: linear-gradient(135deg, #e8f5ff 0%, #f0f9ff 100%);
            border-left: 5px solid #2d57a4; padding: 15px; margin: 15px 0; border-radius: 8px; 
        }
        
        .student-info-display {
            background: #f8f9fa; padding: 12px; border-radius: 8px; margin-bottom: 20px;
            text-align: center; color: #2d57a4; font-weight: bold;
        }
        
        .explanation-detail {
            margin-top: 10px; padding: 10px; background: rgba(255,255,255,0.5);
            border-radius: 5px; font-size: 0.95em; font-weight: normal;
        }
        
        code {
            background: #f0f0f0; padding: 2px 6px; border-radius: 4px; 
            font-family: Consolas, monospace; font-size: 0.95em;
        }
    </style>
</head>
<body>
    <div id="mathjaxStatus" class="mathjax-status loading">æ­£åœ¨åŠ è½½æ•°å­¦å…¬å¼...</div>
    
    <div class="container">
        <!-- ç™»å½•ç•Œé¢ -->
        <div class="login-section active">
            <h1>ğŸ“ DSP-Lab3 FIRæ»¤æ³¢å™¨è®¾è®¡ æ™ºèƒ½ç»ƒä¹ ç³»ç»Ÿ</h1>
            <div class="info-box">
                <strong>ğŸ“Œ ç³»ç»Ÿç‰¹è‰²</strong>
                <ul style="margin: 10px 0 0 20px; line-height: 1.8;">
                    <li><strong>çŸ¥è¯†ç‚¹å…¨è¦†ç›–</strong>ï¼šæ¶µç›–FIRåŸºæœ¬ç»“æ„ã€ç†æƒ³æ»¤æ³¢å™¨ã€çº¿æ€§ç›¸ä½ã€çª—å‡½æ•°æ³•ã€MATLABå®ç°ç­‰10å¤§æ ¸å¿ƒçŸ¥è¯†ç‚¹</li>
                    <li><strong>é¢˜ç›®éšæœºåŒ–</strong>ï¼šæ¯æ¬¡ç»ƒä¹ æ•°å€¼ã€é€‰é¡¹é¡ºåºéƒ½ä¸åŒï¼Œé¿å…æ­»è®°ç¡¬èƒŒ</li>
                    <li><strong>æ™ºèƒ½å¾ªç¯</strong>ï¼šç­”é”™è‡ªåŠ¨å‡ºæ–°é¢˜å·©å›ºï¼Œç­”å¯¹æ‰è¿›å…¥ä¸‹ä¸€çŸ¥è¯†ç‚¹</li>
                    <li><strong>è¯¦ç»†åé¦ˆ</strong>ï¼šæ¯é¢˜éƒ½æœ‰è¯¦ç»†è§£æï¼Œå¸®åŠ©ç†è§£FIRæ»¤æ³¢å™¨è®¾è®¡åŸç†</li>
                </ul>
            </div>
            <div class="form-group">
                <label>å­¦å·:</label>
                <input type="text" id="studentId" placeholder="è¯·è¾“å…¥å­¦å·">
            </div>
            <div class="form-group">
                <label>å§“å:</label>
                <input type="text" id="studentName" placeholder="è¯·è¾“å…¥å§“å">
            </div>
            <button onclick="startQuiz()">å¼€å§‹ç»ƒä¹ </button>
        </div>

        <!-- æµ‹éªŒç•Œé¢ -->
        <div class="quiz-section">
            <h1>DSP-Lab3 FIRæ»¤æ³¢å™¨è®¾è®¡ æ™ºèƒ½ç»ƒä¹ </h1>
            <div id="studentInfo" class="student-info-display"></div>
            
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar">0%</div>
            </div>
            
            <div id="currentTopic" class="topic-indicator"></div>
            
            <div class="question-box">
                <div class="question-title" id="questionTitle"></div>
                <div id="questionContent"></div>
                <div id="options" class="options"></div>
                <div id="feedback"></div>
                <button id="submitBtn" onclick="submitAnswer()">æäº¤ç­”æ¡ˆ</button>
                <button id="nextBtn" onclick="nextQuestion()" style="display:none;">ä¸‹ä¸€é¢˜</button>
            </div>
        </div>

        <!-- ç»“æœç•Œé¢ -->
        <div class="result-section">
            <h1>ğŸ“Š ç»ƒä¹ ç»“æœæŠ¥å‘Š</h1>
            <div id="finalReport"></div>
            <button onclick="saveScreenshot()" id="saveBtn">ğŸ’¾ ä¿å­˜æŠ¥å‘Š</button>
            <button onclick="location.reload()" style="margin-left: 10px;">ğŸ”„ é‡æ–°ç»ƒä¹ </button>
        </div>
    </div>

    <script>
        // ==================== çŸ¥è¯†ç‚¹é¢˜åº“å®šä¹‰ ====================
        const knowledgeBase = {
            // çŸ¥è¯†ç‚¹1: FIRæ»¤æ³¢å™¨åŸºæœ¬ç»“æ„
            firBasic: {
                id: 'firBasic',
                name: 'FIRæ»¤æ³¢å™¨åŸºæœ¬ç»“æ„',
                description: 'ç†è§£FIRæ»¤æ³¢å™¨çš„å·®åˆ†æ–¹ç¨‹ã€ç³»ç»Ÿå‡½æ•°å’Œç¨³å®šæ€§',
                questionGenerators: [
                    {
                        type: 'single',
                        generate: () => {
                            const M = [15, 31, 63, 127][Math.floor(Math.random() * 4)];
                            return {
                                question: `ä¸€ä¸ª ${M} é˜¶FIRæ»¤æ³¢å™¨çš„é•¿åº¦ N æ˜¯å¤šå°‘ï¼Ÿ`,
                                options: shuffleOptions([
                                    { text: `N = ${M + 1}`, correct: true },
                                    { text: `N = ${M}`, correct: false },
                                    { text: `N = ${M - 1}`, correct: false },
                                    { text: `N = ${2 * M}`, correct: false }
                                ]),
                                explanation: `FIRæ»¤æ³¢å™¨é•¿åº¦ N = M + 1ï¼Œå…¶ä¸­ M æ˜¯æ»¤æ³¢å™¨é˜¶æ•°ã€‚é˜¶æ•° M = ${M} çš„æ»¤æ³¢å™¨æœ‰ ${M + 1} ä¸ªç³»æ•° $b[0], b[1], ..., b[${M}]$ã€‚`
                            };
                        }
                    },
                    {
                        type: 'single',
                        generate: () => {
                            return {
                                question: `FIRæ»¤æ³¢å™¨çš„ç³»ç»Ÿå‡½æ•° $H(z)$ çš„ç‰¹ç‚¹æ˜¯ï¼š`,
                                options: shuffleOptions([
                                    { text: 'åªæœ‰é›¶ç‚¹ï¼Œæ²¡æœ‰æç‚¹ï¼ˆé™¤äº†z=0å¤„ï¼‰', correct: true },
                                    { text: 'åªæœ‰æç‚¹ï¼Œæ²¡æœ‰é›¶ç‚¹', correct: false },
                                    { text: 'æ—¢æœ‰é›¶ç‚¹ä¹Ÿæœ‰æç‚¹', correct: false },
                                    { text: 'é›¶ç‚¹å’Œæç‚¹éƒ½æ²¡æœ‰', correct: false }
                                ]),
                                explanation: `FIRæ»¤æ³¢å™¨ $H(z) = \\sum_{m=0}^{M} b[m]z^{-m}$ æ˜¯zçš„å¤šé¡¹å¼ï¼Œåªæœ‰é›¶ç‚¹ã€‚ç”±äºæ²¡æœ‰åé¦ˆï¼ˆæç‚¹åœ¨z=0ï¼‰ï¼ŒFIRæ»¤æ³¢å™¨<strong>å§‹ç»ˆç¨³å®š</strong>ã€‚`
                            };
                        }
                    },
                    {
                        type: 'single',
                        generate: () => {
                            return {
                                question: `FIRæ»¤æ³¢å™¨ç›¸æ¯”IIRæ»¤æ³¢å™¨çš„ä¸»è¦ä¼˜ç‚¹æ˜¯ï¼š`,
                                options: shuffleOptions([
                                    { text: 'å§‹ç»ˆç¨³å®šï¼Œæ˜“äºå®ç°çº¿æ€§ç›¸ä½', correct: true },
                                    { text: 'é˜¶æ•°æ›´ä½ï¼Œè®¡ç®—é‡æ›´å°', correct: false },
                                    { text: 'è¿‡æ¸¡å¸¦æ›´çª„', correct: false },
                                    { text: 'é¢‘ç‡å“åº”æ›´çµæ´»', correct: false }
                                ]),
                                explanation: `FIRæ»¤æ³¢å™¨çš„ä¼˜ç‚¹ï¼š1)å§‹ç»ˆç¨³å®šï¼ˆæ— æç‚¹ï¼‰ï¼›2)æ˜“äºå®ç°ç²¾ç¡®çš„çº¿æ€§ç›¸ä½ï¼›3)é‡åŒ–è¯¯å·®å½±å“å°ã€‚ç¼ºç‚¹æ˜¯è¾¾åˆ°ç›¸åŒæŒ‡æ ‡éœ€è¦æ›´é«˜çš„é˜¶æ•°ã€‚`
                            };
                        }
                    },
                    {
                        type: 'single',
                        generate: () => {
                            const N = [16, 32, 64, 128][Math.floor(Math.random() * 4)];
                            return {
                                question: `ä¸€ä¸ª ${N} ç‚¹FIRæ»¤æ³¢å™¨æ¯å¤„ç†ä¸€ä¸ªè¾“å…¥æ ·æœ¬éœ€è¦å¤šå°‘æ¬¡ä¹˜æ³•ï¼Ÿ`,
                                options: shuffleOptions([
                                    { text: `${N} æ¬¡`, correct: true },
                                    { text: `${N - 1} æ¬¡`, correct: false },
                                    { text: `${2 * N} æ¬¡`, correct: false },
                                    { text: `${N / 2} æ¬¡`, correct: false }
                                ]),
                                explanation: `Nç‚¹FIRæ»¤æ³¢å™¨ $y[n] = \\sum_{m=0}^{N-1} b[m]x[n-m]$ï¼Œæ¯ä¸ªè¾“å‡ºéœ€è¦Næ¬¡ä¹˜æ³•å’ŒN-1æ¬¡åŠ æ³•ã€‚è¿™æ˜¯FIRæ»¤æ³¢å™¨è®¡ç®—å¤æ‚åº¦çš„åŸºç¡€ã€‚`
                            };
                        }
                    },
                    {
                        type: 'single',
                        generate: () => {
                            return {
                                question: `FIRæ»¤æ³¢å™¨çš„å·®åˆ†æ–¹ç¨‹æ˜¯ï¼š`,
                                options: shuffleOptions([
                                    { text: `$y[n] = \\sum_{m=0}^{M} b[m] \\cdot x[n-m]$`, correct: true },
                                    { text: `$y[n] = \\sum_{m=0}^{M} a[m] \\cdot y[n-m]$`, correct: false },
                                    { text: `$y[n] = b[0]x[n] - \\sum_{m=1}^{M} a[m]y[n-m]$`, correct: false },
                                    { text: `$Y(z) = H(z) \\cdot X(z)$`, correct: false }
                                ]),
                                explanation: `FIRæ»¤æ³¢å™¨åªæœ‰å‰é¦ˆé¡¹ï¼ˆxçš„å»¶è¿Ÿï¼‰ï¼Œæ²¡æœ‰åé¦ˆé¡¹ï¼ˆyçš„å»¶è¿Ÿï¼‰ã€‚è¾“å‡ºä»…å–å†³äºå½“å‰å’Œè¿‡å»Mä¸ªè¾“å…¥å€¼ï¼Œè¿™æ˜¯"æœ‰é™è„‰å†²å“åº”"åç§°çš„ç”±æ¥ã€‚`
                            };
                        }
                    }
                ]
            },

            // çŸ¥è¯†ç‚¹2: ç†æƒ³æ»¤æ³¢å™¨ä¸å› æœæ€§
            idealFilter: {
                id: 'idealFilter',
                name: 'ç†æƒ³æ»¤æ³¢å™¨ä¸å› æœæ€§',
                description: 'ç†è§£ç†æƒ³ä½é€šæ»¤æ³¢å™¨çš„è„‰å†²å“åº”åŠå…¶ä¸å¯å®ç°æ€§',
                questionGenerators: [
                    {
                        type: 'single',
                        generate: () => {
                            return {
                                question: `ç†æƒ³ä½é€šæ»¤æ³¢å™¨çš„é¢‘ç‡å“åº” $H_d(e^{j\\omega})$ åœ¨é€šå¸¦å†…çš„å€¼æ˜¯ï¼š`,
                                options: shuffleOptions([
                                    { text: 'æ’ç­‰äº1', correct: true },
                                    { text: 'ç­‰æ³¢çº¹å˜åŒ–', correct: false },
                                    { text: 'çº¿æ€§å¢åŠ ', correct: false },
                                    { text: 'æŒ‡æ•°è¡°å‡', correct: false }
                                ]),
                                explanation: `ç†æƒ³LPFï¼š$H_d(e^{j\\omega}) = 1$ å½“ $|\\omega| \\leq \\omega_c$ï¼Œ$H_d(e^{j\\omega}) = 0$ å½“ $\\omega_c < |\\omega| \\leq \\pi$ã€‚é€šå¸¦å®Œå…¨å¹³å¦ï¼Œé˜»å¸¦å®Œå…¨ä¸ºé›¶ã€‚`
                            };
                        }
                    },
                    {
                        type: 'single',
                        generate: () => {
                            return {
                                question: `ç†æƒ³ä½é€šæ»¤æ³¢å™¨çš„è„‰å†²å“åº” $h_d[n]$ æ˜¯ï¼š`,
                                options: shuffleOptions([
                                    { text: `$h_d[n] = \\frac{\\omega_c}{\\pi} \\cdot \\text{sinc}(\\omega_c n / \\pi)$`, correct: true },
                                    { text: `$h_d[n] = \\delta[n]$`, correct: false },
                                    { text: `$h_d[n] = u[n]$`, correct: false },
                                    { text: `$h_d[n] = e^{-n}$`, correct: false }
                                ]),
                                explanation: `ç†æƒ³LPFçš„è„‰å†²å“åº”æ˜¯sincå‡½æ•°ï¼Œä¸­å¿ƒåœ¨n=0ï¼Œå‘ä¸¤ä¾§æ— é™å»¶ä¼¸ã€‚è¿™æ˜¯å‚…é‡Œå¶å˜æ¢å¯¹ï¼šçŸ©å½¢çª— â†” sincå‡½æ•°ã€‚`
                            };
                        }
                    },
                    {
                        type: 'single',
                        generate: () => {
                            return {
                                question: `ç†æƒ³æ»¤æ³¢å™¨æ— æ³•ç‰©ç†å®ç°çš„æ ¹æœ¬åŸå› æ˜¯ï¼š`,
                                options: shuffleOptions([
                                    { text: 'è„‰å†²å“åº”æ˜¯éå› æœçš„ï¼ˆn<0æ—¶h[n]â‰ 0ï¼‰ä¸”æ— é™é•¿', correct: true },
                                    { text: 'è®¡ç®—é‡å¤ªå¤§', correct: false },
                                    { text: 'MATLABä¸æ”¯æŒ', correct: false },
                                    { text: 'é¢‘ç‡å“åº”ä¸è¿ç»­', correct: false }
                                ]),
                                explanation: `ç†æƒ³æ»¤æ³¢å™¨çš„sincè„‰å†²å“åº”åœ¨n<0æ—¶ä¸ä¸ºé›¶ï¼ˆéå› æœï¼‰ï¼Œæ„å‘³ç€è¾“å‡ºä¾èµ–äº"æœªæ¥"çš„è¾“å…¥ã€‚æ­¤å¤–ï¼Œè„‰å†²å“åº”æ— é™é•¿ï¼Œéœ€è¦æ— é™å­˜å‚¨ã€‚è¿™ä¸¤ç‚¹ä½¿å…¶æ— æ³•ç‰©ç†å®ç°ã€‚`
                            };
                        }
                    },
                    {
                        type: 'single',
                        generate: () => {
                            const wc = ['\\pi/4', '\\pi/3', '\\pi/2', '2\\pi/3'][Math.floor(Math.random() * 4)];
                            return {
                                question: `å¦‚æœç†æƒ³ä½é€šæ»¤æ³¢å™¨çš„æˆªæ­¢é¢‘ç‡ $\\omega_c = ${wc}$ï¼Œåˆ™ $h_d[0]$ çš„å€¼æ˜¯ï¼š`,
                                options: shuffleOptions([
                                    { text: `$\\omega_c / \\pi$`, correct: true },
                                    { text: `$1$`, correct: false },
                                    { text: `$0$`, correct: false },
                                    { text: `$\\pi / \\omega_c$`, correct: false }
                                ]),
                                explanation: `å½“ n=0 æ—¶ï¼Œ$h_d[0] = \\frac{\\omega_c}{\\pi} \\cdot \\text{sinc}(0) = \\frac{\\omega_c}{\\pi}$ï¼Œå› ä¸º sinc(0) = 1ã€‚è¿™æ˜¯è„‰å†²å“åº”çš„å³°å€¼ã€‚`
                            };
                        }
                    },
                    {
                        type: 'single',
                        generate: () => {
                            return {
                                question: `å®é™…FIRæ»¤æ³¢å™¨å¦‚ä½•è¿‘ä¼¼ç†æƒ³æ»¤æ³¢å™¨ï¼Ÿ`,
                                options: shuffleOptions([
                                    { text: 'ç”¨çª—å‡½æ•°æˆªæ–­è„‰å†²å“åº”ï¼Œå¹¶è¿›è¡Œæ—¶ç§»ä½¿å…¶å› æœåŒ–', correct: true },
                                    { text: 'å¢åŠ é‡‡æ ·ç‡', correct: false },
                                    { text: 'ä½¿ç”¨æ›´é«˜ç²¾åº¦çš„æµ®ç‚¹æ•°', correct: false },
                                    { text: 'å‡å°æˆªæ­¢é¢‘ç‡', correct: false }
                                ]),
                                explanation: `å®é™…è®¾è®¡ï¼š1)ç”¨çª—å‡½æ•°å°†æ— é™é•¿sincæˆªæ–­ä¸ºNç‚¹ï¼›2)æ—¶ç§»N/2ä½¿å…¶å˜ä¸ºå› æœï¼›3)ä»£ä»·æ˜¯äº§ç”Ÿè¿‡æ¸¡å¸¦å’Œé€šå¸¦/é˜»å¸¦æ³¢åŠ¨ã€‚è¿™å°±æ˜¯çª—å‡½æ•°è®¾è®¡æ³•çš„æ ¸å¿ƒæ€æƒ³ã€‚`
                            };
                        }
                    }
                ]
            },

            // çŸ¥è¯†ç‚¹3: çº¿æ€§ç›¸ä½ç‰¹æ€§
            linearPhase: {
                id: 'linearPhase',
                name: 'çº¿æ€§ç›¸ä½ç‰¹æ€§ä¸GLP',
                description: 'ç†è§£å¹¿ä¹‰çº¿æ€§ç›¸ä½çš„æ¡ä»¶ã€ç±»å‹å’Œå·¥ç¨‹æ„ä¹‰',
                questionGenerators: [
                    {
                        type: 'single',
                        generate: () => {
                            return {
                                question: `çº¿æ€§ç›¸ä½æ»¤æ³¢å™¨çš„ç›¸ä½å“åº”å½¢å¼æ˜¯ï¼š`,
                                options: shuffleOptions([
                                    { text: `$\\phi(\\omega) = -\\tau\\omega$ æˆ– $\\phi(\\omega) = -\\tau\\omega + \\pi/2$`, correct: true },
                                    { text: `$\\phi(\\omega) = \\omega^2$`, correct: false },
                                    { text: `$\\phi(\\omega) = \\text{å¸¸æ•°}$`, correct: false },
                                    { text: `$\\phi(\\omega) = \\sin(\\omega)$`, correct: false }
                                ]),
                                explanation: `çº¿æ€§ç›¸ä½æ„å‘³ç€ç›¸ä½æ˜¯é¢‘ç‡çš„çº¿æ€§å‡½æ•°ã€‚ç¾¤å»¶è¿Ÿ $\\tau = -d\\phi/d\\omega$ ä¸ºå¸¸æ•°ï¼Œæ‰€æœ‰é¢‘ç‡åˆ†é‡æœ‰ç›¸åŒçš„æ—¶é—´å»¶è¿Ÿï¼Œä¸äº§ç”Ÿç›¸ä½å¤±çœŸã€‚`
                            };
                        }
                    },
                    {
                        type: 'single',
                        generate: () => {
                            const N = [31, 33, 65, 129][Math.floor(Math.random() * 4)];
                            const tau = (N - 1) / 2;
                            return {
                                question: `ä¸€ä¸ª ${N} ç‚¹çº¿æ€§ç›¸ä½FIRæ»¤æ³¢å™¨çš„ç¾¤å»¶è¿Ÿæ˜¯å¤šå°‘ä¸ªæ ·æœ¬ï¼Ÿ`,
                                options: shuffleOptions([
                                    { text: `${tau} ä¸ªæ ·æœ¬`, correct: true },
                                    { text: `${N} ä¸ªæ ·æœ¬`, correct: false },
                                    { text: `${N - 1} ä¸ªæ ·æœ¬`, correct: false },
                                    { text: `${Math.floor(N / 4)} ä¸ªæ ·æœ¬`, correct: false }
                                ]),
                                explanation: `çº¿æ€§ç›¸ä½FIRæ»¤æ³¢å™¨çš„ç¾¤å»¶è¿Ÿ $\\tau = (N-1)/2$ã€‚å¯¹äº N=${N}ï¼Œç¾¤å»¶è¿Ÿ = ${tau} ä¸ªæ ·æœ¬ã€‚è¿™æ„å‘³ç€è¾“å‡ºæ¯”è¾“å…¥å»¶è¿Ÿ ${tau} ä¸ªé‡‡æ ·å‘¨æœŸã€‚`
                            };
                        }
                    },
                    {
                        type: 'single',
                        generate: () => {
                            return {
                                question: `FIRæ»¤æ³¢å™¨å…·æœ‰çº¿æ€§ç›¸ä½çš„æ¡ä»¶æ˜¯ï¼š`,
                                options: shuffleOptions([
                                    { text: 'è„‰å†²å“åº”å…³äºä¸­å¿ƒç‚¹å¯¹ç§°ï¼ˆå¶å¯¹ç§°æˆ–å¥‡å¯¹ç§°ï¼‰', correct: true },
                                    { text: 'æ‰€æœ‰ç³»æ•°ç›¸ç­‰', correct: false },
                                    { text: 'é˜¶æ•°ä¸ºå¶æ•°', correct: false },
                                    { text: 'ä½¿ç”¨æ±‰æ˜çª—è®¾è®¡', correct: false }
                                ]),
                                explanation: `çº¿æ€§ç›¸ä½æ¡ä»¶ï¼š$h[n] = \\pm h[M-n]$ã€‚å¶å¯¹ç§° $h[n]=h[M-n]$ å¯¹åº”Type I/IIï¼›å¥‡å¯¹ç§° $h[n]=-h[M-n]$ å¯¹åº”Type III/IVã€‚`
                            };
                        }
                    },
                    {
                        type: 'single',
                        generate: () => {
                            return {
                                question: `Type II çº¿æ€§ç›¸ä½æ»¤æ³¢å™¨ï¼ˆå¶å¯¹ç§°ï¼Œå¶æ•°é•¿åº¦ï¼‰ä¸èƒ½è®¾è®¡é«˜é€šæ»¤æ³¢å™¨ï¼Œå› ä¸ºï¼š`,
                                options: shuffleOptions([
                                    { text: 'åœ¨ $\\omega = \\pi$ å¤„å¿…æœ‰é›¶ç‚¹ï¼Œå³ $H(e^{j\\pi}) = 0$', correct: true },
                                    { text: 'è®¡ç®—é‡å¤ªå¤§', correct: false },
                                    { text: 'MATLABä¸æ”¯æŒ', correct: false },
                                    { text: 'ä¼šäº§ç”Ÿæ··å ', correct: false }
                                ]),
                                explanation: `Type IIçš„å¯¹ç§°æ€§å¯¼è‡´åœ¨ $z=-1$ï¼ˆå³ $\\omega=\\pi$ï¼‰å¤„å¿…æœ‰é›¶ç‚¹ã€‚é«˜é€šæ»¤æ³¢å™¨éœ€è¦åœ¨ $\\omega=\\pi$ å¤„é€šè¿‡ä¿¡å·ï¼Œå› æ­¤Type IIä¸é€‚åˆè®¾è®¡é«˜é€šæ»¤æ³¢å™¨ã€‚`
                            };
                        }
                    },
                    {
                        type: 'single',
                        generate: () => {
                            return {
                                question: `çº¿æ€§ç›¸ä½å¯¹éŸ³é¢‘å¤„ç†çš„é‡è¦æ„ä¹‰æ˜¯ï¼š`,
                                options: shuffleOptions([
                                    { text: 'æ‰€æœ‰é¢‘ç‡åˆ†é‡å»¶è¿Ÿç›¸åŒï¼Œä¿¡å·æ³¢å½¢ä¸å¤±çœŸ', correct: true },
                                    { text: 'å¯ä»¥æé«˜éŸ³é‡', correct: false },
                                    { text: 'å¯ä»¥æ¶ˆé™¤å™ªå£°', correct: false },
                                    { text: 'å¯ä»¥å‹ç¼©æ–‡ä»¶å¤§å°', correct: false }
                                ]),
                                explanation: `çº¿æ€§ç›¸ä½=æ’å®šç¾¤å»¶è¿Ÿï¼Œæ‰€æœ‰é¢‘ç‡æˆåˆ†æœ‰ç›¸åŒçš„æ—¶é—´å»¶è¿Ÿã€‚å¯¹äºéŸ³é¢‘ï¼Œè¿™æ„å‘³ç€æ»¤æ³¢åæ³¢å½¢å½¢çŠ¶ä¿æŒä¸å˜ï¼Œåªæ˜¯æ•´ä½“å»¶è¿Ÿï¼Œä¸ä¼šäº§ç”Ÿç›¸ä½å¤±çœŸå¯¼è‡´çš„éŸ³è‰²æ”¹å˜ã€‚`
                            };
                        }
                    }
                ]
            },

            // çŸ¥è¯†ç‚¹4: GLPå››ç§ç±»å‹
            glpTypes: {
                id: 'glpTypes',
                name: 'GLPå››ç§ç±»å‹è¯¦è§£',
                description: 'æŒæ¡Type I-IVçš„ç‰¹ç‚¹å’Œé€‚ç”¨åœºæ™¯',
                questionGenerators: [
                    {
                        type: 'single',
                        generate: () => {
                            return {
                                question: `Type I çº¿æ€§ç›¸ä½æ»¤æ³¢å™¨çš„ç‰¹ç‚¹æ˜¯ï¼š`,
                                options: shuffleOptions([
                                    { text: 'å¶å¯¹ç§°ï¼Œå¥‡æ•°é•¿åº¦ï¼Œå¯è®¾è®¡ä»»ä½•ç±»å‹æ»¤æ³¢å™¨', correct: true },
                                    { text: 'å¶å¯¹ç§°ï¼Œå¶æ•°é•¿åº¦', correct: false },
                                    { text: 'å¥‡å¯¹ç§°ï¼Œå¥‡æ•°é•¿åº¦', correct: false },
                                    { text: 'å¥‡å¯¹ç§°ï¼Œå¶æ•°é•¿åº¦', correct: false }
                                ]),
                                explanation: `Type Iï¼š$h[n]=h[M-n]$ï¼ˆå¶å¯¹ç§°ï¼‰ï¼ŒNä¸ºå¥‡æ•°ï¼ŒMä¸ºå¶æ•°ã€‚åœ¨ $\\omega=0$ å’Œ $\\omega=\\pi$ å¤„æ— å¼ºåˆ¶é›¶ç‚¹ï¼Œå¯è®¾è®¡LP/HP/BP/BSæ‰€æœ‰ç±»å‹ã€‚`
                            };
                        }
                    },
                    {
                        type: 'single',
                        generate: () => {
                            return {
                                question: `Type III çº¿æ€§ç›¸ä½æ»¤æ³¢å™¨é€‚åˆè®¾è®¡ï¼š`,
                                options: shuffleOptions([
                                    { text: 'å¸Œå°”ä¼¯ç‰¹å˜æ¢å™¨ã€å¾®åˆ†å™¨', correct: true },
                                    { text: 'ä½é€šæ»¤æ³¢å™¨', correct: false },
                                    { text: 'é«˜é€šæ»¤æ³¢å™¨', correct: false },
                                    { text: 'å¸¦é€šæ»¤æ³¢å™¨', correct: false }
                                ]),
                                explanation: `Type IIIï¼ˆå¥‡å¯¹ç§°ï¼Œå¥‡æ•°é•¿åº¦ï¼‰åœ¨ $\\omega=0$ å’Œ $\\omega=\\pi$ éƒ½æœ‰é›¶ç‚¹ï¼Œä¸èƒ½è®¾è®¡éœ€è¦åœ¨è¿™äº›é¢‘ç‡é€šè¿‡çš„æ»¤æ³¢å™¨ã€‚ä½†æ­£å¥½é€‚åˆå¸Œå°”ä¼¯ç‰¹å˜æ¢å™¨ï¼ˆ90Â°ç§»ç›¸å™¨ï¼‰å’Œå¾®åˆ†å™¨ã€‚`
                            };
                        }
                    },
                    {
                        type: 'single',
                        generate: () => {
                            return {
                                question: `å¦‚æœéœ€è¦è®¾è®¡ä¸€ä¸ªå¶æ•°é•¿åº¦çš„é«˜é€šFIRæ»¤æ³¢å™¨ï¼Œåº”è¯¥é€‰æ‹©ï¼š`,
                                options: shuffleOptions([
                                    { text: 'Type IVï¼ˆå¥‡å¯¹ç§°ï¼Œå¶æ•°é•¿åº¦ï¼‰', correct: true },
                                    { text: 'Type I', correct: false },
                                    { text: 'Type II', correct: false },
                                    { text: 'Type III', correct: false }
                                ]),
                                explanation: `Type IVï¼šå¥‡å¯¹ç§°ï¼Œå¶æ•°é•¿åº¦ï¼Œåªåœ¨ $\\omega=0$ æœ‰é›¶ç‚¹ã€‚é«˜é€šæ»¤æ³¢å™¨éœ€è¦é˜»æ­¢DCï¼ˆ$\\omega=0$ï¼‰ï¼Œæ‰€ä»¥Type IVçš„é›¶ç‚¹çº¦æŸæ­£å¥½æ»¡è¶³è¦æ±‚ã€‚`
                            };
                        }
                    },
                    {
                        type: 'single',
                        generate: () => {
                            return {
                                question: `ä½¿ç”¨ MATLAB çš„ <code>fir1</code> å‡½æ•°è®¾è®¡çš„æ»¤æ³¢å™¨é»˜è®¤æ˜¯ï¼š`,
                                options: shuffleOptions([
                                    { text: 'Type I æˆ– Type IIï¼ˆå–å†³äºé˜¶æ•°å¥‡å¶ï¼‰', correct: true },
                                    { text: 'åªèƒ½æ˜¯ Type I', correct: false },
                                    { text: 'åªèƒ½æ˜¯ Type III', correct: false },
                                    { text: 'éçº¿æ€§ç›¸ä½', correct: false }
                                ]),
                                explanation: `<code>fir1</code> ä½¿ç”¨å¶å¯¹ç§°è®¾è®¡ï¼Œé˜¶æ•°Mä¸ºå¶æ•°æ—¶å¾—åˆ°Type Iï¼ˆNå¥‡æ•°ï¼‰ï¼ŒMä¸ºå¥‡æ•°æ—¶å¾—åˆ°Type IIï¼ˆNå¶æ•°ï¼‰ã€‚å¯é€šè¿‡é˜¶æ•°æ§åˆ¶ç±»å‹ã€‚`
                            };
                        }
                    },
                    {
                        type: 'single',
                        generate: () => {
                            const types = [
                                { name: 'Type I', sym: 'å¶å¯¹ç§°', len: 'å¥‡æ•°', zeros: 'æ— å¼ºåˆ¶é›¶ç‚¹' },
                                { name: 'Type II', sym: 'å¶å¯¹ç§°', len: 'å¶æ•°', zeros: 'H(Ï€)=0' },
                                { name: 'Type III', sym: 'å¥‡å¯¹ç§°', len: 'å¥‡æ•°', zeros: 'H(0)=H(Ï€)=0' },
                                { name: 'Type IV', sym: 'å¥‡å¯¹ç§°', len: 'å¶æ•°', zeros: 'H(0)=0' }
                            ];
                            const idx = Math.floor(Math.random() * 4);
                            const t = types[idx];
                            return {
                                question: `${t.name} çº¿æ€§ç›¸ä½æ»¤æ³¢å™¨çš„é›¶ç‚¹çº¦æŸæ˜¯ï¼š`,
                                options: shuffleOptions([
                                    { text: t.zeros, correct: true },
                                    { text: types[(idx + 1) % 4].zeros, correct: false },
                                    { text: types[(idx + 2) % 4].zeros, correct: false },
                                    { text: types[(idx + 3) % 4].zeros, correct: false }
                                ]),
                                explanation: `${t.name}ï¼š${t.sym}ï¼Œ${t.len}é•¿åº¦ã€‚é›¶ç‚¹çº¦æŸï¼š${t.zeros}ã€‚è¿™å†³å®šäº†è¯¥ç±»å‹é€‚åˆè®¾è®¡å“ªç§æ»¤æ³¢å™¨ã€‚`
                            };
                        }
                    }
                ]
            },

            // çŸ¥è¯†ç‚¹5: çª—å‡½æ•°åŸºç¡€
            windowBasic: {
                id: 'windowBasic',
                name: 'çª—å‡½æ•°è®¾è®¡æ³•åŸºç¡€',
                description: 'ç†è§£çª—å‡½æ•°æ³•çš„åŸºæœ¬åŸç†',
                questionGenerators: [
                    {
                        type: 'single',
                        generate: () => {
                            return {
                                question: `çª—å‡½æ•°è®¾è®¡æ³•çš„åŸºæœ¬å…¬å¼æ˜¯ï¼š`,
                                options: shuffleOptions([
                                    { text: `$h[n] = h_d[n] \\cdot w[n]$`, correct: true },
                                    { text: `$h[n] = h_d[n] + w[n]$`, correct: false },
                                    { text: `$h[n] = h_d[n] / w[n]$`, correct: false },
                                    { text: `$H(z) = H_d(z) \\cdot W(z)$`, correct: false }
                                ]),
                                explanation: `çª—å‡½æ•°æ³•ï¼šå°†ç†æƒ³æ»¤æ³¢å™¨çš„æ— é™é•¿è„‰å†²å“åº” $h_d[n]$ ä¸æœ‰é™é•¿çª—å‡½æ•° $w[n]$ ç›¸ä¹˜ï¼Œå¾—åˆ°å®é™…å¯å®ç°çš„FIRæ»¤æ³¢å™¨ã€‚æ—¶åŸŸç›¸ä¹˜å¯¹åº”é¢‘åŸŸå·ç§¯ã€‚`
                            };
                        }
                    },
                    {
                        type: 'single',
                        generate: () => {
                            return {
                                question: `çª—å‡½æ•°æ³•åœ¨é¢‘åŸŸçš„æ•ˆæœæ˜¯ï¼š`,
                                options: shuffleOptions([
                                    { text: 'ç†æƒ³æ»¤æ³¢å™¨é¢‘å“ä¸çª—å‡½æ•°é¢‘å“çš„å·ç§¯', correct: true },
                                    { text: 'ç†æƒ³æ»¤æ³¢å™¨é¢‘å“ä¸çª—å‡½æ•°é¢‘å“çš„ä¹˜ç§¯', correct: false },
                                    { text: 'ç†æƒ³æ»¤æ³¢å™¨é¢‘å“çš„å¯¼æ•°', correct: false },
                                    { text: 'ç†æƒ³æ»¤æ³¢å™¨é¢‘å“çš„ç§¯åˆ†', correct: false }
                                ]),
                                explanation: `æ—¶åŸŸç›¸ä¹˜ = é¢‘åŸŸå·ç§¯ï¼š$H(e^{j\\omega}) = \\frac{1}{2\\pi} H_d(e^{j\\omega}) * W(e^{j\\omega})$ã€‚çª—å‡½æ•°çš„é¢‘è°±ç‰¹æ€§ï¼ˆä¸»ç“£å®½åº¦ã€æ—ç“£é«˜åº¦ï¼‰ç›´æ¥å½±å“æ»¤æ³¢å™¨æ€§èƒ½ã€‚`
                            };
                        }
                    },
                    {
                        type: 'single',
                        generate: () => {
                            return {
                                question: `çŸ©å½¢çª—çš„å®šä¹‰æ˜¯ï¼š`,
                                options: shuffleOptions([
                                    { text: `$w[n] = 1$ï¼Œ$0 \\leq n \\leq N-1$ï¼›å…¶ä»–ä¸º0`, correct: true },
                                    { text: `$w[n] = n$`, correct: false },
                                    { text: `$w[n] = \\cos(n)$`, correct: false },
                                    { text: `$w[n] = e^{-n}$`, correct: false }
                                ]),
                                explanation: `çŸ©å½¢çª—æ˜¯æœ€ç®€å•çš„çª—å‡½æ•°ï¼Œçª—å†…å€¼å…¨ä¸º1ï¼Œçª—å¤–ä¸º0ã€‚ç›¸å½“äºç›´æ¥æˆªæ–­ã€‚ä¼˜ç‚¹æ˜¯ä¸»ç“£æœ€çª„ï¼Œç¼ºç‚¹æ˜¯æ—ç“£æœ€é«˜ï¼ˆ-13dBï¼‰ã€‚`
                            };
                        }
                    },
                    {
                        type: 'single',
                        generate: () => {
                            return {
                                question: `çª—å‡½æ•°è®¾è®¡æ³•ä¸­ï¼Œçª—å‡½æ•°é•¿åº¦Nå¢åŠ ä¼šå¯¼è‡´ï¼š`,
                                options: shuffleOptions([
                                    { text: 'è¿‡æ¸¡å¸¦å˜çª„ï¼Œä½†è®¡ç®—é‡å¢åŠ ', correct: true },
                                    { text: 'è¿‡æ¸¡å¸¦å˜å®½', correct: false },
                                    { text: 'æ—ç“£è¡°å‡å‡å°', correct: false },
                                    { text: 'å¯¹æ»¤æ³¢å™¨æ²¡æœ‰å½±å“', correct: false }
                                ]),
                                explanation: `å¢åŠ Nä½¿çª—å‡½æ•°é¢‘è°±çš„ä¸»ç“£å˜çª„ï¼ˆ$\\propto 1/N$ï¼‰ï¼Œä»è€Œå‡å°è¿‡æ¸¡å¸¦å®½åº¦ã€‚ä½†Nå¢åŠ æ„å‘³ç€æ›´å¤šç³»æ•°ï¼Œè®¡ç®—é‡å¢åŠ ã€‚è¿™æ˜¯æ€§èƒ½ä¸å¤æ‚åº¦çš„æƒè¡¡ã€‚`
                            };
                        }
                    },
                    {
                        type: 'single',
                        generate: () => {
                            return {
                                question: `ç›´æ¥ç”¨çŸ©å½¢çª—æˆªæ–­ç†æƒ³æ»¤æ³¢å™¨ä¼šäº§ç”Ÿä»€ä¹ˆç°è±¡ï¼Ÿ`,
                                options: shuffleOptions([
                                    { text: 'Gibbsç°è±¡ï¼šè¿‡æ¸¡å¸¦å¤„å‡ºç°çº¦9%çš„è¿‡å†²', correct: true },
                                    { text: 'æ»¤æ³¢å™¨ä¸ç¨³å®š', correct: false },
                                    { text: 'ç›¸ä½å˜æˆéçº¿æ€§', correct: false },
                                    { text: 'æ²¡æœ‰ä»»ä½•è´Ÿé¢å½±å“', correct: false }
                                ]),
                                explanation: `Gibbsç°è±¡ï¼šç”¨æœ‰é™é¡¹å‚…é‡Œå¶çº§æ•°é€¼è¿‘ä¸è¿ç»­å‡½æ•°æ—¶ï¼Œåœ¨ä¸è¿ç»­ç‚¹é™„è¿‘å‡ºç°çº¦9%çš„è¿‡å†²ï¼Œä¸”ä¸éšé¡¹æ•°å¢åŠ è€Œå‡å°ã€‚è¿™æ˜¯çŸ©å½¢çª—æ—ç“£é«˜ï¼ˆ-13dBï¼‰çš„æ ¹æœ¬åŸå› ã€‚`
                            };
                        }
                    }
                ]
            },

            // çŸ¥è¯†ç‚¹6: å¸¸ç”¨çª—å‡½æ•°ç‰¹æ€§
            windowTypes: {
                id: 'windowTypes',
                name: 'å¸¸ç”¨çª—å‡½æ•°ç‰¹æ€§å¯¹æ¯”',
                description: 'æŒæ¡çŸ©å½¢çª—ã€æ±‰æ˜çª—ã€å¸ƒè±å…‹æ›¼çª—çš„ç‰¹ç‚¹',
                questionGenerators: [
                    {
                        type: 'single',
                        generate: () => {
                            return {
                                question: `ä»¥ä¸‹çª—å‡½æ•°ä¸­ï¼Œæ—ç“£è¡°å‡æœ€å¤§ï¼ˆé˜»å¸¦è¡°å‡æœ€å¥½ï¼‰çš„æ˜¯ï¼š`,
                                options: shuffleOptions([
                                    { text: 'å¸ƒè±å…‹æ›¼çª—ï¼ˆçº¦-58dBï¼‰', correct: true },
                                    { text: 'æ±‰æ˜çª—ï¼ˆçº¦-43dBï¼‰', correct: false },
                                    { text: 'æ±‰å®çª—ï¼ˆçº¦-32dBï¼‰', correct: false },
                                    { text: 'çŸ©å½¢çª—ï¼ˆçº¦-13dBï¼‰', correct: false }
                                ]),
                                explanation: `æ—ç“£è¡°å‡æ’åºï¼šå¸ƒè±å…‹æ›¼(-58dB) > æ±‰æ˜(-43dB) > æ±‰å®(-32dB) > çŸ©å½¢(-13dB)ã€‚å¸ƒè±å…‹æ›¼çª—é˜»å¸¦è¡°å‡æœ€å¥½ï¼Œä½†ä¸»ç“£æœ€å®½ï¼ˆè¿‡æ¸¡å¸¦æœ€å®½ï¼‰ã€‚`
                            };
                        }
                    },
                    {
                        type: 'single',
                        generate: () => {
                            return {
                                question: `ä»¥ä¸‹çª—å‡½æ•°ä¸­ï¼Œä¸»ç“£å®½åº¦æœ€çª„ï¼ˆè¿‡æ¸¡å¸¦æœ€çª„ï¼‰çš„æ˜¯ï¼š`,
                                options: shuffleOptions([
                                    { text: 'çŸ©å½¢çª—ï¼ˆçº¦4Ï€/Nï¼‰', correct: true },
                                    { text: 'æ±‰æ˜çª—ï¼ˆçº¦8Ï€/Nï¼‰', correct: false },
                                    { text: 'å¸ƒè±å…‹æ›¼çª—ï¼ˆçº¦12Ï€/Nï¼‰', correct: false },
                                    { text: 'æ±‰å®çª—ï¼ˆçº¦8Ï€/Nï¼‰', correct: false }
                                ]),
                                explanation: `ä¸»ç“£å®½åº¦æ’åºï¼šçŸ©å½¢(4Ï€/N) < æ±‰å®/æ±‰æ˜(8Ï€/N) < å¸ƒè±å…‹æ›¼(12Ï€/N)ã€‚çŸ©å½¢çª—è¿‡æ¸¡å¸¦æœ€çª„ï¼Œä½†æ—ç“£æœ€é«˜ã€‚è¿™æ˜¯ä¸»ç“£å®½åº¦ä¸æ—ç“£è¡°å‡çš„ç»å…¸æƒè¡¡ã€‚`
                            };
                        }
                    },
                    {
                        type: 'single',
                        generate: () => {
                            return {
                                question: `æ±‰æ˜çª—çš„æ•°å­¦è¡¨è¾¾å¼æ˜¯ï¼š`,
                                options: shuffleOptions([
                                    { text: `$w[n] = 0.54 - 0.46\\cos(2\\pi n/(N-1))$`, correct: true },
                                    { text: `$w[n] = 0.5 - 0.5\\cos(2\\pi n/(N-1))$`, correct: false },
                                    { text: `$w[n] = 1$`, correct: false },
                                    { text: `$w[n] = 0.42 - 0.5\\cos(...) + 0.08\\cos(...)$`, correct: false }
                                ]),
                                explanation: `æ±‰æ˜çª—ç³»æ•°0.54å’Œ0.46ç»è¿‡ä¼˜åŒ–ï¼Œä½¿å¾—ç¬¬ä¸€æ—ç“£å‡ ä¹è¢«æ¶ˆé™¤ï¼Œæ—ç“£è¡°å‡è¾¾åˆ°-43dBã€‚æ±‰å®çª—ç”¨0.5å’Œ0.5ï¼Œæ—ç“£è¡°å‡åªæœ‰-32dBã€‚`
                            };
                        }
                    },
                    {
                        type: 'single',
                        generate: () => {
                            return {
                                question: `å¦‚æœéœ€è¦è®¾è®¡é˜»å¸¦è¡°å‡â‰¥50dBçš„FIRæ»¤æ³¢å™¨ï¼Œåº”è¯¥é€‰æ‹©ï¼š`,
                                options: shuffleOptions([
                                    { text: 'å¸ƒè±å…‹æ›¼çª—æˆ–å‡¯æ³½çª—', correct: true },
                                    { text: 'çŸ©å½¢çª—', correct: false },
                                    { text: 'æ±‰å®çª—', correct: false },
                                    { text: 'ä¸‰è§’çª—', correct: false }
                                ]),
                                explanation: `çŸ©å½¢çª—çº¦-21dBï¼Œæ±‰å®çª—çº¦-44dBï¼Œæ±‰æ˜çª—çº¦-53dBï¼Œå¸ƒè±å…‹æ›¼çª—çº¦-74dBé˜»å¸¦è¡°å‡ã€‚è¦è¾¾åˆ°50dBä»¥ä¸Šï¼Œéœ€è¦å¸ƒè±å…‹æ›¼çª—æˆ–å¯è°ƒå‚æ•°çš„å‡¯æ³½çª—ã€‚`
                            };
                        }
                    },
                    {
                        type: 'single',
                        generate: () => {
                            return {
                                question: `çª—å‡½æ•°è®¾è®¡çš„æ ¸å¿ƒæƒè¡¡æ˜¯ï¼š`,
                                options: shuffleOptions([
                                    { text: 'ä¸»ç“£å®½åº¦ï¼ˆè¿‡æ¸¡å¸¦ï¼‰ä¸æ—ç“£è¡°å‡ï¼ˆé˜»å¸¦è¡°å‡ï¼‰', correct: true },
                                    { text: 'è®¡ç®—é€Ÿåº¦ä¸ç²¾åº¦', correct: false },
                                    { text: 'ç¨³å®šæ€§ä¸å› æœæ€§', correct: false },
                                    { text: 'ç›¸ä½ä¸å¹…åº¦', correct: false }
                                ]),
                                explanation: `çª—å‡½æ•°è®¾è®¡çš„åŸºæœ¬æƒè¡¡ï¼šçª„ä¸»ç“£â†’çª„è¿‡æ¸¡å¸¦ï¼Œä½†æ—ç“£é«˜â†’é˜»å¸¦è¡°å‡å·®ï¼›ä½æ—ç“£â†’å¥½é˜»å¸¦è¡°å‡ï¼Œä½†ä¸»ç“£å®½â†’å®½è¿‡æ¸¡å¸¦ã€‚æ²¡æœ‰å®Œç¾çª—å‡½æ•°ï¼Œéœ€æ ¹æ®åº”ç”¨é€‰æ‹©ã€‚`
                            };
                        }
                    }
                ]
            },

            // çŸ¥è¯†ç‚¹7: MATLABè®¾è®¡å‡½æ•°
            matlabDesign: {
                id: 'matlabDesign',
                name: 'MATLAB FIRè®¾è®¡å‡½æ•°',
                description: 'æŒæ¡fir1ã€freqzã€filterç­‰å‡½æ•°çš„ä½¿ç”¨',
                questionGenerators: [
                    {
                        type: 'single',
                        generate: () => {
                            const M = [31, 63, 127][Math.floor(Math.random() * 3)];
                            const Wn = [0.25, 0.4, 0.5][Math.floor(Math.random() * 3)];
                            return {
                                question: `ä½¿ç”¨æ±‰æ˜çª—è®¾è®¡${M}é˜¶ã€å½’ä¸€åŒ–æˆªæ­¢é¢‘ç‡${Wn}çš„ä½é€šæ»¤æ³¢å™¨ï¼Œæ­£ç¡®ä»£ç æ˜¯ï¼š`,
                                options: shuffleOptions([
                                    { text: `<code>h = fir1(${M}, ${Wn});</code>`, correct: true },
                                    { text: `<code>h = fir1(${Wn}, ${M});</code>`, correct: false },
                                    { text: `<code>h = butter(${M}, ${Wn});</code>`, correct: false },
                                    { text: `<code>h = firpm(${M}, ${Wn});</code>`, correct: false }
                                ]),
                                explanation: `<code>fir1(M, Wn)</code>ï¼šMæ˜¯é˜¶æ•°ï¼ŒWnæ˜¯å½’ä¸€åŒ–æˆªæ­¢é¢‘ç‡ï¼ˆç›¸å¯¹äºNyquisté¢‘ç‡ï¼‰ã€‚é»˜è®¤ä½¿ç”¨æ±‰æ˜çª—ï¼Œé»˜è®¤è®¾è®¡ä½é€šæ»¤æ³¢å™¨ã€‚`
                            };
                        }
                    },
                    {
                        type: 'single',
                        generate: () => {
                            return {
                                question: `<code>fir1</code>å‡½æ•°ä¸­ï¼Œå½’ä¸€åŒ–æˆªæ­¢é¢‘ç‡Wnçš„èŒƒå›´æ˜¯ï¼š`,
                                options: shuffleOptions([
                                    { text: '0åˆ°1ä¹‹é—´ï¼Œ1å¯¹åº”Nyquisté¢‘ç‡ï¼ˆFs/2ï¼‰', correct: true },
                                    { text: '0åˆ°Ï€ä¹‹é—´', correct: false },
                                    { text: '0åˆ°Fsä¹‹é—´', correct: false },
                                    { text: '-1åˆ°1ä¹‹é—´', correct: false }
                                ]),
                                explanation: `MATLABä¸­Wnæ˜¯ç›¸å¯¹äºNyquisté¢‘ç‡çš„å½’ä¸€åŒ–å€¼ã€‚Wn=0.5è¡¨ç¤ºæˆªæ­¢é¢‘ç‡åœ¨Fs/4å¤„ã€‚å¦‚æœFs=48kHzï¼ŒWn=0.5å¯¹åº”12kHzã€‚`
                            };
                        }
                    },
                    {
                        type: 'single',
                        generate: () => {
                            return {
                                question: `ä½¿ç”¨å¸ƒè±å…‹æ›¼çª—è®¾è®¡å¸¦é€šæ»¤æ³¢å™¨çš„ä»£ç æ˜¯ï¼š`,
                                options: shuffleOptions([
                                    { text: `<code>h = fir1(M, [Wn1 Wn2], blackman(M+1));</code>`, correct: true },
                                    { text: `<code>h = fir1(M, [Wn1 Wn2], 'blackman');</code>`, correct: false },
                                    { text: `<code>h = fir1(M, Wn1, Wn2, blackman);</code>`, correct: false },
                                    { text: `<code>h = fir2(M, [Wn1 Wn2], blackman);</code>`, correct: false }
                                ]),
                                explanation: `å¸¦é€šæ»¤æ³¢å™¨éœ€è¦ä¸¤ä¸ªæˆªæ­¢é¢‘ç‡[Wn1 Wn2]ã€‚çª—å‡½æ•°é€šè¿‡å‘é‡å½¢å¼ä¼ å…¥ï¼Œé•¿åº¦ä¸ºM+1ã€‚<code>blackman(M+1)</code>ç”Ÿæˆå¸ƒè±å…‹æ›¼çª—å‘é‡ã€‚`
                            };
                        }
                    },
                    {
                        type: 'single',
                        generate: () => {
                            return {
                                question: `<code>freqz(h, 1, 1024)</code> å‡½æ•°çš„ä½œç”¨æ˜¯ï¼š`,
                                options: shuffleOptions([
                                    { text: 'è®¡ç®—FIRæ»¤æ³¢å™¨håœ¨1024ä¸ªé¢‘ç‡ç‚¹çš„é¢‘ç‡å“åº”', correct: true },
                                    { text: 'å¯¹ä¿¡å·è¿›è¡Œ1024ç‚¹æ»¤æ³¢', correct: false },
                                    { text: 'è®¾è®¡1024é˜¶æ»¤æ³¢å™¨', correct: false },
                                    { text: 'è®¡ç®—1024ç‚¹FFT', correct: false }
                                ]),
                                explanation: `<code>[H,w] = freqz(h, 1, N)</code> è®¡ç®—FIRæ»¤æ³¢å™¨hï¼ˆåˆ†æ¯ä¸º1ï¼‰åœ¨Nä¸ªå‡åŒ€åˆ†å¸ƒé¢‘ç‡ç‚¹çš„å¤æ•°é¢‘ç‡å“åº”Hå’Œå¯¹åº”çš„é¢‘ç‡å‘é‡wã€‚`
                            };
                        }
                    },
                    {
                        type: 'single',
                        generate: () => {
                            return {
                                question: `ä½¿ç”¨è®¾è®¡å¥½çš„FIRæ»¤æ³¢å™¨hå¯¹ä¿¡å·xè¿›è¡Œæ»¤æ³¢çš„ä»£ç æ˜¯ï¼š`,
                                options: shuffleOptions([
                                    { text: `<code>y = filter(h, 1, x);</code> æˆ– <code>y = conv(h, x);</code>`, correct: true },
                                    { text: `<code>y = fft(h, x);</code>`, correct: false },
                                    { text: `<code>y = freqz(h, x);</code>`, correct: false },
                                    { text: `<code>y = h * x;</code>`, correct: false }
                                ]),
                                explanation: `<code>filter(h, 1, x)</code> å®ç°å·®åˆ†æ–¹ç¨‹æ»¤æ³¢ï¼›<code>conv(h, x)</code> è®¡ç®—å·ç§¯ã€‚å¯¹äºFIRæ»¤æ³¢å™¨ä¸¤è€…ç­‰æ•ˆï¼Œä½†filteræ›´é€‚åˆå®æ—¶å¤„ç†ï¼Œconvè®¡ç®—å®Œæ•´å·ç§¯ã€‚`
                            };
                        }
                    }
                ]
            },

            // çŸ¥è¯†ç‚¹8: æ»¤æ³¢å™¨æ€§èƒ½æŒ‡æ ‡
            filterSpecs: {
                id: 'filterSpecs',
                name: 'æ»¤æ³¢å™¨æ€§èƒ½æŒ‡æ ‡',
                description: 'ç†è§£é€šå¸¦æ³¢åŠ¨ã€é˜»å¸¦è¡°å‡ã€è¿‡æ¸¡å¸¦å®½åº¦ç­‰æŒ‡æ ‡',
                questionGenerators: [
                    {
                        type: 'single',
                        generate: () => {
                            return {
                                question: `æ»¤æ³¢å™¨çš„"é˜»å¸¦è¡°å‡"æ˜¯æŒ‡ï¼š`,
                                options: shuffleOptions([
                                    { text: 'é˜»å¸¦å†…é¢‘ç‡å“åº”çš„æœ€å¤§å€¼ï¼ˆç›¸å¯¹äºé€šå¸¦ï¼Œç”¨dBè¡¨ç¤ºï¼‰', correct: true },
                                    { text: 'é€šå¸¦å†…çš„æœ€å¤§æ³¢åŠ¨', correct: false },
                                    { text: 'è¿‡æ¸¡å¸¦çš„å®½åº¦', correct: false },
                                    { text: 'ç¾¤å»¶è¿Ÿçš„å˜åŒ–', correct: false }
                                ]),
                                explanation: `é˜»å¸¦è¡°å‡ = 20logâ‚â‚€(é˜»å¸¦æœ€å¤§å€¼/é€šå¸¦å€¼)ï¼Œé€šå¸¸ä¸ºè´Ÿå€¼å¦‚-50dBã€‚è¡°å‡è¶Šå¤§ï¼ˆç»å¯¹å€¼è¶Šå¤§ï¼‰ï¼Œé˜»å¸¦ä¿¡å·è¢«æŠ‘åˆ¶å¾—è¶Šå¥½ã€‚`
                            };
                        }
                    },
                    {
                        type: 'single',
                        generate: () => {
                            return {
                                question: `è¿‡æ¸¡å¸¦å®½åº¦ä¸»è¦ç”±ä»€ä¹ˆå†³å®šï¼Ÿ`,
                                options: shuffleOptions([
                                    { text: 'çª—å‡½æ•°çš„ä¸»ç“£å®½åº¦ï¼ˆä¸Næˆåæ¯”ï¼‰', correct: true },
                                    { text: 'æˆªæ­¢é¢‘ç‡çš„å¤§å°', correct: false },
                                    { text: 'é‡‡æ ·é¢‘ç‡', correct: false },
                                    { text: 'ä¿¡å·çš„å¸¦å®½', correct: false }
                                ]),
                                explanation: `è¿‡æ¸¡å¸¦å®½åº¦ â‰ˆ çª—å‡½æ•°ä¸»ç“£å®½åº¦ã€‚çŸ©å½¢çª—çº¦4Ï€/Nï¼Œæ±‰æ˜çª—çº¦8Ï€/Nã€‚å¢åŠ Nå¯ä»¥å‡å°è¿‡æ¸¡å¸¦ï¼Œä½†å¢åŠ è®¡ç®—é‡å’Œå»¶è¿Ÿã€‚`
                            };
                        }
                    },
                    {
                        type: 'single',
                        generate: () => {
                            const att = [40, 50, 60, 70][Math.floor(Math.random() * 4)];
                            return {
                                question: `å¦‚æœè¦æ±‚é˜»å¸¦è¡°å‡è‡³å°‘${att}dBï¼Œåº”è¯¥é€‰æ‹©ä»€ä¹ˆçª—å‡½æ•°ï¼Ÿ`,
                                options: shuffleOptions([
                                    { text: att <= 53 ? 'æ±‰æ˜çª—ï¼ˆçº¦53dBï¼‰æˆ–æ›´å¥½' : 'å¸ƒè±å…‹æ›¼çª—ï¼ˆçº¦74dBï¼‰', correct: true },
                                    { text: 'çŸ©å½¢çª—ï¼ˆçº¦21dBï¼‰', correct: false },
                                    { text: 'æ±‰å®çª—ï¼ˆçº¦44dBï¼‰', correct: false },
                                    { text: 'ä¸‰è§’çª—ï¼ˆçº¦25dBï¼‰', correct: false }
                                ]),
                                explanation: `çª—å‡½æ•°é˜»å¸¦è¡°å‡ï¼šçŸ©å½¢~21dBï¼Œä¸‰è§’~25dBï¼Œæ±‰å®~44dBï¼Œæ±‰æ˜~53dBï¼Œå¸ƒè±å…‹æ›¼~74dBã€‚æ ¹æ®æŒ‡æ ‡é€‰æ‹©èƒ½æ»¡è¶³è¦æ±‚çš„çª—å‡½æ•°ï¼ŒåŒæ—¶å°½é‡é€‰ä¸»ç“£çª„çš„ã€‚`
                            };
                        }
                    },
                    {
                        type: 'single',
                        generate: () => {
                            return {
                                question: `FIRæ»¤æ³¢å™¨çš„é€šå¸¦æ³¢åŠ¨ä¸»è¦æ¥æºäºï¼š`,
                                options: shuffleOptions([
                                    { text: 'çª—å‡½æ•°é¢‘è°±çš„æ—ç“£', correct: true },
                                    { text: 'é‡‡æ ·ç‡ä¸å¤Ÿé«˜', correct: false },
                                    { text: 'æ»¤æ³¢å™¨é˜¶æ•°å¤ªé«˜', correct: false },
                                    { text: 'æˆªæ­¢é¢‘ç‡è®¾ç½®é”™è¯¯', correct: false }
                                ]),
                                explanation: `çª—å‡½æ•°æ³•é€šè¿‡é¢‘åŸŸå·ç§¯å®ç°ã€‚çª—å‡½æ•°é¢‘è°±çš„æ—ç“£ä¼š"æ³„æ¼"åˆ°é€šå¸¦ï¼Œé€ æˆæ³¢åŠ¨ã€‚æ—ç“£è¶Šé«˜ï¼Œé€šå¸¦æ³¢åŠ¨è¶Šå¤§ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ä½æ—ç“£çª—å‡½æ•°ã€‚`
                            };
                        }
                    },
                    {
                        type: 'single',
                        generate: () => {
                            const Fs = 48000;
                            const BW = [1000, 2000, 4000][Math.floor(Math.random() * 3)];
                            const N = Math.ceil(4 * Fs / BW);
                            return {
                                question: `é‡‡æ ·ç‡${Fs}Hzï¼Œè¦æ±‚è¿‡æ¸¡å¸¦å®½åº¦çº¦${BW}Hzï¼ˆä½¿ç”¨çŸ©å½¢çª—ï¼‰ï¼Œå¤§çº¦éœ€è¦å¤šå°‘é˜¶æ»¤æ³¢å™¨ï¼Ÿ`,
                                options: shuffleOptions([
                                    { text: `çº¦${N}é˜¶`, correct: true },
                                    { text: `çº¦${Math.floor(N/2)}é˜¶`, correct: false },
                                    { text: `çº¦${N*2}é˜¶`, correct: false },
                                    { text: `çº¦${Math.floor(N/4)}é˜¶`, correct: false }
                                ]),
                                explanation: `çŸ©å½¢çª—è¿‡æ¸¡å¸¦å®½åº¦ â‰ˆ 4Ï€/N (rad/sample) = 4Fs/(N) (Hz)ã€‚è§£å‡º N â‰ˆ 4Fs/BW = 4Ã—${Fs}/${BW} â‰ˆ ${N}ã€‚æ±‰æ˜çª—éœ€è¦çº¦2å€é˜¶æ•°ã€‚`
                            };
                        }
                    }
                ]
            },

            // çŸ¥è¯†ç‚¹9: ä¿¡å·æ»¤æ³¢åº”ç”¨
            filterApplication: {
                id: 'filterApplication',
                name: 'ä¿¡å·æ»¤æ³¢å®é™…åº”ç”¨',
                description: 'ç†è§£æ»¤æ³¢å¯¹ä¿¡å·é¢‘è°±çš„å½±å“',
                questionGenerators: [
                    {
                        type: 'single',
                        generate: () => {
                            const f1 = 1000, f2 = 5000, fc = 3000;
                            return {
                                question: `ä¿¡å·åŒ…å«${f1}Hzå’Œ${f2}Hzä¸¤ä¸ªåˆ†é‡ï¼Œç»è¿‡æˆªæ­¢é¢‘ç‡${fc}Hzçš„ä½é€šæ»¤æ³¢å™¨åï¼š`,
                                options: shuffleOptions([
                                    { text: `${f1}Hzåˆ†é‡é€šè¿‡ï¼Œ${f2}Hzåˆ†é‡è¢«è¡°å‡`, correct: true },
                                    { text: `ä¸¤ä¸ªåˆ†é‡éƒ½é€šè¿‡`, correct: false },
                                    { text: `ä¸¤ä¸ªåˆ†é‡éƒ½è¢«è¡°å‡`, correct: false },
                                    { text: `${f1}Hzè¢«è¡°å‡ï¼Œ${f2}Hzé€šè¿‡`, correct: false }
                                ]),
                                explanation: `ä½é€šæ»¤æ³¢å™¨é€šè¿‡ä½äºæˆªæ­¢é¢‘ç‡çš„åˆ†é‡ï¼Œè¡°å‡é«˜äºæˆªæ­¢é¢‘ç‡çš„åˆ†é‡ã€‚${f1}Hz < ${fc}Hz åœ¨é€šå¸¦ï¼Œ${f2}Hz > ${fc}Hz åœ¨é˜»å¸¦ã€‚`
                            };
                        }
                    },
                    {
                        type: 'single',
                        generate: () => {
                            return {
                                question: `ä½¿ç”¨FIRæ»¤æ³¢å™¨è¿›è¡Œå®æ—¶è¯­éŸ³é™å™ªæ—¶ï¼Œä¸»è¦å…³æ³¨çš„æ€§èƒ½æŒ‡æ ‡æ˜¯ï¼š`,
                                options: shuffleOptions([
                                    { text: 'ä½å»¶è¿Ÿï¼ˆçŸ­ç¾¤å»¶è¿Ÿï¼‰å’Œçº¿æ€§ç›¸ä½', correct: true },
                                    { text: 'æœ€çª„è¿‡æ¸¡å¸¦', correct: false },
                                    { text: 'æœ€é«˜é˜»å¸¦è¡°å‡', correct: false },
                                    { text: 'æœ€ä½è®¡ç®—é‡', correct: false }
                                ]),
                                explanation: `å®æ—¶è¯­éŸ³å¤„ç†å¯¹å»¶è¿Ÿæ•æ„Ÿï¼ˆç¾¤å»¶è¿Ÿè¦å°ï¼‰ï¼Œä¸”çº¿æ€§ç›¸ä½ä¿è¯è¯­éŸ³ä¸å¤±çœŸã€‚è¿™é™åˆ¶äº†æ»¤æ³¢å™¨é˜¶æ•°ï¼Œéœ€è¦åœ¨æ€§èƒ½å’Œå»¶è¿Ÿä¹‹é—´æƒè¡¡ã€‚`
                            };
                        }
                    },
                    {
                        type: 'single',
                        generate: () => {
                            return {
                                question: `FFTåˆ†ææ»¤æ³¢å‰åçš„ä¿¡å·å¯ä»¥è§‚å¯Ÿåˆ°ï¼š`,
                                options: shuffleOptions([
                                    { text: 'é˜»å¸¦é¢‘ç‡åˆ†é‡çš„å¹…åº¦æ˜æ˜¾é™ä½', correct: true },
                                    { text: 'æ‰€æœ‰é¢‘ç‡åˆ†é‡éƒ½å¢å¼º', correct: false },
                                    { text: 'ç›¸ä½å˜æˆéšæœºçš„', correct: false },
                                    { text: 'é¢‘è°±å˜æˆå¹³å¦çš„', correct: false }
                                ]),
                                explanation: `æ»¤æ³¢çš„æœ¬è´¨æ˜¯æ”¹å˜ä¿¡å·çš„é¢‘è°±ã€‚ä½é€šæ»¤æ³¢åï¼Œé˜»å¸¦ï¼ˆé«˜é¢‘ï¼‰åˆ†é‡è¢«è¡°å‡ï¼Œåœ¨FFTé¢‘è°±ä¸Šè¡¨ç°ä¸ºå¯¹åº”é¢‘ç‡çš„å¹…åº¦ä¸‹é™ã€‚é€šå¸¦åˆ†é‡åŸºæœ¬ä¸å˜ã€‚`
                            };
                        }
                    },
                    {
                        type: 'single',
                        generate: () => {
                            return {
                                question: `å¿ƒç”µå›¾(ECG)ä¿¡å·å¤„ç†é€šå¸¸ä½¿ç”¨FIRæ»¤æ³¢å™¨è€ŒéIIRï¼Œä¸»è¦åŸå› æ˜¯ï¼š`,
                                options: shuffleOptions([
                                    { text: 'çº¿æ€§ç›¸ä½ä¿è¯ECGæ³¢å½¢ä¸å¤±çœŸ', correct: true },
                                    { text: 'FIRè®¡ç®—æ›´å¿«', correct: false },
                                    { text: 'IIRä¸èƒ½æ»¤æ³¢', correct: false },
                                    { text: 'FIRé˜¶æ•°æ›´ä½', correct: false }
                                ]),
                                explanation: `ECGè¯Šæ–­ä¾èµ–æ³¢å½¢å½¢æ€ï¼ˆPæ³¢ã€QRSæ³¢ç¾¤ã€Tæ³¢ï¼‰ã€‚IIRçš„éçº¿æ€§ç›¸ä½ä¼šå¯¼è‡´æ³¢å½¢å¤±çœŸï¼Œå¯èƒ½å½±å“è¯Šæ–­ã€‚FIRçš„çº¿æ€§ç›¸ä½ä¿è¯æ³¢å½¢ä¿çœŸã€‚`
                            };
                        }
                    },
                    {
                        type: 'single',
                        generate: () => {
                            const N = [32, 64, 128][Math.floor(Math.random() * 3)];
                            const delay = (N - 1) / 2;
                            const Fs = 48000;
                            const delayMs = (delay / Fs * 1000).toFixed(2);
                            return {
                                question: `${N}ç‚¹FIRæ»¤æ³¢å™¨åœ¨${Fs}Hzé‡‡æ ·ç‡ä¸‹çš„å»¶è¿Ÿæ˜¯å¤šå°‘æ¯«ç§’ï¼Ÿ`,
                                options: shuffleOptions([
                                    { text: `çº¦${delayMs}ms`, correct: true },
                                    { text: `çº¦${(N / Fs * 1000).toFixed(2)}ms`, correct: false },
                                    { text: `çº¦${(1000 / Fs).toFixed(2)}ms`, correct: false },
                                    { text: `0msï¼ˆæ— å»¶è¿Ÿï¼‰`, correct: false }
                                ]),
                                explanation: `çº¿æ€§ç›¸ä½FIRå»¶è¿Ÿ = (N-1)/2 ä¸ªæ ·æœ¬ = ${delay}/${Fs}ç§’ = ${delayMs}msã€‚å®æ—¶åº”ç”¨éœ€è¦è€ƒè™‘è¿™ä¸ªå»¶è¿Ÿæ˜¯å¦å¯æ¥å—ã€‚`
                            };
                        }
                    }
                ]
            },

            // çŸ¥è¯†ç‚¹10: FIR vs IIR å¯¹æ¯”
            firVsIir: {
                id: 'firVsIir',
                name: 'FIRä¸IIRæ»¤æ³¢å™¨å¯¹æ¯”',
                description: 'ç†è§£ä¸¤ç§æ»¤æ³¢å™¨çš„ä¼˜ç¼ºç‚¹å’Œåº”ç”¨åœºæ™¯',
                questionGenerators: [
                    {
                        type: 'single',
                        generate: () => {
                            return {
                                question: `ä»¥ä¸‹å“ªé¡¹æ˜¯FIRæ»¤æ³¢å™¨ç›¸å¯¹äºIIRæ»¤æ³¢å™¨çš„ä¼˜ç‚¹ï¼Ÿ`,
                                options: shuffleOptions([
                                    { text: 'å§‹ç»ˆç¨³å®šï¼Œæ˜“äºå®ç°ç²¾ç¡®çº¿æ€§ç›¸ä½', correct: true },
                                    { text: 'ç›¸åŒæŒ‡æ ‡ä¸‹é˜¶æ•°æ›´ä½', correct: false },
                                    { text: 'è¿‡æ¸¡å¸¦æ›´çª„', correct: false },
                                    { text: 'è®¾è®¡æ›´ç®€å•', correct: false }
                                ]),
                                explanation: `FIRä¼˜ç‚¹ï¼š1)æ— æç‚¹ï¼Œå§‹ç»ˆç¨³å®šï¼›2)å¯ç²¾ç¡®å®ç°çº¿æ€§ç›¸ä½ï¼›3)é‡åŒ–è¯¯å·®å½±å“å°ã€‚IIRä¼˜ç‚¹ï¼šç›¸åŒæŒ‡æ ‡ä¸‹é˜¶æ•°ä½ã€è®¡ç®—é‡å°ã€‚`
                            };
                        }
                    },
                    {
                        type: 'single',
                        generate: () => {
                            return {
                                question: `åœ¨éœ€è¦ä¸¥æ ¼çº¿æ€§ç›¸ä½çš„åº”ç”¨ä¸­ï¼Œåº”è¯¥é€‰æ‹©ï¼š`,
                                options: shuffleOptions([
                                    { text: 'FIRæ»¤æ³¢å™¨', correct: true },
                                    { text: 'Butterworth IIRæ»¤æ³¢å™¨', correct: false },
                                    { text: 'Chebyshev IIRæ»¤æ³¢å™¨', correct: false },
                                    { text: 'Elliptic IIRæ»¤æ³¢å™¨', correct: false }
                                ]),
                                explanation: `IIRæ»¤æ³¢å™¨ç”±äºé€’å½’ç»“æ„ï¼Œç›¸ä½å“åº”é€šå¸¸æ˜¯éçº¿æ€§çš„ã€‚åªæœ‰FIRæ»¤æ³¢å™¨ï¼ˆå¯¹ç§°è„‰å†²å“åº”ï¼‰èƒ½å®ç°ç²¾ç¡®çš„çº¿æ€§ç›¸ä½ã€‚`
                            };
                        }
                    },
                    {
                        type: 'single',
                        generate: () => {
                            return {
                                question: `åœ¨èµ„æºå—é™çš„åµŒå…¥å¼ç³»ç»Ÿä¸­ï¼Œå¦‚æœå¯ä»¥æ¥å—éçº¿æ€§ç›¸ä½ï¼Œé€šå¸¸ä¼˜å…ˆé€‰æ‹©ï¼š`,
                                options: shuffleOptions([
                                    { text: 'IIRæ»¤æ³¢å™¨ï¼Œå› ä¸ºé˜¶æ•°ä½ã€è®¡ç®—é‡å°', correct: true },
                                    { text: 'FIRæ»¤æ³¢å™¨', correct: false },
                                    { text: 'ä¸ä½¿ç”¨æ»¤æ³¢å™¨', correct: false },
                                    { text: 'ä¸¤è€…è®¡ç®—é‡ç›¸åŒ', correct: false }
                                ]),
                                explanation: `IIRæ»¤æ³¢å™¨è¾¾åˆ°ç›¸åŒé¢‘ç‡é€‰æ‹©æ€§éœ€è¦çš„é˜¶æ•°è¿œä½äºFIRï¼ˆå¦‚IIR 4é˜¶ vs FIR 64é˜¶ï¼‰ï¼Œè®¡ç®—é‡å’Œå­˜å‚¨éœ€æ±‚éƒ½æ›´å°ï¼Œé€‚åˆèµ„æºå—é™åœºæ™¯ã€‚`
                            };
                        }
                    },
                    {
                        type: 'single',
                        generate: () => {
                            return {
                                question: `FIRæ»¤æ³¢å™¨åœ¨FPGA/DSPä¸­æ›´å®¹æ˜“å®ç°å¹¶è¡ŒåŒ–ï¼ŒåŸå› æ˜¯ï¼š`,
                                options: shuffleOptions([
                                    { text: 'æ²¡æœ‰åé¦ˆï¼Œå„ä¹˜åŠ è¿ç®—å¯åŒæ—¶è¿›è¡Œ', correct: true },
                                    { text: 'FIRé˜¶æ•°æ›´ä½', correct: false },
                                    { text: 'FIRä¸éœ€è¦ä¹˜æ³•', correct: false },
                                    { text: 'FPGAåªæ”¯æŒFIR', correct: false }
                                ]),
                                explanation: `FIRæ˜¯çº¯å‰é¦ˆç»“æ„ï¼Œæ‰€æœ‰$h[k]Â·x[n-k]$å¯ä»¥åŒæ—¶è®¡ç®—ç„¶åæ±‚å’Œã€‚IIRæœ‰åé¦ˆï¼Œå½“å‰è¾“å‡ºä¾èµ–äºä¹‹å‰è¾“å‡ºï¼Œéš¾ä»¥å¹¶è¡ŒåŒ–ã€‚`
                            };
                        }
                    },
                    {
                        type: 'single',
                        generate: () => {
                            return {
                                question: `å…³äºFIRå’ŒIIRçš„ç¨³å®šæ€§ï¼Œæ­£ç¡®çš„è¯´æ³•æ˜¯ï¼š`,
                                options: shuffleOptions([
                                    { text: 'FIRå§‹ç»ˆç¨³å®šï¼ŒIIRéœ€è¦æ£€éªŒæç‚¹æ˜¯å¦åœ¨å•ä½åœ†å†…', correct: true },
                                    { text: 'ä¸¤è€…éƒ½å§‹ç»ˆç¨³å®š', correct: false },
                                    { text: 'ä¸¤è€…éƒ½å¯èƒ½ä¸ç¨³å®š', correct: false },
                                    { text: 'IIRå§‹ç»ˆç¨³å®šï¼ŒFIRå¯èƒ½ä¸ç¨³å®š', correct: false }
                                ]),
                                explanation: `FIRç³»ç»Ÿå‡½æ•°æ˜¯zçš„å¤šé¡¹å¼ï¼Œæç‚¹éƒ½åœ¨z=0ï¼ˆå•ä½åœ†å†…ï¼‰ï¼Œå§‹ç»ˆç¨³å®šã€‚IIRæœ‰éå¹³å‡¡æç‚¹ï¼Œéœ€è¦ä¿è¯æç‚¹åœ¨å•ä½åœ†å†…æ‰ç¨³å®šã€‚é‡åŒ–å¯èƒ½ä½¿IIRå˜å¾—ä¸ç¨³å®šã€‚`
                            };
                        }
                    }
                ]
            }
        };

        // ==================== è¾…åŠ©å‡½æ•° ====================
        function shuffleOptions(options) {
            const shuffled = [...options];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        // ==================== çŸ¥è¯†ç‚¹åˆ—è¡¨ ====================
        const topics = [
            { id: 'firBasic', name: 'FIRæ»¤æ³¢å™¨åŸºæœ¬ç»“æ„' },
            { id: 'idealFilter', name: 'ç†æƒ³æ»¤æ³¢å™¨ä¸å› æœæ€§' },
            { id: 'linearPhase', name: 'çº¿æ€§ç›¸ä½ç‰¹æ€§ä¸GLP' },
            { id: 'glpTypes', name: 'GLPå››ç§ç±»å‹è¯¦è§£' },
            { id: 'windowBasic', name: 'çª—å‡½æ•°è®¾è®¡æ³•åŸºç¡€' },
            { id: 'windowTypes', name: 'å¸¸ç”¨çª—å‡½æ•°ç‰¹æ€§å¯¹æ¯”' },
            { id: 'matlabDesign', name: 'MATLAB FIRè®¾è®¡å‡½æ•°' },
            { id: 'filterSpecs', name: 'æ»¤æ³¢å™¨æ€§èƒ½æŒ‡æ ‡' },
            { id: 'filterApplication', name: 'ä¿¡å·æ»¤æ³¢å®é™…åº”ç”¨' },
            { id: 'firVsIir', name: 'FIRä¸IIRæ»¤æ³¢å™¨å¯¹æ¯”' }
        ];

        // ==================== å­¦ç”Ÿæ•°æ® ====================
        let studentData = {
            id: '',
            name: '',
            currentTopicIndex: 0,
            topicStats: {},
            startTime: null
        };

        let currentQuestion = null;
        let selectedOption = null;
        let isAnswered = false;

        // ==================== ä¸»è¦å‡½æ•° ====================
        function startQuiz() {
            const id = document.getElementById('studentId').value.trim();
            const name = document.getElementById('studentName').value.trim();
            
            if (!id || !name) {
                alert('è¯·è¾“å…¥å­¦å·å’Œå§“åï¼');
                return;
            }
            
            studentData.id = id;
            studentData.name = name;
            studentData.startTime = new Date();
            
            topics.forEach(topic => {
                studentData.topicStats[topic.id] = { attempts: 0, passed: false };
            });
            
            document.querySelector('.login-section').classList.remove('active');
            document.querySelector('.quiz-section').classList.add('active');
            document.getElementById('studentInfo').textContent = `å­¦å·ï¼š${id} | å§“åï¼š${name}`;
            
            loadQuestion();
        }

        function loadQuestion() {
            if (studentData.currentTopicIndex >= topics.length) {
                showResults();
                return;
            }
            
            const topic = topics[studentData.currentTopicIndex];
            const kb = knowledgeBase[topic.id];
            
            const progress = ((studentData.currentTopicIndex) / topics.length * 100).toFixed(0);
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('progressBar').textContent = progress + '%';
            
            document.getElementById('currentTopic').innerHTML = `
                <div class="topic-name">ğŸ“š ${topic.name}</div>
                <div class="topic-progress">çŸ¥è¯†ç‚¹ ${studentData.currentTopicIndex + 1} / ${topics.length}</div>
            `;
            
            const generators = kb.questionGenerators;
            const generator = generators[Math.floor(Math.random() * generators.length)];
            currentQuestion = generator.generate();
            
            document.getElementById('questionTitle').innerHTML = `
                <span class="question-number">ç¬¬ ${studentData.currentTopicIndex + 1} é¢˜</span>
                ${topic.name}
            `;
            document.getElementById('questionContent').innerHTML = `<p>${currentQuestion.question}</p>`;
            
            const optionsHtml = currentQuestion.options.map((opt, idx) => `
                <div class="option" data-index="${idx}" onclick="selectOption(${idx})">
                    ${String.fromCharCode(65 + idx)}. ${opt.text}
                </div>
            `).join('');
            document.getElementById('options').innerHTML = optionsHtml;
            
            document.getElementById('feedback').innerHTML = '';
            document.getElementById('submitBtn').style.display = 'inline-block';
            document.getElementById('nextBtn').style.display = 'none';
            
            selectedOption = null;
            isAnswered = false;
            
            if (typeof MathJax !== 'undefined') {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            }
        }

        function selectOption(index) {
            if (isAnswered) return;
            
            document.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
            document.querySelector(`.option[data-index="${index}"]`).classList.add('selected');
            selectedOption = index;
        }

        function submitAnswer() {
            if (selectedOption === null) {
                alert('è¯·é€‰æ‹©ä¸€ä¸ªç­”æ¡ˆï¼');
                return;
            }
            
            isAnswered = true;
            const topic = topics[studentData.currentTopicIndex];
            studentData.topicStats[topic.id].attempts++;
            
            const isCorrect = currentQuestion.options[selectedOption].correct;
            const correctIndex = currentQuestion.options.findIndex(opt => opt.correct);
            
            document.querySelectorAll('.option').forEach((opt, idx) => {
                if (idx === correctIndex) {
                    opt.classList.add('correct');
                } else if (idx === selectedOption && !isCorrect) {
                    opt.classList.add('incorrect');
                }
            });
            
            let feedbackHtml;
            if (isCorrect) {
                feedbackHtml = `
                    <div class="feedback correct">
                        âœ… å›ç­”æ­£ç¡®ï¼
                        <div class="explanation-detail">${currentQuestion.explanation}</div>
                    </div>
                `;
                studentData.topicStats[topic.id].passed = true;
            } else {
                feedbackHtml = `
                    <div class="feedback incorrect">
                        âŒ å›ç­”é”™è¯¯ï¼Œæ­£ç¡®ç­”æ¡ˆæ˜¯ ${String.fromCharCode(65 + correctIndex)}
                        <div class="explanation-detail">${currentQuestion.explanation}</div>
                    </div>
                `;
            }
            
            document.getElementById('feedback').innerHTML = feedbackHtml;
            document.getElementById('submitBtn').style.display = 'none';
            document.getElementById('nextBtn').style.display = 'inline-block';
            
            if (typeof MathJax !== 'undefined') {
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            }
        }

        function nextQuestion() {
            const topic = topics[studentData.currentTopicIndex];
            
            if (studentData.topicStats[topic.id].passed) {
                studentData.currentTopicIndex++;
                loadQuestion();
            } else {
                loadQuestion();
            }
        }

        function showResults() {
            document.querySelector('.quiz-section').classList.remove('active');
            document.querySelector('.result-section').classList.add('active');

            const endTime = new Date();
            const duration = Math.round((endTime - studentData.startTime) / 1000 / 60);

            let reportHTML = `
                <div style="text-align: center; margin-bottom: 30px; padding: 20px; background: linear-gradient(135deg, #e8f5ff 0%, #f0f9ff 100%); border-radius: 10px;">
                    <h2 style="color: #2d57a4;">ğŸ‰ ${studentData.name} åŒå­¦</h2>
                    <p style="color: #666; font-size: 1.1em; margin: 10px 0;">å­¦å·ï¼š${studentData.id}</p>
                    <p style="color: #666;">ç”¨æ—¶ï¼š${duration} åˆ†é’Ÿ</p>
                </div>

                <table class="stats-table">
                    <tr>
                        <th>çŸ¥è¯†ç‚¹</th>
                        <th>ç­”é¢˜æ¬¡æ•°</th>
                        <th>æŒæ¡ç¨‹åº¦</th>
                    </tr>
            `;

            let excellentTopics = [], goodTopics = [], fairTopics = [], poorTopics = [];

            topics.forEach(topic => {
                const stats = studentData.topicStats[topic.id];
                let mastery, masteryClass;

                if (stats.attempts === 1) {
                    mastery = 'ä¼˜ç§€ â­â­â­â­';
                    masteryClass = 'mastery-excellent';
                    excellentTopics.push(topic.name);
                } else if (stats.attempts === 2) {
                    mastery = 'è‰¯å¥½ â­â­â­';
                    masteryClass = 'mastery-good';
                    goodTopics.push(topic.name);
                } else if (stats.attempts <= 4) {
                    mastery = 'ä¸€èˆ¬ â­â­';
                    masteryClass = 'mastery-fair';
                    fairTopics.push(topic.name);
                } else {
                    mastery = 'éœ€åŠ å¼º â­';
                    masteryClass = 'mastery-poor';
                    poorTopics.push(topic.name);
                }

                reportHTML += `
                    <tr>
                        <td><strong>${topic.name}</strong></td>
                        <td>${stats.attempts} æ¬¡</td>
                        <td class="${masteryClass}">${mastery}</td>
                    </tr>
                `;
            });

            reportHTML += '</table>';

            reportHTML += '<div style="margin-top: 30px;"><h3 style="color: #2d57a4;">ğŸ“Š çŸ¥è¯†æŒæ¡åˆ†æ</h3>';

            if (excellentTopics.length > 0) {
                reportHTML += `
                    <div style="background: #e8f5e9; padding: 15px; margin: 10px 0; border-radius: 8px; border-left: 5px solid #5ca353;">
                        <strong style="color: #5ca353;">âœ… æŒæ¡ä¼˜ç§€ï¼ˆä¸€æ¬¡é€šè¿‡ï¼‰ï¼š</strong><br>
                        ${excellentTopics.join('ã€')}
                    </div>
                `;
            }

            if (goodTopics.length > 0) {
                reportHTML += `
                    <div style="background: #e8f5ff; padding: 15px; margin: 10px 0; border-radius: 8px; border-left: 5px solid #608de0;">
                        <strong style="color: #608de0;">ğŸ‘ æŒæ¡è‰¯å¥½ï¼ˆä¸¤æ¬¡é€šè¿‡ï¼‰ï¼š</strong><br>
                        ${goodTopics.join('ã€')}
                    </div>
                `;
            }

            if (fairTopics.length > 0) {
                reportHTML += `
                    <div style="background: #fff8e1; padding: 15px; margin: 10px 0; border-radius: 8px; border-left: 5px solid #D46A6A;">
                        <strong style="color: #D46A6A;">âš ï¸ éœ€è¦å·©å›ºï¼ˆ3-4æ¬¡é€šè¿‡ï¼‰ï¼š</strong><br>
                        ${fairTopics.join('ã€')}
                    </div>
                `;
            }

            if (poorTopics.length > 0) {
                reportHTML += `
                    <div style="background: #ffebee; padding: 15px; margin: 10px 0; border-radius: 8px; border-left: 5px solid #912d32;">
                        <strong style="color: #912d32;">âŒ é‡ç‚¹åŠ å¼ºï¼ˆ5æ¬¡ä»¥ä¸Šï¼‰ï¼š</strong><br>
                        ${poorTopics.join('ã€')}
                        <p style="margin-top: 10px; font-size: 0.9em;">å»ºè®®ï¼šé‡æ–°å­¦ä¹ FIRæ»¤æ³¢å™¨è®¾è®¡ç†è®ºï¼Œç‰¹åˆ«æ˜¯çª—å‡½æ•°æ³•åŸç†ã€çº¿æ€§ç›¸ä½æ¡ä»¶å’ŒMATLABå®ç°ã€‚</p>
                    </div>
                `;
            }

            reportHTML += '</div>';

            document.getElementById('finalReport').innerHTML = reportHTML;
        }

        function saveScreenshot() {
            const button = document.getElementById('saveBtn');
            button.disabled = true;
            button.textContent = 'â³ æ­£åœ¨ç”Ÿæˆ...';

            html2canvas(document.body, {
                backgroundColor: '#ffffff',
                scale: 2,
                logging: false
            }).then(canvas => {
                canvas.toBlob(blob => {
                    const cleanId = studentData.id.replace(/[^a-zA-Z0-9_\u4e00-\u9fa5-]/g, '_');
                    const cleanName = studentData.name.replace(/[^a-zA-Z0-9_\u4e00-\u9fa5-]/g, '_');
                    const timestamp = new Date().toISOString().slice(0, 10);
                    const filename = `DSP_Lab3_FIR_${cleanId}_${cleanName}_${timestamp}.png`;

                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = filename;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);

                    button.disabled = false;
                    button.textContent = 'âœ… ä¿å­˜æˆåŠŸ';
                    setTimeout(() => {
                        button.textContent = 'ğŸ’¾ å†æ¬¡ä¿å­˜';
                    }, 2000);
                }, 'image/png');
            }).catch(error => {
                console.error('æˆªå›¾å¤±è´¥:', error);
                alert('æˆªå›¾å¤±è´¥ï¼Œè¯·å°è¯•ä½¿ç”¨æµè§ˆå™¨çš„æˆªå›¾åŠŸèƒ½');
                button.disabled = false;
                button.textContent = 'ğŸ’¾ ä¿å­˜æŠ¥å‘Š';
            });
        }
    </script>

    <!-- MathJax åŠ è½½è„šæœ¬ -->
    <script>
        (function() {
            const statusDiv = document.getElementById('mathjaxStatus');
            const primaryCDN = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
            const backupCDN = 'https://cdn.jsdelivr.net/npm/mathjax@2.7.9/MathJax.js?config=TeX-AMS-MML_HTMLorMML';

            function loadScript(src, onload, onerror) {
                const script = document.createElement('script');
                script.src = src;
                script.async = true;
                script.onload = onload;
                script.onerror = onerror;
                document.head.appendChild(script);
            }

            function onMathJaxLoad() {
                statusDiv.textContent = 'âœ“ æ•°å­¦å…¬å¼åŠ è½½æˆåŠŸ';
                statusDiv.className = 'mathjax-status success';
            }

            loadScript(primaryCDN, onMathJaxLoad, function() {
                statusDiv.textContent = 'ä¸»CDNåŠ è½½å¤±è´¥ï¼Œå°è¯•å¤‡ç”¨...';
                loadScript(backupCDN, onMathJaxLoad, function() {
                    statusDiv.textContent = 'âŒ å…¬å¼åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œ';
                    statusDiv.className = 'mathjax-status';
                });
            });
        })();
    </script>
</body>
</html>
