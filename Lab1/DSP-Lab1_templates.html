<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>DSPå®éªŒç©ºç™½æ¨¡æ¿</title>
    <style>
        body { font-family: 'Segoe UI', Consolas, 'Microsoft YaHei', sans-serif; background: #f4f7f6; padding: 20px; color: #333; }
        .container { max-width: 1200px; margin: 0 auto; }
        
        .control-panel {
            position: sticky; top: 0; z-index: 100;
            background: white; padding: 15px; margin-bottom: 20px;
            border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            display: flex; justify-content: space-between; align-items: center;
        }
        .control-btn {
            background: #2d57a4; color: white; border: none; padding: 8px 16px;
            border-radius: 4px; cursor: pointer; font-weight: bold; margin-left: 10px;
        }
        .control-btn:hover { background: #1e3a6e; }
        .control-btn.secondary { background: #6c757d; }

        .file-block { background: white; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); margin-bottom: 20px; overflow: hidden; }
        
        .file-header { 
            background: #2d57a4; color: white; padding: 15px 20px; 
            display: flex; justify-content: space-between; align-items: center; 
            cursor: pointer; user-select: none;
        }
        .file-header:hover { background: #3b6bbd; }
        
        .file-title { font-weight: bold; display: flex; align-items: center; }
        .arrow-icon { display: inline-block; margin-right: 10px; transition: transform 0.3s; }
        .file-block.collapsed .arrow-icon { transform: rotate(-90deg); }
        
        .file-content { display: block; }
        .file-block.collapsed .file-content { display: none; }

        .copy-btn { background: #5ca353; border: none; color: white; padding: 4px 12px; border-radius: 4px; cursor: pointer; font-size: 0.9em; }
        .copy-btn:hover { background: #4a8842; }

        pre { margin: 0; padding: 20px; overflow-x: auto; line-height: 1.8; font-size: 13px; background: #f8f9fa; border-top: 1px solid #e9ecef; }
        .todo { background: #d4edda; color: #155724; padding: 2px 6px; border-radius: 3px; font-weight: bold; font-size: 0.85em; }
        .comment { color: #6c757d; font-style: italic; }
        
        .info-banner { background: #e7f3ff; border-left: 4px solid #2d57a4; padding: 15px; margin-bottom: 20px; border-radius: 4px; }
        .warning-banner { background: #fff3cd; border-left: 4px solid #ff9800; padding: 15px; margin-bottom: 20px; border-radius: 4px; }
        .success-banner { background: #d4edda; border-left: 4px solid #28a745; padding: 15px; margin-bottom: 20px; border-radius: 4px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="control-panel">
            <h2 style="margin:0; color:#2d57a4;">ğŸ“ DSP Lab 1 - ç©ºç™½æ¨¡æ¿</h2>
            <div>
                <button class="control-btn" onclick="expandAll()">å…¨éƒ¨å±•å¼€</button>
                <button class="control-btn secondary" onclick="collapseAll()">å…¨éƒ¨æŠ˜å </button>
            </div>
        </div>

        <div class="info-banner">
            <strong>ğŸ“Œ ä½¿ç”¨è¯´æ˜ï¼š</strong>
            <ul style="margin:5px 0 0 20px; padding:0; line-height:1.8;">
                <li>æœ¬æ¨¡æ¿åªæä¾›æœ€åŸºæœ¬æ¡†æ¶ï¼Œ<strong>æ ¸å¿ƒç®—æ³•éœ€è¦ä½ è‡ªå·±è®¾è®¡å®ç°</strong></li>
                <li>ç‚¹å‡»è“è‰²æ ‡é¢˜æ æŠ˜å /å±•å¼€ï¼Œç‚¹å‡»ç»¿è‰²æŒ‰é’®å¤åˆ¶ä»£ç </li>
                <li><span class="todo">TODO</span> æ ‡è®°å¤„éœ€è¦ä½ å®Œæˆï¼Œå®ç°æ–¹å¼ä¸é™</li>
                <li>å…±4ä¸ªæ–‡ä»¶ï¼ˆ3ä¸ªè„šæœ¬ + 1ä¸ªå‡½æ•°ï¼‰ï¼Œå®Œæˆåæäº¤</li>
            </ul>
        </div>

        <div class="warning-banner">
            <strong>âš ï¸ é‡è¦æé†’ï¼š</strong>
            <ul style="margin:5px 0 0 20px; padding:0;">
                <li><strong>exercise3</strong> éœ€è¦ <code>tones.mat</code> æ–‡ä»¶ï¼ˆç”±æ•™å¸ˆæä¾›ï¼‰</li>
                <li>æäº¤æ ¼å¼ï¼š<code>å­¦å·_å§“å_Lab1</code> æ–‡ä»¶å¤¹ï¼ŒåŒ…å«4ä¸ª.mæ–‡ä»¶</li>
            </ul>
        </div>

        <div class="success-banner">
            <strong>âœ… æäº¤æ¸…å•ï¼š</strong>
            <ul style="margin:5px 0 0 20px; padding:0;">
                <li>exercise1_exponential_spectrum.m</li>
                <li>exercise2_convolution_theorem.m</li>
                <li>exercise3_tone_analysis.m</li>
                <li>MyDFT.mï¼ˆç‹¬ç«‹å‡½æ•°æ–‡ä»¶ï¼‰</li>
            </ul>
        </div>

        <!-- Exercise 1 -->
        <div class="file-block">
            <div class="file-header" onclick="toggleBlock(this)">
                <span class="file-title">
                    <span class="arrow-icon">â–¼</span>
                    ğŸ“„ exercise1_exponential_spectrum.m
                </span>
                <button class="copy-btn" onclick="copyCode(event, 'code1')">å¤åˆ¶ä»£ç </button>
            </div>
            <div class="file-content">
                <pre id="code1">%% ç»ƒä¹ ä¸€ï¼šæŒ‡æ•°åºåˆ—çš„é¢‘è°±åˆ†æ
% æ–‡ä»¶å: exercise1_exponential_spectrum.m
% å­¦å·ï¼š______  å§“åï¼š______

clear; clc; close all;

<span class="comment">%% å‚æ•°å®šä¹‰</span>
a = 0.9;
N_signal = 8;

<span class="todo">TODO</span> <span class="comment">% ç”ŸæˆæŒ‡æ•°åºåˆ— x[n] = a^n, n=0,1,...,N_signal-1</span>


<span class="todo">TODO</span> <span class="comment">% è®¡ç®—DTFT (åœ¨omega = linspace(0, 2*pi, 512)ä¸Šé‡‡æ ·)</span>


<span class="todo">TODO</span> <span class="comment">% è®¡ç®—8ç‚¹ã€16ç‚¹ã€128ç‚¹DFTï¼Œå­˜å‚¨ç»“æœ</span>


<span class="todo">TODO</span> <span class="comment">% ç»˜å›¾ï¼šå¯¹æ¯”DTFTä¸ä¸åŒç‚¹æ•°DFT
% è¦æ±‚ï¼š2è¡Œ3åˆ—å­å›¾
%   - åŸå§‹åºåˆ—
%   - DTFTå¹…åº¦è°±å’Œç›¸ä½è°±  
%   - ä¸‰ç§DFTå åŠ åœ¨DTFTä¸Šå¯¹æ¯”</span>


fprintf('ç»ƒä¹ ä¸€å®Œæˆ!\n');
</pre>
            </div>
        </div>

        <!-- Exercise 2 -->
        <div class="file-block">
            <div class="file-header" onclick="toggleBlock(this)">
                <span class="file-title">
                    <span class="arrow-icon">â–¼</span>
                    ğŸ“„ exercise2_convolution_theorem.m
                </span>
                <button class="copy-btn" onclick="copyCode(event, 'code2')">å¤åˆ¶ä»£ç </button>
            </div>
            <div class="file-content">
                <pre id="code2">%% ç»ƒä¹ äºŒï¼šå·ç§¯å®šç†éªŒè¯
% æ–‡ä»¶å: exercise2_convolution_theorem.m
% å­¦å·ï¼š______  å§“åï¼š______

clear; clc; close all;

<span class="todo">TODO</span> <span class="comment">% å®šä¹‰ä¸¤ä¸ªåºåˆ— x å’Œ h (å»ºè®®ä½¿ç”¨çŸ©å½¢è„‰å†²)</span>


<span class="todo">TODO</span> <span class="comment">% è®¡ç®—çº¿æ€§å·ç§¯</span>


<span class="todo">TODO</span> <span class="comment">% è®¡ç®—ä¸åŒç‚¹æ•°(å¦‚4ç‚¹ã€8ç‚¹ã€9ç‚¹)çš„å¾ªç¯å·ç§¯
% æ–¹æ³•ï¼šè¡¥é›¶ -> FFT -> ç›¸ä¹˜ -> IFFT</span>


<span class="todo">TODO</span> <span class="comment">% ä½¿ç”¨FFTå¿«é€Ÿè®¡ç®—çº¿æ€§å·ç§¯ï¼ˆç¡®å®šåˆé€‚çš„Nå€¼ï¼‰</span>


<span class="todo">TODO</span> <span class="comment">% ç»˜å›¾ï¼šå¯¹æ¯”çº¿æ€§å·ç§¯å’Œä¸åŒç‚¹æ•°çš„å¾ªç¯å·ç§¯
% è¦æ±‚ï¼š2è¡Œ3åˆ—ï¼Œå±•ç¤ºè¾“å…¥åºåˆ—ã€çº¿æ€§å·ç§¯ã€å„ç§å¾ªç¯å·ç§¯</span>


fprintf('ç»ƒä¹ äºŒå®Œæˆ!\n');
</pre>
            </div>
        </div>

        <!-- Exercise 3 -->
        <div class="file-block collapsed">
            <div class="file-header" onclick="toggleBlock(this)">
                <span class="file-title">
                    <span class="arrow-icon">â–¼</span>
                    ğŸ“„ exercise3_tone_analysis.m
                </span>
                <button class="copy-btn" onclick="copyCode(event, 'code3')">å¤åˆ¶ä»£ç </button>
            </div>
            <div class="file-content">
                <pre id="code3">%% ç»ƒä¹ ä¸‰ï¼šå®é™…ä¿¡å·é¢‘è°±åˆ†æ
% æ–‡ä»¶å: exercise3_tone_analysis.m
% å­¦å·ï¼š______  å§“åï¼š______
% ä¾èµ–ï¼štones.mat

clear; clc; close all;

<span class="todo">TODO</span> <span class="comment">% åŠ è½½ tones.mat (åŒ…å«å˜é‡ y å’Œ Fs)</span>


<span class="todo">TODO</span> <span class="comment">% å¯¹ä¿¡å·è¿›è¡Œå¤šç§åˆ†è¾¨ç‡çš„FFTåˆ†æ
% å»ºè®®ï¼šåŸé•¿åº¦ã€2å€é•¿åº¦ã€4å€é•¿åº¦</span>


<span class="todo">TODO</span> <span class="comment">% æ£€æµ‹é¢‘è°±ä¸­çš„å³°å€¼ï¼Œè¯†åˆ«ä¸»è¦é¢‘ç‡åˆ†é‡</span>


<span class="todo">TODO</span> <span class="comment">% ç»˜å›¾ï¼šæ—¶åŸŸä¿¡å·ã€ä¸åŒåˆ†è¾¨ç‡é¢‘è°±ã€ç›¸ä½è°±
% è¦æ±‚ï¼š3è¡Œ2åˆ—ï¼Œå±•ç¤ºå®Œæ•´åˆ†æè¿‡ç¨‹</span>


fprintf('ç»ƒä¹ ä¸‰å®Œæˆ!\n');
</pre>
            </div>
        </div>

        <!-- MyDFT Function -->
        <div class="file-block collapsed">
            <div class="file-header" onclick="toggleBlock(this)">
                <span class="file-title">
                    <span class="arrow-icon">â–¼</span>
                    ğŸ“„ MyDFT.m <span style="font-weight:normal; margin-left:10px; color:#ffc107;">âš ï¸ ç‹¬ç«‹å‡½æ•°æ–‡ä»¶</span>
                </span>
                <button class="copy-btn" onclick="copyCode(event, 'code4')">å¤åˆ¶ä»£ç </button>
            </div>
            <div class="file-content">
                <pre id="code4">function X = MyDFT(x, N)
%% MyDFT - è‡ªå®šä¹‰DFTå‡½æ•°
% è¾“å…¥ï¼š
%   x - è¾“å…¥åºåˆ—
%   N - DFTç‚¹æ•°ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸ºåºåˆ—é•¿åº¦ï¼‰
% è¾“å‡ºï¼š
%   X - Nç‚¹DFTç»“æœ
%
% DFTå®šä¹‰ï¼šX[k] = sum(x[n] * exp(-j*2*pi*k*n/N)), k=0,1,...,N-1
%
% ä½¿ç”¨ç¤ºä¾‹ï¼š
%   X = MyDFT([1,2,3,4], 4);     % 4ç‚¹DFT
%   X = MyDFT([1,2,3,4], 8);     % 8ç‚¹DFTï¼ˆé›¶å¡«å……ï¼‰
%
% æµ‹è¯•æ–¹æ³•ï¼ˆåœ¨å‘½ä»¤çª—å£ï¼‰ï¼š
%   >> x = [1,2,3,4];
%   >> MyDFT(x, 4)               % è°ƒç”¨ä½ çš„å‡½æ•°
%   >> fft(x, 4)                 % å¯¹æ¯”MATLABç»“æœ

<span class="todo">TODO</span> <span class="comment">% å‚æ•°å¤„ç†ï¼šæ£€æŸ¥è¾“å…¥ï¼Œè®¾ç½®é»˜è®¤Nå€¼</span>


<span class="todo">TODO</span> <span class="comment">% é•¿åº¦å¤„ç†ï¼šæ ¹æ®Nå’Œxçš„é•¿åº¦å…³ç³»è¿›è¡Œè¡¥é›¶æˆ–æˆªæ–­</span>


<span class="todo">TODO</span> <span class="comment">% DFTè®¡ç®—ï¼šå®ç°DFTå…¬å¼
% æ–¹æ³•ä¸é™ï¼šå¯ä»¥ç”¨åŒé‡å¾ªç¯ï¼Œä¹Ÿå¯ä»¥ç”¨çŸ©é˜µè¿ç®—</span>


<span class="todo">TODO</span> <span class="comment">% è¾“å‡ºå¤„ç†ï¼šä¿æŒä¸è¾“å…¥xç›¸åŒçš„è¡Œåˆ—å½¢å¼</span>


end
</pre>
            </div>
        </div>

        <!-- æµ‹è¯•è¯´æ˜ -->
        <div style="background: #f8f9fa; border: 2px solid #dee2e6; border-radius: 8px; padding: 20px; margin-top: 30px;">
            <h3 style="color: #2d57a4; margin-top: 0;">ğŸ’¡ MyDFT æœ¬åœ°æµ‹è¯•å»ºè®®</h3>
            
            <p>å»ºè®®åœ¨ç¼–å†™å®Œ <code>MyDFT.m</code> åï¼Œåœ¨ MATLAB å‘½ä»¤çª—å£ä¸­è¿›è¡Œç®€å•éªŒè¯ï¼Œç¡®ä¿ç»“æœä¸ MATLAB å†…ç½®å‡½æ•°ä¸€è‡´ï¼š</p>
            <pre style="background: white; padding: 15px; border-radius: 4px; border: 1px solid #dee2e6;">
<span class="comment">% ç¤ºä¾‹1ï¼šåŸºæœ¬åŠŸèƒ½æµ‹è¯•</span>
>> x = [1, 2, 3, 4];
>> MyDFT(x, 4)          <span class="comment">% åº”ä¸ fft(x, 4) ç»“æœä¸€è‡´</span>

<span class="comment">% ç¤ºä¾‹2ï¼šé›¶å¡«å……æµ‹è¯• (N > L)</span>
>> MyDFT(x, 8)          <span class="comment">% åº”ä¸ fft(x, 8) ç»“æœä¸€è‡´</span>

<span class="comment">% ç¤ºä¾‹3ï¼šæˆªæ–­æµ‹è¯• (N < L)</span>
>> MyDFT(x, 2)          <span class="comment">% åº”ä¸ fft(x, 2) ç»“æœä¸€è‡´</span></pre>

            <p style="color: #6c757d; font-size: 0.9em; margin-top: 15px;">
                æ³¨ï¼š<code>fft</code> æ˜¯ MATLAB å†…ç½®çš„å¿«é€Ÿå‚…é‡Œå¶å˜æ¢å‡½æ•°ã€‚
            </p>
        </div>

    </div>

    <script>
        function toggleBlock(header) {
            header.parentElement.classList.toggle('collapsed');
        }

        function expandAll() {
            document.querySelectorAll('.file-block').forEach(b => b.classList.remove('collapsed'));
        }

        function collapseAll() {
            document.querySelectorAll('.file-block').forEach(b => b.classList.add('collapsed'));
        }

        function copyCode(event, id) {
            event.stopPropagation();
            const el = document.createElement('textarea');
            const code = document.getElementById(id).innerText;
            el.value = code.replace(/<span[^>]*>/g, '').replace(/<\/span>/g, '');
            document.body.appendChild(el);
            el.select();
            document.execCommand('copy');
            document.body.removeChild(el);
            
            const btn = event.target;
            const origText = btn.textContent;
            btn.textContent = 'âœ“ å·²å¤åˆ¶';
            btn.style.background = '#28a745';
            setTimeout(() => {
                btn.textContent = origText;
                btn.style.background = '#5ca353';
            }, 2000);
        }
    </script>
</body>
</html>