<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>DSP Lab 4 å®éªŒæ¨¡æ¿</title>
    <style>
        body { font-family: 'Segoe UI', Consolas, 'Microsoft YaHei', sans-serif; background: #f4f7f6; padding: 20px; color: #333; }
        .container { max-width: 1200px; margin: 0 auto; }
        
        .control-panel {
            position: sticky; top: 0; z-index: 100;
            background: white; padding: 15px; margin-bottom: 20px;
            border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            display: flex; justify-content: space-between; align-items: center;
        }
        .control-btn {
            background: #2d57a4; color: white; border: none; padding: 8px 16px;
            border-radius: 4px; cursor: pointer; font-weight: bold; margin-left: 10px;
        }
        .control-btn:hover { background: #1e3a6e; }
        .control-btn.secondary { background: #6c757d; }

        .file-block { background: white; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); margin-bottom: 20px; overflow: hidden; }
        
        .file-header { 
            background: #2d57a4; color: white; padding: 15px 20px; 
            display: flex; justify-content: space-between; align-items: center; 
            cursor: pointer; user-select: none;
        }
        .file-header:hover { background: #3b6bbd; }
        
        .file-title { font-weight: bold; display: flex; align-items: center; }
        .arrow-icon { display: inline-block; margin-right: 10px; transition: transform 0.3s; }
        .file-block.collapsed .arrow-icon { transform: rotate(-90deg); }
        
        .file-content { display: block; }
        .file-block.collapsed .file-content { display: none; }

        .copy-btn { background: #5ca353; border: none; color: white; padding: 4px 12px; border-radius: 4px; cursor: pointer; font-size: 0.9em; }
        .copy-btn:hover { background: #4a8842; }

        pre { margin: 0; padding: 20px; overflow-x: auto; line-height: 1.8; font-size: 13px; background: #f8f9fa; border-top: 1px solid #e9ecef; }
        
        .comment { color: #228b22; font-style: italic; }
        .todo-tag { background: #fff3cd; color: #856404; padding: 2px 6px; border-radius: 3px; border: 1px solid #ffeeba; font-weight: bold; font-size: 0.9em; margin-right: 5px; }

        .info-banner { background: #e7f3ff; border-left: 4px solid #2d57a4; padding: 15px; margin-bottom: 20px; border-radius: 4px; }
        .warning-banner { background: #fff3cd; border-left: 4px solid #ff9800; padding: 15px; margin-bottom: 20px; border-radius: 4px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="control-panel">
            <h2 style="margin:0; color:#2d57a4;">ğŸ“ DSP Lab 4 - å­¦ç”Ÿå®éªŒæ¨¡æ¿</h2>
            <div>
                <button class="control-btn" onclick="expandAll()">å…¨éƒ¨å±•å¼€</button>
                <button class="control-btn secondary" onclick="collapseAll()">å…¨éƒ¨æŠ˜å </button>
            </div>
        </div>

        <div class="info-banner">
            <strong>ğŸ“Œ ç¼–ç¨‹è§„èŒƒè¯´æ˜ï¼š</strong>
            <ul style="margin:5px 0 0 20px; padding:0; line-height:1.8;">
                <li>ä»£ç ä¸­å·²é¢„å®šä¹‰äº†å…³é”®å˜é‡ï¼ˆå¦‚ <code>N_butt = [];</code>ï¼‰ï¼Œ<strong>è¯·å‹¿ä¿®æ”¹å˜é‡å</strong>ã€‚</li>
                <li>è¯·åœ¨ <code>% TODO</code> æ³¨é‡ŠæŒ‡å¼•ä¸‹ç¼–å†™ä»£ç ï¼Œå°†è®¡ç®—ç»“æœèµ‹å€¼ç»™å¯¹åº”çš„å˜é‡ã€‚</li>
                <li>æ¯ä¸ªè„šæœ¬æœ«å°¾åŒ…å«<strong>è‡ªæ£€ä»£ç </strong>ï¼Œè¿è¡Œè„šæœ¬æ—¶è‹¥çœ‹åˆ°çº¢å­—è­¦å‘Šï¼Œè¯´æ˜å˜é‡æœªæ­£ç¡®èµ‹å€¼ã€‚</li>
            </ul>
        </div>
        
        <div class="warning-banner">
            <strong>âš ï¸ æäº¤æ–‡ä»¶åˆ—è¡¨ï¼š</strong>
            <ul style="margin:5px 0 0 20px; padding:0;">
                <li>exercise1_butterworth.m</li>
                <li>exercise2_chebyshev.m</li>
                <li>exercise3_elliptic.m</li>
                <li>exercise4_analysis.m (æ€è€ƒé¢˜)</li>
            </ul>
        </div>

        <!-- Exercise 1 -->
        <div class="file-block">
            <div class="file-header" onclick="toggleBlock(this)">
                <span class="file-title">
                    <span class="arrow-icon">â–¼</span>
                    ğŸ“„ exercise1_butterworth.m
                </span>
                <button class="copy-btn" onclick="copyCode(event, 'code1')">å¤åˆ¶ä»£ç </button>
            </div>
            <div class="file-content">
                <pre id="code1">%% ç»ƒä¹ ä¸€ï¼šButterworth æ•°å­—ä½é€šæ»¤æ³¢å™¨è®¾è®¡
% æ–‡ä»¶å: exercise1_butterworth.m
% å­¦å·ï¼š______  å§“åï¼š______

%% è®¾è®¡æŒ‡æ ‡
Fs = 80000;     <span class="comment">% é‡‡æ ·é¢‘ç‡ 80 kHz</span>
Fp = 4000;      <span class="comment">% é€šå¸¦è¾¹ç•Œ 4 kHz</span>
Fst = 20000;    <span class="comment">% é˜»å¸¦è¾¹ç•Œ 20 kHz</span>
Rp = 0.5;       <span class="comment">% é€šå¸¦æœ€å¤§è¡°å‡ 0.5 dB</span>
Rs = 45;        <span class="comment">% é˜»å¸¦æœ€å°è¡°å‡ 45 dB</span>

%% Step 1: é¢‘ç‡å½’ä¸€åŒ–
<span class="comment">% <span class="todo-tag">TODO</span> å½’ä¸€åŒ–åˆ°Nyquisté¢‘ç‡</span>
Wp = [];
Ws = [];

%% Step 2: ç¡®å®šæ»¤æ³¢å™¨é˜¶æ¬¡
<span class="comment">% <span class="todo-tag">TODO</span> ä½¿ç”¨ buttord å‡½æ•°</span>
N_butt = [];
Wn_butt = [];

fprintf('Butterworthæ»¤æ³¢å™¨: N = %d, Wn = %.6f\n', N_butt, Wn_butt);

%% Step 3: è®¾è®¡æ•°å­—æ»¤æ³¢å™¨
<span class="comment">% <span class="todo-tag">TODO</span> ä½¿ç”¨ butter å‡½æ•°</span>
num_d = [];
den_d = [];

%% Step 4: è®¡ç®—é¢‘ç‡å“åº”
<span class="comment">% <span class="todo-tag">TODO</span> ä½¿ç”¨ freqz å‡½æ•°</span>
H_butt = [];
f = [];

%% Step 5: ç»˜å›¾
figure('Name', 'Butterworthæ»¤æ³¢å™¨');
<span class="comment">% <span class="todo-tag">TODO</span> ç»˜åˆ¶å¹…åº¦å“åº”å’Œç›¸ä½å“åº”</span>


%% ========================================
%  ğŸ” æäº¤å‰è‡ªæ£€ (è¯·å‹¿ä¿®æ”¹ä»¥ä¸‹ä»£ç )
%  ========================================
vars_chk = {'N_butt', 'Wn_butt', 'num_d', 'den_d', 'H_butt'};
miss = {};
for i = 1:length(vars_chk)
    if ~exist(vars_chk{i}, 'var') || isempty(eval(vars_chk{i}))
        miss{end+1} = vars_chk{i};
    end
end
if ~isempty(miss)
    fprintf(2, 'âŒ é”™è¯¯ï¼šä»¥ä¸‹å˜é‡æœªèµ‹å€¼æˆ–ä¸ºç©ºï¼š%s\n', strjoin(miss, ', '));
else
    fprintf('âœ… ç»ƒä¹ ä¸€å˜é‡æ£€æŸ¥é€šè¿‡ã€‚\n');
end
</pre>
            </div>
        </div>

        <!-- Exercise 2 -->
        <div class="file-block">
            <div class="file-header" onclick="toggleBlock(this)">
                <span class="file-title">
                    <span class="arrow-icon">â–¼</span>
                    ğŸ“„ exercise2_chebyshev.m
                </span>
                <button class="copy-btn" onclick="copyCode(event, 'code2')">å¤åˆ¶ä»£ç </button>
            </div>
            <div class="file-content">
                <pre id="code2">%% ç»ƒä¹ äºŒï¼šChebyshev I å‹æ•°å­—ä½é€šæ»¤æ³¢å™¨è®¾è®¡
% æ–‡ä»¶å: exercise2_chebyshev.m
% å­¦å·ï¼š______  å§“åï¼š______

%% è®¾è®¡æŒ‡æ ‡ (ä¸ç»ƒä¹ ä¸€ç›¸åŒ)
Fs = 80000; Fp = 4000; Fst = 20000; Rp = 0.5; Rs = 45;

%% Step 1: é¢‘ç‡å½’ä¸€åŒ–
<span class="comment">% <span class="todo-tag">TODO</span> å½’ä¸€åŒ–åˆ°Nyquisté¢‘ç‡</span>
Wp = [];
Ws = [];

%% Step 2: ç¡®å®šæ»¤æ³¢å™¨é˜¶æ¬¡
<span class="comment">% <span class="todo-tag">TODO</span> ä½¿ç”¨ cheb1ord å‡½æ•°</span>
N_cheb = [];
Wn_cheb = [];

fprintf('Chebyshev I æ»¤æ³¢å™¨: N = %d, Wn = %.6f\n', N_cheb, Wn_cheb);

%% Step 3: è®¾è®¡æ•°å­—æ»¤æ³¢å™¨
<span class="comment">% <span class="todo-tag">TODO</span> ä½¿ç”¨ cheby1 å‡½æ•°</span>
num_d_cheb = [];
den_d_cheb = [];

%% Step 4: è®¡ç®—é¢‘ç‡å“åº”
<span class="comment">% <span class="todo-tag">TODO</span> ä½¿ç”¨ freqz å‡½æ•°</span>
H_cheb = [];
f = [];

%% Step 5: ç»˜å›¾
figure('Name', 'Chebyshev I æ»¤æ³¢å™¨');
<span class="comment">% <span class="todo-tag">TODO</span> ç»˜åˆ¶å¹…åº¦å“åº”å’Œç›¸ä½å“åº”</span>


%% Step 6: ä¸Butterworthå¯¹æ¯”
<span class="comment">% <span class="todo-tag">TODO</span> ç»˜åˆ¶å¯¹æ¯”å›¾ï¼Œæ¯”è¾ƒé˜¶æ•°å·®å¼‚</span>


%% ========================================
%  ğŸ” æäº¤å‰è‡ªæ£€ (è¯·å‹¿ä¿®æ”¹ä»¥ä¸‹ä»£ç )
%  ========================================
vars_chk = {'N_cheb', 'Wn_cheb', 'num_d_cheb', 'den_d_cheb', 'H_cheb'};
miss = {};
for i = 1:length(vars_chk)
    if ~exist(vars_chk{i}, 'var') || isempty(eval(vars_chk{i}))
        miss{end+1} = vars_chk{i};
    end
end
if ~isempty(miss)
    fprintf(2, 'âŒ é”™è¯¯ï¼šä»¥ä¸‹å˜é‡æœªèµ‹å€¼æˆ–ä¸ºç©ºï¼š%s\n', strjoin(miss, ', '));
else
    fprintf('âœ… ç»ƒä¹ äºŒå˜é‡æ£€æŸ¥é€šè¿‡ã€‚\n');
end
</pre>
            </div>
        </div>

        <!-- Exercise 3 -->
        <div class="file-block">
            <div class="file-header" onclick="toggleBlock(this)">
                <span class="file-title">
                    <span class="arrow-icon">â–¼</span>
                    ğŸ“„ exercise3_elliptic.m
                </span>
                <button class="copy-btn" onclick="copyCode(event, 'code3')">å¤åˆ¶ä»£ç </button>
            </div>
            <div class="file-content">
                <pre id="code3">%% ç»ƒä¹ ä¸‰ï¼šElliptic (Cauer) æ•°å­—ä½é€šæ»¤æ³¢å™¨è®¾è®¡
% æ–‡ä»¶å: exercise3_elliptic.m
% å­¦å·ï¼š______  å§“åï¼š______

%% è®¾è®¡æŒ‡æ ‡ (ä¸ç»ƒä¹ ä¸€ã€äºŒç›¸åŒ)
Fs = 80000; Fp = 4000; Fst = 20000; Rp = 0.5; Rs = 45;

%% Step 1: é¢‘ç‡å½’ä¸€åŒ–
<span class="comment">% <span class="todo-tag">TODO</span> å½’ä¸€åŒ–åˆ°Nyquisté¢‘ç‡</span>
Wp = [];
Ws = [];

%% Step 2: ç¡®å®šæ»¤æ³¢å™¨é˜¶æ¬¡
<span class="comment">% <span class="todo-tag">TODO</span> ä½¿ç”¨ ellipord å‡½æ•°</span>
N_ellip = [];
Wn_ellip = [];

fprintf('Elliptic æ»¤æ³¢å™¨: N = %d, Wn = %.6f\n', N_ellip, Wn_ellip);

%% Step 3: è®¾è®¡æ•°å­—æ»¤æ³¢å™¨
<span class="comment">% <span class="todo-tag">TODO</span> ä½¿ç”¨ ellip å‡½æ•°</span>
num_d_ellip = [];
den_d_ellip = [];

%% Step 4: è®¡ç®—é¢‘ç‡å“åº”
<span class="comment">% <span class="todo-tag">TODO</span> ä½¿ç”¨ freqz å‡½æ•°</span>
H_ellip = [];
f = [];

%% Step 5: ç»˜å›¾
figure('Name', 'Elliptic æ»¤æ³¢å™¨');
<span class="comment">% <span class="todo-tag">TODO</span> ç»˜åˆ¶å¹…åº¦å“åº”å’Œç›¸ä½å“åº”</span>


%% Step 6: ä¸‰ç§æ»¤æ³¢å™¨ç»¼åˆå¯¹æ¯”
<span class="comment">% <span class="todo-tag">TODO</span> ç»˜åˆ¶ä¸‰ç§æ»¤æ³¢å™¨å¯¹æ¯”å›¾ï¼Œè¾“å‡ºé˜¶æ•°å¯¹æ¯”</span>


%% ========================================
%  ğŸ” æäº¤å‰è‡ªæ£€ (è¯·å‹¿ä¿®æ”¹ä»¥ä¸‹ä»£ç )
%  ========================================
vars_chk = {'N_ellip', 'Wn_ellip', 'num_d_ellip', 'den_d_ellip', 'H_ellip'};
miss = {};
for i = 1:length(vars_chk)
    if ~exist(vars_chk{i}, 'var') || isempty(eval(vars_chk{i}))
        miss{end+1} = vars_chk{i};
    end
end
if ~isempty(miss)
    fprintf(2, 'âŒ é”™è¯¯ï¼šä»¥ä¸‹å˜é‡æœªèµ‹å€¼æˆ–ä¸ºç©ºï¼š%s\n', strjoin(miss, ', '));
else
    fprintf('âœ… ç»ƒä¹ ä¸‰å˜é‡æ£€æŸ¥é€šè¿‡ã€‚\n');
end
</pre>
            </div>
        </div>

        <!-- Exercise 4 -->
        <div class="file-block">
            <div class="file-header" onclick="toggleBlock(this)">
                <span class="file-title">
                    <span class="arrow-icon">â–¼</span>
                    ğŸ“„ exercise4_analysis.m
                </span>
                <button class="copy-btn" onclick="copyCode(event, 'code4')">å¤åˆ¶ä»£ç </button>
            </div>
            <div class="file-content">
                <pre id="code4">%% ç»ƒä¹ å››ï¼šåˆ†æä¸æ€è€ƒé¢˜
% æ–‡ä»¶å: exercise4_analysis.m
% å­¦å·ï¼š______  å§“åï¼š______

%% æ€è€ƒé¢˜ A1: éŸ³é¢‘å¤„ç†ç³»ç»Ÿä¸­çš„æ»¤æ³¢å™¨é€‰æ‹©
fprintf('========== A1: éŸ³é¢‘å¤„ç†ç³»ç»Ÿ ==========\n\n');

fprintf('åœºæ™¯: è®¾è®¡ä¸€ä¸ªéŸ³é¢‘å‡è¡¡å™¨çš„ä½é€šæ»¤æ³¢å™¨\n\n');

<span class="comment">% <span class="todo-tag">TODO</span> å¡«å†™æ¨èçš„æ»¤æ³¢å™¨ç±»å‹åŠç†ç”±</span>
fprintf('æ¨èé€‰æ‹©: ______ æ»¤æ³¢å™¨\n\n');
fprintf('ç†ç”±:\n');
fprintf('1. ______\n');
fprintf('2. ______\n');
fprintf('3. ______\n\n');

%% æ€è€ƒé¢˜ A2: é€šä¿¡ç³»ç»Ÿä¸­çš„æ»¤æ³¢å™¨é€‰æ‹©
fprintf('========== A2: é€šä¿¡ç³»ç»Ÿ ==========\n\n');

fprintf('åœºæ™¯: è®¾è®¡ä¸€ä¸ªå¤šè·¯å¤ç”¨ç³»ç»Ÿçš„ä¿¡é“é€‰æ‹©æ»¤æ³¢å™¨\n\n');

<span class="comment">% <span class="todo-tag">TODO</span> å¡«å†™æ¨èçš„æ»¤æ³¢å™¨ç±»å‹åŠç†ç”±</span>
fprintf('æ¨èé€‰æ‹©: ______ æ»¤æ³¢å™¨\n\n');
fprintf('ç†ç”±:\n');
fprintf('1. ______\n');
fprintf('2. ______\n');
fprintf('3. ______\n\n');

%% æ€è€ƒé¢˜ A3: å®æ—¶ç³»ç»Ÿçš„æ»¤æ³¢å™¨è®¾è®¡è€ƒé‡
fprintf('========== A3: å®æ—¶ç³»ç»Ÿ ==========\n\n');

fprintf('åœºæ™¯: åµŒå…¥å¼ç³»ç»Ÿå®æ—¶ä¿¡å·å¤„ç†\n\n');

<span class="comment">% <span class="todo-tag">TODO</span> åˆ†æå…³é”®è€ƒé‡å› ç´ </span>
fprintf('å…³é”®è€ƒé‡å› ç´ :\n\n');
fprintf('1. ______\n');
fprintf('2. ______\n');
fprintf('3. ______\n');
fprintf('4. ______\n\n');

fprintf('å®é™…å»ºè®®:\n');
fprintf('______\n\n');
</pre>
            </div>
        </div>

    </div>
    <script>
        function toggleBlock(header) { header.parentElement.classList.toggle('collapsed'); }
        function expandAll() { document.querySelectorAll('.file-block').forEach(b => b.classList.remove('collapsed')); }
        function collapseAll() { document.querySelectorAll('.file-block').forEach(b => b.classList.add('collapsed')); }
        function copyCode(event, id) {
            event.stopPropagation();
            const el = document.createElement('textarea');
            el.value = document.getElementById(id).innerText;
            document.body.appendChild(el); el.select(); document.execCommand('copy'); document.body.removeChild(el);
            const btn = event.target; 
            btn.textContent = 'âœ“ å·²å¤åˆ¶'; 
            btn.style.background = '#28a745';
            setTimeout(() => { 
                btn.textContent = 'å¤åˆ¶ä»£ç '; 
                btn.style.background = '#5ca353'; 
            }, 2000);
        }
    </script>
</body>
</html>
